!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}(function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))switch(typeof e[t]){case"function":break;case"object":e[t]=function(t){var n=t.slice(1),r=e[t[0]];return function(e,t,i){r.apply(this,[e,t,i].concat(n))}}(e[t]);break;default:e[t]=e[e[t]]}return e}([function(e,t,n){e.exports=n(549)},,,function(e,t,n){"use strict";var r=n(4),i=n(5),a=n(6),o=n(7),s=n(8),l=n(9),u=n(10),c=n(12),f=n(15),d=n(16),h=n(17),p=n(18),g=n(19),m=n(20),v=n(21),y=n(22),b=n(23),_=n(24);e.exports={ajax:r,liveInterface:i,taskInterface:a,roomInterface:s,hostInterface:o,verifyCodeInterface:l,rucInterface:u,selfInfoInterface:c,statInfoInterface:f,searchInterface:d,giftInterface:h,videoInterface:g,privateMsgInterface:p,bagInterface:m,foolDaysInterface:v,dnsApiInterface:y,qqgroupInterface:b,addressInterface:_}},function(e,t){"use strict";function n(e,t){return t=t||{},$.ajax("https://u.panda.tv/"+e,{data:t,dataType:"jsonp",timeout:15e3,jsonp:"_jp"})}function r(e,t,n){return t=t||{},n=n||{},PDR.ajax(e,$.extend({},n,{data:t,dataType:"json"}))}function i(e,t,n){return t=t||{},n=n||{},PDR.ajax(e,$.extend({},n,{method:"POST",data:t,dataType:"json"}))}function a(e,t,n){return t=t||{},n=n||{},$.ajax(l+e,$.extend({},n,{data:t,cache:!1,dataType:"json"}))}function o(e,t,n){return t=t||{},n=n||{},$.ajax("//bag.gate.panda.tv"+e,$.extend({},n,{data:t,cache:!1,dataType:"json"}))}function s(e,t,n){return t=t||{},n=n||{},$.ajax(u+e,$.extend({},n,{data:t,cache:!1,dataType:"json"}))}var l="//mall.gate.panda.tv",u="//biz.gate.panda.tv";e.exports={getData:r,postData:i,requestHttpsRuc:n,requestMall:a,requestBag:o,requestAddress:s}},function(e,t,n){"use strict";var r=n(4),i={getNewHostList:function(e){var t=$.Deferred();return r.getData("/live_lists",{pageno:1,pagenum:e,status:2}).then(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()},getUnfollowedList:function(e){var t=$.Deferred();return r.getData("/live_online_unfollowed",{num:e,status:2}).then(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()}};e.exports=i},function(e,t,n){"use strict";var r=n(4),i={getTimerConfig:function(){return r.getData("/ajax_time_task_list")},finishTaskById:function(e){return r.getData("/ajax_time_task_done",{task_id:e})},getTimerAward:function(e,t,n,i){return n=n||{},i=i||PDR.getRoomId(),r.getData("/ajax_task_rewards_get",$.extend({my_task_id:e,roomid:i,appkey:t||"pandaren_time_task",__plat:PDR.__plat,app:"pandatv"},n))},getNewFishTaskList:function(){var e=$.Deferred();return r.getData("/ajax_newer_task_list").then(function(t){t&&0==t.errno&&t.data?e.resolve(t.data):e.resolve(null)}).fail(function(){e.resolve(null)}),e.promise()},getTimeLimitTaskState:function(){var e=$.Deferred();return r.getData("/ajax_ltask_get").then(function(t){t&&0==t.errno&&t.data?e.resolve(t.data):e.reject()}).fail(function(){e.reject()}),e.promise()},getTimeLimitTaskAward:function(e){return e=e||{},r.getData("/ajax_task_rewards_get",$.extend({roomid:PDR.getRoomId(),__plat:PDR.__plat,appkey:"panda_tlimit_task",app:"pandatv"},e))}};e.exports=i},function(e,t,n){"use strict";var r=n(4),i={getUserMail:function(){return r.getData("/ajax_host_email")},getHostApplication:function(){return r.getData("/ajax_get_hostinfo")},submitHostApplication:function(e){return e=e||{},r.postData("/ajax_set_hostinfo",e)}};e.exports=i},function(e,t,n){"use strict";var r=PDR.getRoomId(),i=n(4),a=null,o=!1,s=!1,l={getRoomInfoV3:function(e){var t=window._config_roominfo,n=$.Deferred();if(!a||e&&e!=r)if(!o&&t&&t.roominfo&&t.hostinfo&&t.videoinfo&&t.chatconfig&&t.roominfo.id==e){o=!0;var s=$.extend(!0,{},t);i.getData("/api_room_v3",$.extend({hostid:t.hostinfo.rid,roomid:e,roomkey:s.videoinfo.room_key,_:$.now()},s.callbackParam)).then(function(t){t&&0==t.errno&&t.data?(r=e,s=$.extend(!0,s,t.data),a=s,n.resolve(s)):n.resolve(null)}).fail(function(){n.resolve(null)})}else this.getRoomInfo(e).then(function(e){n.resolve(e)}).fail(function(){n.resolve(null)});else n.resolve(a);return n.promise()},getRoomInfoV21:function(e){var t=$.Deferred();return!a||e&&e!=r?s?this.getRoomInfo(e).then(function(e){t.resolve(e)}).fail(function(){t.resolve(null)}):(s=!0,i.getData("/api_room_v21",{roomid:e,_:$.now()}).then(function(n){if(n&&0==n.errno&&n.data){var o=n.data;i.getData("/api_room_v3",$.extend({hostid:o.hostinfo.rid,roomid:e,roomkey:o.videoinfo.room_key,_:$.now()},o.callbackParam)).then(function(i){i&&0==i.errno&&i.data?(r=e,o=$.extend(!0,{},n.data,i.data),a=o,t.resolve(o)):t.resolve(null)}).fail(function(){t.resolve(null)})}else t.resolve(null)}).fail(function(){t.resolve(null)})):t.resolve(a),t.promise()},getRoomInfo:function(e){var t=$.Deferred();return!a||e&&e!=r?i.getData("/api_room_v2",{roomid:e,_:$.now()}).then(function(n){n&&0==n.errno&&n.data?(r=e,a=n.data,t.resolve(n.data)):t.resolve(null)}).fail(function(){t.resolve(null)}):t.resolve(a),t.promise()},getRoomInfoFresh:function(e){var t=$.Deferred();return i.getData("/api_room_v2",{roomid:e,_:$.now()}).then(function(n){n&&0==n.errno&&n.data?(r=e,a=n.data,t.resolve(n.data)):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()},getRoomPlflag:function(e,t){var n=$.Deferred();return a&&e&&e==r?i.getData("/ajax_privateroom_pullinfo",$.extend({_:$.now()},t)).then(function(t){t&&0==t.errno&&t.data&&e==r?(a.videoinfo&&$.extend(a.videoinfo,t.data.videoinfo),n.resolve(t)):n.resolve(null)}).fail(function(){n.resolve(null)}):n.resolve(null),n.promise()},updateSpeakInterval:function(e,t){a&&a.chatconfig&&e==r&&(a.chatconfig.speak_interval=t)},updateChatConfig:function(e,t){a&&a.chatconfig&&e==r&&(a.chatconfig.speak_interval=t.speak_interval,a.chatconfig.min_level=t.min_level,a.chatconfig.all_forbid=t.all_forbid)},getHostInfo:function(){var e=$.Deferred();return a?e.resolve(a.hostinfo):l.getRoomInfo().then(function(t){e.resolve(t.hostinfo)}).fail(function(){e.resolve(null)}),e.promise()},getRoomFollowInfo:function(e){var t=$.Deferred();return e?i.getData("/room_followinfo",{roomid:e,_:$.now()}).then(function(e){e&&0===e.errno&&e.data?t.resolve(e.data):t.reject(null)}).fail(function(){t.reject(null)}):t.reject(null),t.promise()},postFollowRoom:function(e){return i.postData("/ajax_follow",{roomid:e})},postUnFollowRoom:function(e){return i.postData("/ajax_unfollow",{roomid:e})},getStationData:function(e,t){var n="//ivern.gate.panda.tv/weekly_rank/",r=$.Deferred();return e&&t?$.when(i.getData("/station/roominfo",{roomid:e,hostid:t}),$.ajax(n+"anchor_station_rank",{data:{anchorid:t},cache:!1,dataType:"json"})).then(function(e,t){e=e[0],t=t[0];var n={};if(e&&0===e.errno&&e.data&&t&&0===t.errno&&t.data){var i={isbuy:t.data.day_buy,day_score:t.data.day_score,score:t.data.week_score,rank:t.data.week_rank};n={gift:e.data.gift,prizelist:e.data.prizelist,rankinfo:i},r.resolve(n)}else r.reject(null)}).fail(function(){r.reject(null)}):r.reject(null),r.promise()},sendPresent:function(e){var t=$.Deferred();return this.getRoomInfo().then(function(n){var r=n.roominfo,a=n.hostinfo,o=a.rid,s=r.id;i.getData("/ajax_bamboos_send",{bamboos_num:e,to:o,roomid:s,__plat:PDR.__plat}).then(function(e){t.resolve(e)})}),t.promise()},sendGroupMsg:function(e,t,n,r){var a=$.Deferred();return l.getRoomInfo(t).then(function(t){var o=t.userinfo,s=t.roominfo;if(!o||!o.rid||parseInt(o.rid)<=0)a.reject("用户没有登录");else if(s&&s.id){var l={roomid:s.id,type:1,content:e,hostid:t.hostinfo.rid,__plat:PDR.__plat,topMsg:r?1:0};$.extend(l,n||{}),i.getData("/ajax_send_group_msg",l).then(function(e){a.resolve(e)}).fail(function(){a.reject("请求发送失败")})}else a.reject("没有房间消息")}),a.promise()},appointManager:function(e){var t=$.Deferred();return this.getRoomInfo().then(function(n){i.postData("/ajax_user_role_allocate",$.extend({roomid:n.roominfo.id},e)).then(function(e){0==e.errno?t.resolve():t.reject(e.errmsg)}).fail(function(){t.reject("添加管理员失败")})}),t.promise()},removeManager:function(e){var t=$.Deferred();return this.getRoomInfo().then(function(n){i.postData("/ajax_user_role_del",$.extend({roomid:n.roominfo.id},e)).then(function(e){0==e.errno?t.resolve():t.reject(e.errmsg)}).fail(function(){t.reject("解除管理员失败")})}),t.promise()},silence:function(e){var t=$.Deferred();return this.getRoomInfo().then(function(n){i.postData("/ajax_forbid_speak",{roomid:n.roominfo.id,person_id:e}).then(function(e){0==e.errno?t.resolve():t.reject(e.errmsg)}).fail(function(){t.reject("禁言失败")})}),t.promise()},silenceIP:function(e){var t=$.Deferred();return this.getRoomInfo().then(function(n){i.postData("/ajax_forbid_ip",{roomid:n.roominfo.id,person_id:e}).then(function(e){0==e.errno?t.resolve():t.reject(e.errmsg)}).fail(function(){t.reject("封禁IP失败")})}),t.promise()},report:function(e){var t=$.Deferred();return $.ajax({type:"post",dataType:"json",url:"//api.report.panda.tv/report/ajax_report_msg",data:e}).then(function(e){0==e.errno?t.resolve():t.reject(e.errno)}).fail(function(){t.reject("举报失败")}),t},clear:function(){a=null}};e.exports=l},function(e,t,n){"use strict";var r=n(4),i={getHostPhone:function(e){return r.requestHttpsRuc("ajax_send_apply_anchor_sms",{})},checkHostPhone:function(e,t){return r.requestHttpsRuc("ajax_check_apply_anchor",{vcode:t})},sendRetrievePasswordSMS:function(){var e=$.Deferred();return r.requestHttpsRuc("ajax_send_reset_pwd_sms").then(function(t){return e.resolve(t)}),e.promise()},checkRetrievePasswordSMS:function(e){var t=$.Deferred();return r.requestHttpsRuc("ajax_check_reset_pwd_mobile",e).then(function(e){t.resolve(e)}),t.promise()}};e.exports=i},function(e,t,n){"use strict";function r(e){var t=$.Deferred();return $.when(E.requestHttpsRuc("ajax_aeskey")).then(function(n){var r=n.data||"";r=k.enc.Utf8.parse(r);var i=k.enc.Utf8.parse("995d1b5ebbac3761"),a=k.AES.encrypt(e.password,r,{iv:i,mode:k.mode.CBC,padding:k.pad.ZeroPadding}).toString();t.resolve(a)}).fail(function(e){e.errmsg="熊猫君遇到了一些阻碍，请稍后再试",t.reject(e)}),t.promise()}function i(e,t){var n=$.Deferred(),r=k.enc.Utf8.parse(e),i=k.enc.Utf8.parse("995d1b5ebbac3761"),a=k.AES.encrypt(t,r,{iv:i,mode:k.mode.CBC,padding:k.pad.ZeroPadding}).toString();return n.resolve(a),n}function a(e){return E.requestHttpsRuc("ajax_login",e)}function o(e){return E.requestHttpsRuc("ajax_mobile_register",e)}function s(){return E.requestHttpsRuc("logout")}function l(){var e=$.Deferred();return E.requestHttpsRuc("auth").then(function(t){0==t.errno&&t.data?e.resolve(t.data):e.resolve(null)}).fail(function(t){t.errmsg="熊猫君遇到了一些阻碍，请稍后再试",e.reject(t)}),e.promise()}function u(e){var t=$.Deferred();return E.requestHttpsRuc("ajax_check_nickname",e).then(function(e){0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}).fail(function(e){e.errmsg="熊猫君遇到了一些阻碍，请稍后再试",t.reject(e)}),t.promise()}function c(){var e=$.Deferred();return E.requestHttpsRuc("check_modify_nick").then(function(t){0==t.errno?e.resolve(!0):e.resolve(!1)}).fail(function(t){t.errmsg="熊猫君遇到了一些阻碍，请稍后再试",e.reject(t)}),e.promise()}function f(e){var t=$.Deferred();return E.requestHttpsRuc("ajax_send_register_sms",e).then(function(e){0==e.errno?t.resolve():t.reject(e)}).fail(function(e){e.errmsg="熊猫君遇到了一些阻碍，请稍后再试",t.reject(e)}),t.promise()}function d(e){var t=$.Deferred();return E.requestHttpsRuc("ajax_forgetmain",e).then(function(e){t.resolve(e)}).fail(function(e){e.errmsg="熊猫君遇到了一些阻碍，请稍后再试",t.reject(e)}),t.promise()}function h(e){var t=$.Deferred();return E.requestHttpsRuc("ajax_resetpwd",e).then(function(e){t.resolve(e)}).fail(function(e){e.errmsg="熊猫君遇到了一些阻碍，请稍后再试",t.reject(e)}),t.promise()}function p(e){var t=$.Deferred();return E.requestHttpsRuc("ajax_reset_forget_pwd",e).then(function(e){t.resolve(e)}).fail(function(e){e.errmsg="熊猫君遇到了一些阻碍，请稍后再试",t.reject(e)}),t.promise()}function g(){var e=$.Deferred();return E.requestHttpsRuc("ajax_sendmailfindpwd").then(function(t){e.resolve(t)}).fail(function(t){t.errmsg="熊猫君遇到了一些阻碍，请稍后再试",e.reject(t)}),e.promise()}function m(e){var t=$.Deferred();return E.requestHttpsRuc("save_sinfo",e).then(function(e){t.resolve(e)}).fail(function(e){e.errmsg="熊猫君遇到了一些阻碍，请稍后再试",t.reject(e)}),t.promise()}function v(){var e=$.Deferred();return E.requestHttpsRuc("get_sinfo").then(function(t){0==t.errno&&t.data?e.resolve(t.data):e.resolve(null)}).fail(function(t){t.errmsg="熊猫君遇到了一些阻碍，请稍后再试",e.reject(t)}),e.promise()}function y(){var e=$.Deferred();return E.requestHttpsRuc("get_idinfo").then(function(t){0==t.errno&&t.data?e.resolve(t.data):e.resolve(null)}).fail(function(t){t.errmsg="熊猫君遇到了一些阻碍，请稍后再试",e.reject(t)}),e.promise()}function b(){var e=$.Deferred();return E.getData("/ajax_get_cconfig",{key:"intermobile"}).then(function(t){0==t.errno&&t.data?e.resolve(t.data):e.resolve(null)}).fail(function(){e.reject(null)}),e.promise()}function _(e){var t=$.Deferred();return E.requestHttpsRuc("ajax_send_sms",e).then(function(e){0==e.errno?t.resolve():t.reject(e)}).fail(function(e){e.errmsg="熊猫君遇到了一些阻碍，请稍后再试",t.reject(e)}),t.promise()}function w(e){var t=$.Deferred();return E.requestHttpsRuc("ajax_change_mobile",e).then(function(e){0==e.errno?t.resolve(e.data):t.reject(e)}).fail(function(e){e.errmsg="熊猫君遇到了一些阻碍，请稍后再试",t.reject(e)}),t.promise()}function x(){var e=$.Deferred();return E.requestHttpsRuc("ajax_can_change_mobile").then(function(t){0==t.errno?e.resolve():e.reject(t)}).fail(function(t){t.errmsg="熊猫君遇到了一些阻碍，请稍后再试",e.reject(t)}),e.promise()}var k=n(11),E=n(4),S={getAesWord:i,aesPassword:r,login:a,regist:o,logout:s,getUserInfo:l,checkNickNameRepeat:u,checkModifyNickname:c,requestRegistVCode:f,retrievePasswordEntry:d,resetPwd:h,resetPwdByMobile:p,setEmail:g,setPersonProfile:m,getSinfo:v,getPersonIdProfile:y,getCountry:b,getVoiceCode:_,changeMobile:w,isChangeMobile:x};e.exports=S},function(e,t){var n=e.exports=n||function(e,t){var n={},r=n.lib={},i=function(){},a=r.Base={extend:function(e){i.prototype=this;var t=new i;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=r.WordArray=a.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||l).stringify(this)},concat:function(e){var t=this.words,n=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var i=0;i<e;i++)t[r+i>>>2]|=(n[i>>>2]>>>24-8*(i%4)&255)<<24-8*((r+i)%4);else if(65535<n.length)for(i=0;i<e;i+=4)t[r+i>>>2]=n[i>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],r=0;r<t;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,t)}}),s=n.enc={},l=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++){var i=t[r>>>2]>>>24-8*(r%4)&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n[r>>>3]|=parseInt(e.substr(r,2),16)<<24-4*(r%8);return new o.init(n,t/2)}},u=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var n=[],r=0;r<e;r++)n.push(String.fromCharCode(t[r>>>2]>>>24-8*(r%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],r=0;r<t;r++)n[r>>>2]|=(255&e.charCodeAt(r))<<24-8*(r%4);return new o.init(n,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=r.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,r=n.words,i=n.sigBytes,a=this.blockSize,s=i/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0);if(t=s*a,i=e.min(4*t,i),t){for(var l=0;l<t;l+=a)this._doProcessBlock(r,l);l=r.splice(0,t),n.sigBytes-=i}return new o.init(l,i)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=f.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,n){return new e.init(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return new d.HMAC.init(e,n).finalize(t)}}});var d=n.algo={};return n}(Math);!function(){var e=n,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,n=e.sigBytes,r=this._map;e.clamp(),e=[];for(var i=0;i<n;i+=3)for(var a=(t[i>>>2]>>>24-8*(i%4)&255)<<16|(t[i+1>>>2]>>>24-8*((i+1)%4)&255)<<8|t[i+2>>>2]>>>24-8*((i+2)%4)&255,o=0;4>o&&i+.75*o<n;o++)e.push(r.charAt(a>>>6*(3-o)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var n=e.length,r=this._map,i=r.charAt(64);i&&(i=e.indexOf(i),-1!=i&&(n=i));for(var i=[],a=0,o=0;o<n;o++)if(o%4){var s=r.indexOf(e.charAt(o-1))<<2*(o%4),l=r.indexOf(e.charAt(o))>>>6-2*(o%4);i[a>>>2]|=(s|l)<<24-8*(a%4),a++}return t.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,n,r,i,a,o){return e=e+(t&n|~t&r)+i+o,(e<<a|e>>>32-a)+t}function r(e,t,n,r,i,a,o){return e=e+(t&r|n&~r)+i+o,(e<<a|e>>>32-a)+t}function i(e,t,n,r,i,a,o){return e=e+(t^n^r)+i+o,(e<<a|e>>>32-a)+t}function a(e,t,n,r,i,a,o){return e=e+(n^(t|~r))+i+o,(e<<a|e>>>32-a)+t}for(var o=n,s=o.lib,l=s.WordArray,u=s.Hasher,s=o.algo,c=[],f=0;64>f;f++)c[f]=4294967296*e.abs(e.sin(f+1))|0;s=s.MD5=u.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var o=0;16>o;o++){var s=n+o,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var o=this._hash.words,s=e[n+0],l=e[n+1],u=e[n+2],f=e[n+3],d=e[n+4],h=e[n+5],p=e[n+6],g=e[n+7],m=e[n+8],v=e[n+9],y=e[n+10],b=e[n+11],_=e[n+12],w=e[n+13],x=e[n+14],k=e[n+15],E=o[0],S=o[1],T=o[2],A=o[3],E=t(E,S,T,A,s,7,c[0]),A=t(A,E,S,T,l,12,c[1]),T=t(T,A,E,S,u,17,c[2]),S=t(S,T,A,E,f,22,c[3]),E=t(E,S,T,A,d,7,c[4]),A=t(A,E,S,T,h,12,c[5]),T=t(T,A,E,S,p,17,c[6]),S=t(S,T,A,E,g,22,c[7]),E=t(E,S,T,A,m,7,c[8]),A=t(A,E,S,T,v,12,c[9]),T=t(T,A,E,S,y,17,c[10]),S=t(S,T,A,E,b,22,c[11]),E=t(E,S,T,A,_,7,c[12]),A=t(A,E,S,T,w,12,c[13]),T=t(T,A,E,S,x,17,c[14]),S=t(S,T,A,E,k,22,c[15]),E=r(E,S,T,A,l,5,c[16]),A=r(A,E,S,T,p,9,c[17]),T=r(T,A,E,S,b,14,c[18]),S=r(S,T,A,E,s,20,c[19]),E=r(E,S,T,A,h,5,c[20]),A=r(A,E,S,T,y,9,c[21]),T=r(T,A,E,S,k,14,c[22]),S=r(S,T,A,E,d,20,c[23]),E=r(E,S,T,A,v,5,c[24]),A=r(A,E,S,T,x,9,c[25]),T=r(T,A,E,S,f,14,c[26]),S=r(S,T,A,E,m,20,c[27]),E=r(E,S,T,A,w,5,c[28]),A=r(A,E,S,T,u,9,c[29]),T=r(T,A,E,S,g,14,c[30]),S=r(S,T,A,E,_,20,c[31]),E=i(E,S,T,A,h,4,c[32]),A=i(A,E,S,T,m,11,c[33]),T=i(T,A,E,S,b,16,c[34]),S=i(S,T,A,E,x,23,c[35]),E=i(E,S,T,A,l,4,c[36]),A=i(A,E,S,T,d,11,c[37]),T=i(T,A,E,S,g,16,c[38]),S=i(S,T,A,E,y,23,c[39]),E=i(E,S,T,A,w,4,c[40]),A=i(A,E,S,T,s,11,c[41]),T=i(T,A,E,S,f,16,c[42]),S=i(S,T,A,E,p,23,c[43]),E=i(E,S,T,A,v,4,c[44]),A=i(A,E,S,T,_,11,c[45]),T=i(T,A,E,S,k,16,c[46]),S=i(S,T,A,E,u,23,c[47]),E=a(E,S,T,A,s,6,c[48]),A=a(A,E,S,T,g,10,c[49]),T=a(T,A,E,S,x,15,c[50]),S=a(S,T,A,E,h,21,c[51]),E=a(E,S,T,A,_,6,c[52]),A=a(A,E,S,T,f,10,c[53]),T=a(T,A,E,S,y,15,c[54]),S=a(S,T,A,E,l,21,c[55]),E=a(E,S,T,A,m,6,c[56]),A=a(A,E,S,T,k,10,c[57]),T=a(T,A,E,S,p,15,c[58]),S=a(S,T,A,E,w,21,c[59]),E=a(E,S,T,A,d,6,c[60]),A=a(A,E,S,T,b,10,c[61]),T=a(T,A,E,S,u,15,c[62]),S=a(S,T,A,E,v,21,c[63]);o[0]=o[0]+E|0,o[1]=o[1]+S|0,o[2]=o[2]+T|0,o[3]=o[3]+A|0},_doFinalize:function(){var t=this._data,n=t.words,r=8*this._nDataBytes,i=8*t.sigBytes;n[i>>>5]|=128<<24-i%32;var a=e.floor(r/4294967296);for(n[(i+64>>>9<<4)+15]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),n[(i+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(n.length+1),this._process(),t=this._hash,n=t.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return t},clone:function(){var e=u.clone.call(this);return e._hash=this._hash.clone(),e}}),o.MD5=u._createHelper(s),o.HmacMD5=u._createHmacHelper(s)}(Math),function(){var e=n,t=e.lib,r=t.Base,i=t.WordArray,t=e.algo,a=t.EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var n=this.cfg,r=n.hasher.create(),a=i.create(),o=a.words,s=n.keySize,n=n.iterations;o.length<s;){l&&r.update(l);var l=r.update(e).finalize(t);r.reset();for(var u=1;u<n;u++)l=r.finalize(l),r.reset();a.concat(l)}return a.sigBytes=4*s,a}});e.EvpKDF=function(e,t,n){return a.create(n).compute(e,t)}}(),n.lib.Cipher||function(e){var t=n,r=t.lib,i=r.Base,a=r.WordArray,o=r.BufferedBlockAlgorithm,s=t.enc.Base64,l=t.algo.EvpKDF,u=r.Cipher=o.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,n){this.cfg=this.cfg.extend(n),this._xformMode=e,this._key=t,this.reset()},reset:function(){o.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,n,r){return("string"==typeof n?g:p).encrypt(e,t,n,r)},decrypt:function(t,n,r){return("string"==typeof n?g:p).decrypt(e,t,n,r)}}}});r.StreamCipher=u.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var c=t.mode={},f=function(t,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var a=0;a<r;a++)t[n+a]^=i[a]},d=(r.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();d.Encryptor=d.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize;f.call(this,e,t,r),n.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),d.Decryptor=d.extend({processBlock:function(e,t){var n=this._cipher,r=n.blockSize,i=e.slice(t,t+r);n.decryptBlock(e,t),f.call(this,e,t,r),this._prevBlock=i}}),c=c.CBC=d,d=(t.pad={}).Pkcs7={pad:function(e,t){for(var n=4*t,n=n-e.sigBytes%n,r=n<<24|n<<16|n<<8|n,i=[],o=0;o<n;o+=4)i.push(r);n=a.create(i,n),e.concat(n)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},r.BlockCipher=u.extend({cfg:u.cfg.extend({mode:c,padding:d}),reset:function(){u.reset.call(this);var e=this.cfg,t=e.iv,e=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=e.createEncryptor;else n=e.createDecryptor,this._minBufferSize=1;this._mode=n.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=r.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return e=e.salt,(e?a.create([1398893684,1701076831]).concat(e).concat(t):t).toString(s)},parse:function(e){e=s.parse(e);var t=e.words;if(1398893684==t[0]&&1701076831==t[1]){var n=a.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:n})}},p=r.SerializableCipher=i.extend({cfg:i.extend({format:c}),encrypt:function(e,t,n,r){r=this.cfg.extend(r);var i=e.createEncryptor(n,r);return t=i.finalize(t),i=i.cfg,h.create({ciphertext:t,key:n,iv:i.iv,algorithm:e,mode:i.mode,padding:i.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(n,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),t=(t.kdf={}).OpenSSL={execute:function(e,t,n,r){return r||(r=a.random(8)),e=l.create({keySize:t+n}).compute(e,r),n=a.create(e.words.slice(t),4*n),e.sigBytes=4*t,h.create({key:e,iv:n,salt:r})}},g=r.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:t}),encrypt:function(e,t,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,e.keySize,e.ivSize),r.iv=n.iv,e=p.encrypt.call(this,e,t,n.key,r),e.mixIn(n),e},decrypt:function(e,t,n,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),n=r.kdf.execute(n,e.keySize,e.ivSize,t.salt),r.iv=n.iv,p.decrypt.call(this,e,t,n.key,r)}})}(),function(){for(var e=n,t=e.lib.BlockCipher,r=e.algo,i=[],a=[],o=[],s=[],l=[],u=[],c=[],f=[],d=[],h=[],p=[],g=0;256>g;g++)p[g]=128>g?g<<1:g<<1^283;for(var m=0,v=0,g=0;256>g;g++){var y=v^v<<1^v<<2^v<<3^v<<4,y=y>>>8^255&y^99;i[m]=y,a[y]=m;var b=p[m],_=p[b],w=p[_],x=257*p[y]^16843008*y;o[m]=x<<24|x>>>8,s[m]=x<<16|x>>>16,l[m]=x<<8|x>>>24,u[m]=x,x=16843009*w^65537*_^257*b^16843008*m,c[y]=x<<24|x>>>8,f[y]=x<<16|x>>>16,d[y]=x<<8|x>>>24,h[y]=x,m?(m=b^p[p[p[w^b]]],v^=p[p[v]]):m=v=1}var k=[0,1,2,4,8,16,32,64,128,27,54],r=r.AES=t.extend({_doReset:function(){for(var e=this._key,t=e.words,n=e.sigBytes/4,e=4*((this._nRounds=n+6)+1),r=this._keySchedule=[],a=0;a<e;a++)if(a<n)r[a]=t[a];else{var o=r[a-1];a%n?6<n&&4==a%n&&(o=i[o>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o]):(o=o<<8|o>>>24,o=i[o>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o],o^=k[a/n|0]<<24),r[a]=r[a-n]^o}for(t=this._invKeySchedule=[],n=0;n<e;n++)a=e-n,o=n%4?r[a]:r[a-4],t[n]=4>n||4>=a?o:c[i[o>>>24]]^f[i[o>>>16&255]]^d[i[o>>>8&255]]^h[i[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,o,s,l,u,i)},decryptBlock:function(e,t){var n=e[t+1];e[t+1]=e[t+3],e[t+3]=n,this._doCryptBlock(e,t,this._invKeySchedule,c,f,d,h,a),n=e[t+1],e[t+1]=e[t+3],e[t+3]=n},_doCryptBlock:function(e,t,n,r,i,a,o,s){for(var l=this._nRounds,u=e[t]^n[0],c=e[t+1]^n[1],f=e[t+2]^n[2],d=e[t+3]^n[3],h=4,p=1;p<l;p++)var g=r[u>>>24]^i[c>>>16&255]^a[f>>>8&255]^o[255&d]^n[h++],m=r[c>>>24]^i[f>>>16&255]^a[d>>>8&255]^o[255&u]^n[h++],v=r[f>>>24]^i[d>>>16&255]^a[u>>>8&255]^o[255&c]^n[h++],d=r[d>>>24]^i[u>>>16&255]^a[c>>>8&255]^o[255&f]^n[h++],u=g,c=m,f=v;g=(s[u>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&d])^n[h++],m=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[d>>>8&255]<<8|s[255&u])^n[h++],v=(s[f>>>24]<<24|s[d>>>16&255]<<16|s[u>>>8&255]<<8|s[255&c])^n[h++],d=(s[d>>>24]<<24|s[u>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^n[h++],e[t]=g,e[t+1]=m,e[t+2]=v,e[t+3]=d},keySize:8});e.AES=t._createHelper(r)}(),n.pad.ZeroPadding={pad:function(e,t){var n=4*t;e.clamp(),e.sigBytes+=n-(e.sigBytes%n||n)},unpad:function(e){for(var t=e.words,n=e.sigBytes-1;!(t[n>>>2]>>>24-n%4*8&255);)n--;e.sigBytes=n+1}}},function(e,t,n){"use strict";var r=n(4),i=n(13),a=Ruc.request,o=null,s=null,l={getSelfInfo:a.getSelfInfo,updateSelfInfo:a.updateSelfInfo,setUserInfo:a.setUserInfo,getExp:a.getExp,setExp:a.setExp,getBamboos:function(e){var t=$.Deferred(),n=this;return e||null===s?r.getData("/ajax_my_bamboos_get").done(function(e){e&&"0"==e.errno?(n.setBamboos(e.data),t.resolve(e.data)):t.resolve(0)}).fail(function(){t.resolve(0)}):t.resolve(s),t.promise()},setBamboos:function(e,t){var n=s;return t&&null===s?this.getBamboos(!0):(t?s+=+e:s=+e,n!==s&&i.triggerEvent("user-bamboo-changed",{oldValue:n,newValue:s})),this},getMaobi:function(e){var t=$.Deferred(),n=this;return e||null===o?r.requestMall("/ajax_gift_money_get",{_:$.now()}).done(function(e){e&&"0"==e.errno?(n.setMaobi(e.data),t.resolve(e.data)):t.resolve(0)}).fail(function(){t.resolve(0)}):t.resolve(o),t.promise()},setMaobi:function(e,t){var n=o;return t&&null===o?this.getMaobi(!0):(t?o+=+e:o=+e,n!==o&&i.triggerEvent("user-maobi-changed",{oldValue:n,newValue:o})),this},getMessageNum:function(){var e=$.Deferred();return r.getData("/ajax_get_message_num",{},{cache:!1}).done(function(t){t&&0==t.errno?e.resolve(t.data):e.resolve(null)}).fail(function(){e.resolve(null)}),e.promise()},checkToken:function(){var e=$.Deferred();return r.getData("/ajax_checktoken").done(function(t){e.resolve(t)}).fail(function(){e.resolve(0)}),e.promise()},getRechargeLimit:function(){var e=$.Deferred();return r.getData("/ajax_recharge_limit").done(function(t){e.resolve(t)}).fail(function(){e.resolve({})}),e.promise()},setHostLevel:a.setHostLevel};e.exports=l},function(e,t,n){"use strict";var r=n(14),i=Array.prototype.slice,a=window.__ob||new r({});a.triggerEvent=function(e){a.trigger(e,i.call(arguments,1)||[])},window.__ob||(window.__ob=a),window.PDR=window.PDR||{},window.PDR.ob=a,e.exports=a,e.exports.EventEmitter=r},function(e,t,n){var r;!function(t){"use strict";function i(){}function a(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function o(e){return function(){return this[e].apply(this,arguments)}}function s(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&s(e.listener)}var l=i.prototype,u=t.EventEmitter;l.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},l.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},l.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},l.addListener=function(e,t){if(!s(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),i="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&a(r[n],t)===-1&&r[n].push(i?t:{listener:t,once:!1});return this},l.on=o("addListener"),l.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},l.once=o("addOnceListener"),l.defineEvent=function(e){return this.getListeners(e),this},l.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},l.removeListener=function(e,t){var n,r,i=this.getListenersAsObject(e);for(r in i)i.hasOwnProperty(r)&&(n=a(i[r],t),n!==-1&&i[r].splice(n,1));return this},l.off=o("removeListener"),l.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},l.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},l.manipulateListeners=function(e,t,n){var r,i,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)a.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},l.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},l.removeAllListeners=o("removeEvent"),l.emitEvent=function(e,t){var n,r,i,a,o,s=this.getListenersAsObject(e);for(a in s)if(s.hasOwnProperty(a))for(n=s[a].slice(0),i=0;i<n.length;i++)r=n[i],r.once===!0&&this.removeListener(e,r.listener),o=r.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},l.trigger=o("emitEvent"),l.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},l.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},l._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},l._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return t.EventEmitter=u,i},r=function(){return i}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))}(this||{});
},function(e,t,n){"use strict";var r=n(4),i={getLiveTime:function(e,t,n,i){return r.getData("/ajax_play_list_by_range",{starttime:e,endtime:t,pageno:n,pagenum:i})},getBamboosStat:function(e,t,n,i,a){return r.getData("/ajax_bamboo_range_stat",{start:e,end:t,pageno:i,pagenum:n,need_bamboo_cnt:a})}};e.exports=i},function(e,t,n){"use strict";var r=n(4),i="https://search.xingyan.panda.tv/ajaxsearch/profiles";e.exports={search:function(e){return r.getData("/ajax_search",e||{})},searchXingYan:function(e){return r.getData(i,e||{})}}},function(e,t,n){"use strict";function r(e){var t=$.Deferred();return e=e||{},e.__plat=PDR.__plat,s.requestMall("/ajax_gift_send",e).then(function(e){0==e.errno&&e.data?t.resolve(e):t.reject(e)}).fail(function(){t.reject({errno:500,errmsg:"土豪，请慢慢点啦"})}),t.promise()}function i(e,t){var n=$.Deferred();return o?n.resolve(o):s.requestMall("/ajax_gift_gifts_get",$.extend({roomid:e,__plat:PDR.__plat},t)).then(function(e){0==e.errno&&e.data?(o=e.data,n.resolve(e.data)):n.reject(e)}).fail(function(){n.reject()}),n.promise()}function a(e){var t=$.Deferred();return s.requestMall("/ajax_get_room_gifting",{roomid:e}).then(function(e){e&&0===e.errno&&e.data&&"array"==$.type(e.data)&&e.data.length>0?t.resolve(e.data):t.reject()}).fail(function(){t.reject()}),t.promise()}var o,s=n(4);e.exports={sendGift:r,getGiftListByRoomID:i,getRoomGifting:a}},function(e,t){"use strict";var n=PDR.getProtocol()+"//privatemsg.panda.tv",r={getMsgList:function(e,t){var r=$.Deferred(),i=30;return $.ajax({url:n+"/index.php",data:{method:"private.msglist",tid:e,page:t,pagenum:i,_:$.now()},dataType:"json"}).then(function(e){e&&0==e.errno&&e.data?r.resolve(e.data):r.resolve(null)}).fail(function(){r.resolve(null)}),r.promise()},getChatList:function(){var e=$.Deferred();return $.ajax({url:n+"/index.php",data:{method:"private.chatlist",_:$.now()},dataType:"json"}).then(function(t){t&&0==t.errno&&t.data?e.resolve(t.data):e.reject()}).fail(function(){e.reject()}),e.promise()},postForbidCheck:function(e,t){var r=$.Deferred();return $.ajax({type:"post",url:n+"/index.php?method=private.forbidcheck",data:{rid:e,tid:t},dataType:"json"}).then(function(e){e&&0==e.errno?r.resolve(e.data):r.reject()}).fail(function(){r.reject()}),r.promise()},getUserInfo:function(e){var t=$.Deferred();return PDR.ajax("/ajax_getuserinfo",{data:{rid:e,_:$.now()},dataType:"json"}).then(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()},getSetting:function(){var e=$.Deferred();return $.ajax({url:n+"/index.php",data:{method:"private.setting",_:$.now()},dataType:"json"}).then(function(t){t&&0==t.errno&&t.data?e.resolve(t.data):e.reject()}).fail(function(){e.reject()}),e.promise()},postAllowAll:function(e,t){var r=$.Deferred();return $.ajax({type:"post",url:n+"/index.php?method=private.allowall",data:{rid:e,level:t},dataType:"json"}).then(function(e){e&&0==e.errno?r.resolve(e.data):r.resolve(null)}).fail(function(){r.resolve(null)}),r.promise()},postForbidAll:function(e){var t=$.Deferred();return $.ajax({type:"post",url:n+"/index.php?method=private.forbidall",data:{rid:e},dataType:"json"}).then(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()},postForbid:function(e,t){var r=$.Deferred();return $.ajax({type:"post",url:n+"/index.php?method=private.forbid",data:{rid:e,tid:t},dataType:"json"}).then(function(e){e&&0==e.errno&&e.data?r.resolve(e.data):r.resolve(null)}).fail(function(){r.resolve(null)}),r.promise()},postAllow:function(e,t){var r=$.Deferred();return $.ajax({type:"post",url:n+"/index.php?method=private.resetforbid",data:{rid:e,tid:t},dataType:"json"}).then(function(e){e&&0==e.errno&&e.data?r.resolve(e.data):r.resolve(null)}).fail(function(){r.resolve(null)}),r.promise()},getForbidList:function(e,t){var r=$.Deferred();return $.ajax({url:n+"/index.php",data:{method:"private.forbidlist",_:$.now()},dataType:"json"}).then(function(e){e&&0==e.errno&&e.data?r.resolve(e.data):r.reject()}).fail(function(){r.reject()}),r.promise()},postRemoveChat:function(e,t){var r=$.Deferred();return $.ajax({type:"post",url:n+"/index.php?method=private.removechat",data:{rid:e,tid:t},dataType:"json"}).then(function(e){e&&0==e.errno&&e.data?r.resolve(e.data):r.resolve(null)}).fail(function(){r.resolve(null)}),r.promise()}};e.exports=r},function(e,t,n){"use strict";var r="//vod.gate.panda.tv",i={},a=(n(4),function(e){return r+"/"+e}),o={getVideoInfo:function(e,t){var n={cache:!0};$.extend(n,t);var r=$.Deferred();return n.cache&&i[e]&&r.resolve(i[e]),$.ajax(a("api/get/"+e)).then(function(t){0===t.errno&&t.data&&"string"!=typeof t.data?(i[e]=t.data,r.resolve(t.data)):r.reject(null)}).fail(function(){r.reject(null)}),r.promise()},getVideoList:function(e,t){var n={data:{pagenum:100,order:"upload_time",pageno:0},cache:!0};$.extend(n,t);var r=$.Deferred();return n.cache&&i[n.data.pagenum]&&i[n.data.pagenum][n.data.pageno]&&r.resolve(i[n.data.pagenum][n.data.pageno]),$.ajax({url:a("api/list/"+e),data:n.data}).then(function(e){0===e.errno&&e.data.list&&"string"!=typeof e.data.list?(i[n.data.pagenum]||(i[n.data.pagenum]={}),i[n.data.pagenum][n.data.pageno]=e.data,r.resolve(e.data)):r.reject(null)}).fail(function(){r.reject(null)}),r.promise()},addPlayTimes:function(e){return $.ajax(a("api/incrnum/"+e))}};e.exports=o},function(e,t,n){"use strict";var r=n(4),i={getBagGoods:function(e){var t=$.Deferred(),n=PDR.__plat;return e=$.extend({},e,{pc_version:2,__plat:n}),r.requestBag("/bag/get",e).then(function(e){e&&0===e.errno&&e.data?t.resolve(e.data):t.reject(e)}).fail(function(e){t.reject({})}),t.promise()},sendBagGoods:function(e){var t=$.Deferred(),n=PDR.__plat;return r.requestBag("/bag/take?__plat="+n,e,{type:"POST"}).then(function(e){e&&0===e.errno?t.resolve(e.data):t.reject(e)}).fail(function(e){t.reject({})}),t.promise()},getBagsTotal:function(e){var t=$.Deferred(),n=PDR.__plat;return e=$.extend({},e,{__plat:n}),r.requestBag("/bag/num",e).then(function(e){e&&0===e.errno&&e.data?t.resolve(e.data):t.resolve(e)}).fail(function(e){t.resolve({})}),t.promise()}};e.exports=i},function(e,t,n){"use strict";var r,i=n(4),a={getFoolDaysUserInfo:function(e){var t=$.Deferred();return r?t.resolve(r):i.getData("/fool/infoget/simple",{rid:e,_:$.now()}).then(function(e){e&&0==e.errno&&e.data?(r=e.data,t.resolve(r)):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()},getFoollDaysHostInfo:function(){var e=$.Deferred();return i.getData("/fool/infoget/detail",{}).then(function(t){t&&0==t.errno&&t.data?e.resolve(t.data):e.resolve(t)}).fail(function(){e.reject()}),e.promise()}};e.exports=a},function(e,t){"use strict";var n={getDnsOut:function(){var e={key:"wstong",form:"json"};return $.ajax("//who.wangsu.com",{data:e,dataType:"jsonp",jsonp:"jsoncallback"})},getDnsAndIpInfo:function(e,t){t=t||"u.panda.tv";var n={dnsOutIp:e,domain:t};return $.ajax("//ceba.quansucloud.com/wstCeba/dns/dns-test!getDnsOutAndDomainIpInfo.action",{data:n,dataType:"json"})}};e.exports=n},function(e,t,n){"use strict";function r(e,t){var n=[];for(var r in e)n.push(e[r]);return n.sort(function(e,n){return e[t]-n[t]}),n}var i=n(4),a={getQQGroup:function(e){var t=$.Deferred();return i.getData("/ajax_hgetAll_uconfig",{hostid:e}).then(function(e){e&&0===e.errno?(e.data=r(e.data,"opttime"),t.resolve(e)):t.reject(e)}).fail(function(){t.reject(null)}),t.promise()},setQQGroup:function(e){var t=$.Deferred();return i.postData("/ajax_set_qqgroup",{qqname:e.qqname,qqnum:e.qqnum,qqurl:e.qqurl,action:e.action}).then(function(e){e&&0===e.errno?t.resolve(e):t.reject(e)}).fail(function(){t.reject(null)}),t.promise()},delQQGroup:function(e){var t=$.Deferred();return i.postData("/ajax_del_qqgroup",{qqnum:e}).then(function(e){e&&0===e.errno?t.resolve(e):t.reject(e)}).fail(function(){t.reject(null)}),t.promise()}};e.exports=a},function(e,t,n){"use strict";var r=n(4),i={getAddressCode:function(e){var t=$.Deferred();return e=$.extend({},e,{}),r.getData("/cmsconfig/addr_code_config.json",e).then(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.reject(e)}).fail(function(e){t.reject({})}),t.promise()},setAddress:function(e){var t=$.Deferred();return e=$.extend({},e,{}),r.requestAddress("/addr_update",e).then(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.reject(e)}).fail(function(e){t.reject({})}),t.promise()},getAddress:function(e){var t=$.Deferred();return e=$.extend({},e,{}),r.requestAddress("/addr_list",e).then(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.reject(e)}).fail(function(e){t.reject({})}),t.promise()}};e.exports=i},function(e,t,n){n(26),e.exports=n(27)},function(e,t){function n(e,t,n){var i,a=t.data(l);a&&c[a]&&clearTimeout(c[a].timer),a?i=c[a].$tip:(i=$(s).text(n),a="tip_"+$.now()+"_"+ ++f,c[a]={$tip:i},t.data(l,a),i.appendTo(document.body)),i.css(r(e.pageX,e.pageY,i)).fadeIn(100)}function r(e,t,n){var r,i,a={x:5,y:15},o=$(document.body).width(),s=$(document.body).height(),l=n.outerWidth(),u=n.outerHeight();return r=e+l+a.x>o?e-l-a.x:e+a.x,i=t+u+a.y>s?t-u-a.y:t+a.y,{left:r,top:i}}function i(e){var t=e.data(l);if(e.removeData(l),c[t]&&c[t].$tip){clearTimeout(c[t].timer);var n=c[t].$tip;n.fadeOut(100,function(){n.remove()}),c[t]=null,delete c[t]}}function a(e){var t=e.data(l);c[t]&&c[t].$tip&&(clearTimeout(c[t].timer),c[t].timer=setTimeout(function(){i(e)},3e4))}var o=$(document),s='<div class="panda-tip" style="position:absolute;z-index:10000;padding:2px 5px;max-width:120px;font-size:12px;color:#3c3c3c;border:1px solid #d2d2d2;background-color:#fff;box-shadow:1px 1px 3px #b4b4b4;"></div>',l="panda-tip-id",u="data-tips",c={},f=0;o.data("x-tips-init")||(o.data("x-tips-init",!0),o.on("mouseenter","["+u+"]",function(e){var t=$(this);n(e,t,t.attr(u))}).on("mouseleave","["+u+"]",function(){var e=$(this);i(e)}).on("mousemove","["+u+"]",function(){var e=$(this);a(e)}))},function(e,t,n){function r(e,t){if(b=$(e),0!==b.length&&!b.data("initialized"))return b.data("initialized",!0),t=t||{},t=O($.extend(t,b.data())),C.selfInfoInterface.getSelfInfo().then(function(e){var n=k.mixin(t,e);return n.viewName=n.nickName||n.userName||"熊猫直播",u(n),n}).then(function(e){e.isLogin=e.rid>0,e.noSearch||(e.searchHtml=w({ctCls:"header-tool",baseUrl:e.baseUrl}));for(var t=e.tab,n=0;n<t.length;n++)if(t[n].current){e.currentChosen=!0;break}return b.html(_(e)),e.isLogin&&(y(),s(e.exp),i(),a(e.bamboos),o()),c(),e}).then(function(e){e.rid>0?(I=!0,S.initialize($("#follow-item"),$(document.getElementById("header-follow-tip-container")),t),T.initialize($("#watched-item"),$(document.getElementById("header-watched-tip-container")),t)):t.hasOwnProperty("loginAndRegisterCallback")&&E.customLoginAndRegisterCallback(t.loginAndRegisterCallback)})}function i(){C.selfInfoInterface.getMaobi().then(function(e){e.length>9&&(e="99999999+"),$(".dropdown-user-maobi-num").html(e)})}function a(e){e.length>9&&(e="99999999+"),$(".dropdown-user-bamboo-num").html(e)}function o(){C.selfInfoInterface.getRechargeLimit().then(function(e){0==e.errno&&0==e.data&&($(".dropdown-user-pay-btn").addClass("dropdown-property-recharge"),$(".dropdown-user-charge-bag").addClass("charge-show"))})}function s(e){var t=parseInt(100*e.exp/(100*e.max_exp_in_level)*360,10);t>180?(b.find(".circle-left").css("transform","rotate("+(t-180)+"deg)"),b.find(".circle-right").css("transform","rotate(180deg)")):(b.find(".circle-left").css("transform","rotate(0deg)"),b.find(".circle-right").css("transform","rotate("+t+"deg)")),b.find(".icon-level").addClass("icon-level-"+e.level).attr("data-level",e.level);var n=l(e.upgrade_level_need_exp,e.max_exp_in_level);"MAX"===n?b.find(".account-desc").addClass("exp-max").html(n):b.find(".exp-desc").html(n)}function l(e,t){if(t>=D)return"MAX";if(!e)return"";var n="";return n+=e>=1e8?String((Math.ceil(e/1e6)/100).toFixed(2)).replace(/\.?0+$/,"")+"亿":e>=1e4?String((Math.ceil(e/100)/100).toFixed(2)).replace(/\.?0+$/,"")+"万":e}function u(e){function t(t){return e.isHost&&(t.title="我的直播间",t.href="/"+e.roomId,t.checkSigned=!1),e.hasOwnProperty("hostStatus")&&e.hostStatus==A.host.HOST_DISABLE?null:t}var n=e.adv||[];if(!(n.length<=0))for(var r,i=n.length,a=0;a<i;++a)r=n[a],"host"==r.key&&(n[a]=t(r)),r.checkSigned&&(r.className+=" checkSigned")}function c(){b.find(".tool-user-info-login").click(p),b.find(".tool-user-info-regist").click(g),b.find(".header-info-logout").click(m),b.on("click",".checkSigned",function(e){return!!I||(p(),!1)}),x.initSearch(b.find(".panda-search")),R.on("user-bamboo-changed",f),R.on("user-exp-changed",d),R.on("user-maobi-changed",h),R.on("user-info-nickname-updated",v)}function f(e){a(String(e.newValue))}function d(e){s(e.newValue)}function h(e){$(".dropdown-user-maobi-num").html(e.newValue||0)}function p(){return E.login()}function g(){return PANDA_MONITOR.nlog({pae:"open",paew:"index_top_right"}),E.regist()}function m(){return E.logout().then(function(){window.location.reload()})}function v(e){b.find(".header-pic").attr("alt",e),b.find(".header-info-a").attr("title",e),b.find(".dropdown-user-pic").attr("alt",e),b.find(".dropdown-user-name a").text(e)}function y(){return C.selfInfoInterface.getMessageNum().done(function(e){if(e>0){var t="http://message.panda.tv/message.html?__plat="+PDR.__plat;b.find(".dropdown-user-msg").attr("href",t),e=e>99?"99+":e,b.find(".user-new-message-num").html(e).css("display","block")}})}var b,_=n(28),w=n(52),x=n(53),k=n(54).util,E=n(58),S=n(100).follow,T=n(100).watched,A=n(108),R=n(13),I=!1,D=92233720368540,C=n(3),O=n(116);e.exports={init:r}},function(e,t,n){function r(e){return e&&(e.__esModule?e["default"]:e)}var i=n(29);e.exports=(i["default"]||i).template({1:function(e,t,n,r,i){return e.escapeExpression(e.lambda(null!=t?t.baseUrl:t,t))},3:function(e,t,n,r,i){return'                <img src="'+e.escapeExpression(e.lambda(null!=t?t.logo:t,t))+'" />\n'},5:function(e,t,n,r,i){return'                <img src="https://i.h2.pdim.gs/b2a97149ec43dfc95eb177508af29f6c.png" />\n'},7:function(e,t,n,r,i){var a;return null!=(a=n["if"].call(null!=t?t:{},null!=t?t.current:t,{name:"if",hash:{},fn:e.program(8,i,0),inverse:e.program(10,i,0),data:i}))?a:""},8:function(e,t,n,r,i){var a=e.lambda,o=e.escapeExpression;return'                <div id="panda_header_'+o(a(null!=t?t.id:t,t))+'" class="header-tab current-tab">\n                    <a>'+o(a(null!=t?t.title:t,t))+"</a>\n                </div>\n"},10:function(e,t,n,r,i){var a=e.lambda,o=e.escapeExpression;return'                <div id="panda_header_'+o(a(null!=t?t.id:t,t))+'" class="header-tab">\n                    <a href="'+o(a(null!=t?t.href:t,t))+'">'+o(a(null!=t?t.title:t,t))+"</a>\n                </div>\n"},12:function(e,t,n,r,i){var a;return null!=(a=n.each.call(null!=t?t:{},null!=t?t.tab:t,{name:"each",hash:{},fn:e.program(13,i,0),inverse:e.noop,data:i}))?a:""},13:function(e,t,n,r,i){var a;return null!=(a=n["if"].call(null!=t?t:{},null!=t?t.current:t,{name:"if",hash:{},fn:e.program(14,i,0),inverse:e.noop,data:i}))?a:""},14:function(e,t,n,r,i){return'                    <div class="header-tab-hover current_'+e.escapeExpression(e.lambda(null!=t?t.id:t,t))+'"></div>\n'},16:function(e,t,n,r,i){return'                <div class="header-tab-hover current_no"></div>\n'},18:function(e,t,i,a,o){var s,l=null!=t?t:{},u=e.escapeExpression,c=e.lambda;return'            <div class="header-info header-select-icon">\n                <div class="header-info-avt">\n                    <img src="'+u(r(n(48)).call(l,null!=t?t.avatar:t,{name:"convertAvatar",hash:{},data:o}))+'" alt="'+u(c(null!=t?t.viewName:t,t))+'" class="header-pic"/>\n                </div>\n                <div class="header-info-a" title="'+u(c(null!=t?t.viewName:t,t))+'">\n                    <span class="user-new-message-num"></span>\n                </div>\n                <i class="dropdown-arrow"></i>\n                <div class="header-dropdown user-info-dropdown user-info-dropdown-show">\n                <a class="dropdown-user-quit header-info-logout">退出</a>\n                <div class="dropdown-user-manger">\n                  <div class="user-portrait">\n                    <a class="user-portrait-container" href="'+(null!=(s=i["if"].call(l,null!=t?t.baseUrl:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?s:"")+'/personal">\n                        <div class="user-portrait-filp">\n                            <div class="user-portrait-front">\n                                <img src="'+u(r(n(48)).call(l,null!=t?t.avatar:t,{name:"convertAvatar",hash:{},data:o}))+'" alt="'+u(c(null!=t?t.viewName:t,t))+'" class="dropdown-user-pic" />\n                            </div>\n                            <div class="user-portrait-back">\n                                <img src="'+u(r(n(48)).call(l,null!=t?t.avatar:t,{name:"convertAvatar",hash:{},data:o}))+'" alt="'+u(c(null!=t?t.viewName:t,t))+'" class="dropdown-user-pic" />\n                                <div class="user-portrait-cover"></div>\n                                <div class="poritrait-desc">\n                                <p class="account-desc">升级还需 <span class="exp-desc"></span> 经验 </p>\n                                </div>\n                            </div>\n                        </div>\n                    </a>\n                    <div class="dropdown-level-cycle">\n                        <div class="user-portrait-frame"></div>\n                        <span class="circle-left-wrap">\n                            <span class="circle-left"></span>\n                        </span>\n                        <span class="circle-right-wrap">\n                            <span class="circle-right"></span>\n                        </span>\n                    </div>\n                </div>\n                    <div class="dropdown-user-name">\n                        <a href="'+(null!=(s=i["if"].call(l,null!=t?t.baseUrl:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?s:"")+'/personal" target="_blank">'+u(c(null!=t?t.viewName:t,t))+"</a>\n"+(null!=(s=i["if"].call(l,null!=t?t.isHost:t,{name:"if",hash:{},fn:e.program(19,o,0),inverse:e.noop,data:o}))?s:"")+'                    </div>\n                    <div class="dropdown-user-info">\n                        <i class="icon-level" data-level=""></i>\n                        <a href="http://message.panda.tv?__plat='+u(r(n(50)).call(l,{name:"getPlatform",hash:{},data:o}))+'" class="dropdown-user-item dropdown-user-msg" target="_blank">\n                            <i class="dropdown-icon user-msg-icon"></i>\n                            <span class="user-msg-txt">消息</span>\n                            <span class="user-new-message-num"></span>\n                        </a>\n                        <a href="'+(null!=(s=i["if"].call(l,null!=t?t.baseUrl:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?s:"")+'/watchhistory" class="dropdown-user-item dropdown-user-history" target="_blank">\n                            <i class="dropdown-icon user-history-icon"></i>\n                             历史\n                        </a>\n                    </div>\n                    <div class="dropdown-user-con">\n                        <a href="'+(null!=(s=i["if"].call(l,null!=t?t.baseUrl:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?s:"")+'/personal" target="_blank">我的资料</a>\n'+(null!=(s=i["if"].call(l,null!=t?t.isHost:t,{name:"if",hash:{},fn:e.program(24,o,0),inverse:e.noop,data:o}))?s:"")+(null!=(s=i["if"].call(l,null!=t?t.roomId:t,{name:"if",hash:{},fn:e.program(26,o,0),inverse:e.noop,data:o}))?s:"")+'                    </div>\n                </div>\n                    <div class="dropdown-user-property clearfix">\n                        <div class="dropdown-property-item dropdown-user-bamboo">\n                            <div class="dropdown-user-bamboo-num">\n                            </div>\n                            <div class="user-info-account">\n                              <i class="dropdown-icon dropdown-icon-bamboo"></i>\n                              <span>\n                                <span class="user-property-desc">竹子</span>\n                              </span>\n                            </div>\n                        </div>\n\n                        <div class="dropdown-property-item dropdown-user-maobi">\n                            <div class="dropdown-user-maobi-num">\n\n                            </div>\n                            <div class="user-info-account">\n                              <i class="dropdown-icon dropdown-icon-maobi"></i>\n                              <span>\n                               <span>猫币</span>\n                              </span>\n                            </div>\n                        </div>\n                        <div class="dropdown-property-item dropdown-user-pay">\n                            <a href="https://pay.panda.tv?__plat='+u(r(n(50)).call(l,{name:"getPlatform",hash:{},data:o}))+'" class="dropdown-user-pay-btn" target="_blank">\n                                充值\n                            </a>\n                            <span class="dropdown-user-charge-bag">首充礼包</span>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            <div id="follow-item" class="header-tool header-select-icon header-collection-icon">\n                <a class="concert-recode header-follow-btn" href="javascript:;">\n                    <i class="header-icon icon-follow"></i>\n                </a>\n                <div id="header-follow-tip-container" class="tip-list-container"></div>\n            </div>\n'},19:function(e,t,i,a,o){var s;return null!=(s=r(n(51)).call(null!=t?t:{},null!=(s=null!=t?t.hostLevel:t)?s.vip:s,"==",1,{name:"ifcond",hash:{},fn:e.program(20,o,0),inverse:e.program(22,o,0),data:o}))?s:""},20:function(e,t,n,r,i){return'                            <i class="icon-host-level icon-host-level-vip"></i>\n'},22:function(e,t,n,r,i){var a,o=e.lambda,s=e.escapeExpression;return'                            <i class="icon-host-level icon-host-level-'+s(o(null!=(a=null!=t?t.hostLevel:t)?a.c_lv:a,t))+'" data-level="'+s(o(null!=(a=null!=t?t.hostLevel:t)?a.c_lv:a,t))+'"></i>\n'},24:function(e,t,n,r,i){var a;return'                        <a href="'+(null!=(a=n["if"].call(null!=t?t:{},null!=t?t.baseUrl:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+"/setting?roomid="+e.escapeExpression(e.lambda(null!=t?t.roomId:t,t))+'" target="_blank">直播设置</a>\n'},26:function(e,t,n,r,i){var a;return'                        <a href="'+(null!=(a=n["if"].call(null!=t?t:{},null!=t?t.baseUrl:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+"/"+e.escapeExpression(e.lambda(null!=t?t.roomId:t,t))+'" class="dropdown-user-con-item-last" target="_blank">我的直播间</a>\n'},28:function(e,t,i,a,o){var s;return null!=(s=r(n(51)).call(null!=t?t:{},null!=t?t.noUserCtrl:t,"!=",!0,{name:"ifcond",hash:{},fn:e.program(29,o,0),inverse:e.noop,data:o}))?s:""},29:function(e,t,n,r,i){return'            <div class="header-tool-user-info">\n                <a class="tool-user-info-login header-login-btn" href="javascript:;">登录</a>\n                <b>|</b>\n                <a class="tool-user-info-regist header-register-btn" href="javascript:;">注册</a>\n            </div>\n'},31:function(e,t,n,r,i){var a;return'        <div class="header-tool header-download">\n            <a class="header-download-inner header-download-btn" href="'+(null!=(a=n["if"].call(null!=t?t:{},null!=t?t.baseUrl:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+'/client.html" target="_blank">\n                <i class="header-icon icon-download"></i>\n                <span class="header-download-text">下载</span>\n            </a>\n        </div>\n'},33:function(e,t,n,r,i){var a=e.lambda,o=e.escapeExpression;return'        <div class="header-adv-container">\n            <a href="'+o(a(null!=t?t.href:t,t))+'" class="'+o(a(null!=t?t.className:t,t))+'" target="_blank">\n                <i class="header-icon '+o(a(null!=t?t.iconClassName:t,t))+'"></i>\n                '+o(a(null!=t?t.title:t,t))+"\n            </a>\n        </div>\n"},35:function(e,t,n,r,i){var a;return"          "+(null!=(a=e.lambda(null!=t?t.searchHtml:t,t))?a:"")+"\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,a,o){var s,l=null!=t?t:{};return'<div class="panda-header-container clearfix">\n    <div class="panda-header">\n        <div class="header-logo">\n          <a href="'+(null!=(s=i["if"].call(l,null!=t?t.baseUrl:t,{name:"if",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?s:"")+'/">\n'+(null!=(s=i["if"].call(l,null!=t?t.logo:t,{name:"if",hash:{},fn:e.program(3,o,0),inverse:e.program(5,o,0),data:o}))?s:"")+'          </a>\n        </div>\n        <div class="header-tab-container clearfix">\n'+(null!=(s=i.each.call(l,null!=t?t.tab:t,{name:"each",hash:{},fn:e.program(7,o,0),inverse:e.noop,data:o}))?s:"")+(null!=(s=i["if"].call(l,null!=t?t.currentChosen:t,{name:"if",hash:{},fn:e.program(12,o,0),inverse:e.program(16,o,0),data:o}))?s:"")+"        </div>\n"+(null!=(s=i["if"].call(l,null!=t?t.isLogin:t,{name:"if",hash:{},fn:e.program(18,o,0),inverse:e.program(28,o,0),data:o}))?s:"")+(null!=(s=r(n(51)).call(l,null!=t?t.noDownload:t,"!=",!0,{name:"ifcond",hash:{},fn:e.program(31,o,0),inverse:e.noop,data:o}))?s:"")+(null!=(s=i.blockHelperMissing.call(t,e.lambda(null!=t?t.adv:t,t),{name:"adv",hash:{},fn:e.program(33,o,0),inverse:e.noop,data:o}))?s:"")+(null!=(s=r(n(51)).call(l,null!=t?t.noSearch:t,"!=",!0,{name:"ifcond",hash:{},fn:e.program(35,o,0),inverse:e.noop,data:o}))?s:"")+"    </div>\n</div>\n"},useData:!0})},function(e,t,n){e.exports=n(30)["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(){var e=new s.HandlebarsEnvironment;return h.extend(e,s),e.SafeString=u["default"],e.Exception=f["default"],e.Utils=h,e.escapeExpression=h.escapeExpression,e.VM=g,e.template=function(t){return g.template(t,e)},e}t.__esModule=!0;var o=n(31),s=i(o),l=n(45),u=r(l),c=n(33),f=r(c),d=n(32),h=i(d),p=n(46),g=i(p),m=n(47),v=r(m),y=a();y.create=a,v["default"](y),y["default"]=y,t["default"]=y,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){this.helpers=e||{},this.partials=t||{},this.decorators=n||{},l.registerDefaultHelpers(this),u.registerDefaultDecorators(this)}t.__esModule=!0,t.HandlebarsEnvironment=i;var a=n(32),o=n(33),s=r(o),l=n(34),u=n(42),c=n(44),f=r(c),d="4.0.5";t.VERSION=d;var h=7;t.COMPILER_REVISION=h;var p={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=p;var g="[object Object]";i.prototype={constructor:i,logger:f["default"],log:f["default"].log,registerHelper:function(e,t){if(a.toString.call(e)===g){if(t)throw new s["default"]("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(a.toString.call(e)===g)a.extend(this.partials,e);else{if("undefined"==typeof t)throw new s["default"]('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(a.toString.call(e)===g){if(t)throw new s["default"]("Arg not supported with multiple decorators");a.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var m=f["default"].log;t.log=m,t.createFrame=a.createFrame,t.logger=f["default"]},function(e,t){"use strict";function n(e){return c[e]}function r(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);return e}function i(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}function a(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return d.test(e)?e.replace(f,n):e}function o(e){return!e&&0!==e||!(!g(e)||0!==e.length)}function s(e){var t=r({},e);return t._parent=e,t}function l(e,t){return e.path=t,e}function u(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=r,t.indexOf=i,t.escapeExpression=a,t.isEmpty=o,t.createFrame=s,t.blockParams=l,t.appendContextPath=u;var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},f=/[&<>"'`=]/g,d=/[&<>"'`=]/,h=Object.prototype.toString;t.toString=h;var p=function(e){return"function"==typeof e};p(/x/)&&(t.isFunction=p=function(e){return"function"==typeof e&&"[object Function]"===h.call(e)}),t.isFunction=p;var g=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===h.call(e)};t.isArray=g},function(e,t){"use strict";function n(e,t){var i=t&&t.loc,a=void 0,o=void 0;i&&(a=i.start.line,o=i.start.column,e+=" - "+a+":"+o);for(var s=Error.prototype.constructor.call(this,e),l=0;l<r.length;l++)this[r[l]]=s[r[l]];Error.captureStackTrace&&Error.captureStackTrace(this,n),i&&(this.lineNumber=a,this.column=o)}t.__esModule=!0;var r=["description","fileName","lineNumber","message","name","number","stack"];n.prototype=new Error,t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){o["default"](e),l["default"](e),c["default"](e),d["default"](e),p["default"](e),m["default"](e),y["default"](e)}t.__esModule=!0,t.registerDefaultHelpers=i;var a=n(35),o=r(a),s=n(36),l=r(s),u=n(37),c=r(u),f=n(38),d=r(f),h=n(39),p=r(h),g=n(40),m=r(g),v=n(41),y=r(v)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(32);t["default"]=function(e){e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,a=n.fn;if(t===!0)return a(this);if(t===!1||null==t)return i(this);if(r.isArray(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var o=r.createFrame(n.data);o.contextPath=r.appendContextPath(n.data.contextPath,n.name),n={data:o}}return a(t,n)})},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(32),a=n(33),o=r(a);t["default"]=function(e){e.registerHelper("each",function(e,t){function n(t,n,a){u&&(u.key=t,u.index=n,u.first=0===n,u.last=!!a,c&&(u.contextPath=c+t)),l+=r(e[t],{data:u,blockParams:i.blockParams([e[t],t],[c+t,null])})}if(!t)throw new o["default"]("Must pass iterator to #each");var r=t.fn,a=t.inverse,s=0,l="",u=void 0,c=void 0;if(t.data&&t.ids&&(c=i.appendContextPath(t.data.contextPath,t.ids[0])+"."),i.isFunction(e)&&(e=e.call(this)),t.data&&(u=i.createFrame(t.data)),e&&"object"==typeof e)if(i.isArray(e))for(var f=e.length;s<f;s++)s in e&&n(s,s,s===e.length-1);else{var d=void 0;for(var h in e)e.hasOwnProperty(h)&&(void 0!==d&&n(d,s-1),d=h,s++);void 0!==d&&n(d,s-1,!0)}return 0===s&&(l=a(this)),l})},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var i=n(33),a=r(i);t["default"]=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a["default"]('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r=n(32);t["default"]=function(e){e.registerHelper("if",function(e,t){return r.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||r.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("log",function(){for(var t=[void 0],n=arguments[arguments.length-1],r=0;r<arguments.length-1;r++)t.push(arguments[r]);
var i=1;null!=n.hash.level?i=n.hash.level:n.data&&null!=n.data.level&&(i=n.data.level),t[0]=i,e.log.apply(e,t)})},e.exports=t["default"]},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r=n(32);t["default"]=function(e){e.registerHelper("with",function(e,t){r.isFunction(e)&&(e=e.call(this));var n=t.fn;if(r.isEmpty(e))return t.inverse(this);var i=t.data;return t.data&&t.ids&&(i=r.createFrame(t.data),i.contextPath=r.appendContextPath(t.data.contextPath,t.ids[0])),n(e,{data:i,blockParams:r.blockParams([e],[i&&i.contextPath])})})},e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){o["default"](e)}t.__esModule=!0,t.registerDefaultDecorators=i;var a=n(43),o=r(a)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(32);t["default"]=function(e){e.registerDecorator("inline",function(e,t,n,i){var a=e;return t.partials||(t.partials={},a=function(i,a){var o=n.partials;n.partials=r.extend({},o,t.partials);var s=e(i,a);return n.partials=o,s}),t.partials[i.args[0]]=i.fn,a})},e.exports=t["default"]},function(e,t,n){"use strict";t.__esModule=!0;var r=n(32),i={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=r.indexOf(i.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=i.lookupLevel(e),"undefined"!=typeof console&&i.lookupLevel(i.level)<=e){var t=i.methodMap[e];console[t]||(t="log");for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];console[t].apply(console,r)}}};t["default"]=i,e.exports=t["default"]},function(e,t){"use strict";function n(e){this.string=e}t.__esModule=!0,n.prototype.toString=n.prototype.toHTML=function(){return""+this.string},t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function a(e){var t=e&&e[0]||1,n=v.COMPILER_REVISION;if(t!==n){if(t<n){var r=v.REVISION_CHANGES[n],i=v.REVISION_CHANGES[t];throw new m["default"]("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+r+") or downgrade your runtime to an older version ("+i+").")}throw new m["default"]("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){function n(n,r,i){i.hash&&(r=p.extend({},r,i.hash),i.ids&&(i.ids[0]=!0)),n=t.VM.resolvePartial.call(this,n,r,i);var a=t.VM.invokePartial.call(this,n,r,i);if(null==a&&t.compile&&(i.partials[i.name]=t.compile(n,e.compilerOptions,t),a=i.partials[i.name](r,i)),null!=a){if(i.indent){for(var o=a.split("\n"),s=0,l=o.length;s<l&&(o[s]||s+1!==l);s++)o[s]=i.indent+o[s];a=o.join("\n")}return a}throw new m["default"]("The partial "+i.name+" could not be compiled when running in runtime-only mode")}function r(t){function n(t){return""+e.main(i,t,i.helpers,i.partials,o,l,s)}var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=a.data;r._setup(a),!a.partial&&e.useData&&(o=f(t,o));var s=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(s=a.depths?t!==a.depths[0]?[t].concat(a.depths):a.depths:[t]),(n=d(e.main,n,i,a.depths||[],o,l))(t,a)}if(!t)throw new m["default"]("No environment passed to template");if(!e||!e.main)throw new m["default"]("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var i={strict:function(e,t){if(!(t in e))throw new m["default"]('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var n=e.length,r=0;r<n;r++)if(e[r]&&null!=e[r][t])return e[r][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:p.escapeExpression,invokePartial:n,fn:function(t){var n=e[t];return n.decorator=e[t+"_d"],n},programs:[],program:function(e,t,n,r,i){var a=this.programs[e],o=this.fn(e);return t||i||r||n?a=s(this,e,o,t,n,r,i):a||(a=this.programs[e]=s(this,e,o)),a},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=p.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials,i.decorators=n.decorators):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)),(e.usePartial||e.useDecorators)&&(i.decorators=i.merge(n.decorators,t.decorators)))},r._child=function(t,n,r,a){if(e.useBlockParams&&!r)throw new m["default"]("must pass block params");if(e.useDepths&&!a)throw new m["default"]("must pass parent depths");return s(i,t,e[t],n,0,r,a)},r}function s(e,t,n,r,i,a,o){function s(t){var i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=o;return o&&t!==o[0]&&(s=[t].concat(o)),n(e,t,e.helpers,e.partials,i.data||r,a&&[i.blockParams].concat(a),s)}return s=d(n,s,e,o,r,a),s.program=t,s.depth=o?o.length:0,s.blockParams=i||0,s}function l(e,t,n){return e?e.call||n.name||(n.name=e,e=n.partials[e]):e="@partial-block"===n.name?n.data["partial-block"]:n.partials[n.name],e}function u(e,t,n){n.partial=!0,n.ids&&(n.data.contextPath=n.ids[0]||n.data.contextPath);var r=void 0;if(n.fn&&n.fn!==c&&(n.data=v.createFrame(n.data),r=n.data["partial-block"]=n.fn,r.partials&&(n.partials=p.extend({},n.partials,r.partials))),void 0===e&&r&&(e=r),void 0===e)throw new m["default"]("The partial "+n.name+" could not be found");if(e instanceof Function)return e(t,n)}function c(){return""}function f(e,t){return t&&"root"in t||(t=t?v.createFrame(t):{},t.root=e),t}function d(e,t,n,r,i,a){if(e.decorator){var o={};t=e.decorator(t,o,n,r&&r[0],i,a,r),p.extend(t,o)}return t}t.__esModule=!0,t.checkRevision=a,t.template=o,t.wrapProgram=s,t.resolvePartial=l,t.invokePartial=u,t.noop=c;var h=n(32),p=i(h),g=n(33),m=r(g),v=n(31)},function(e,t){(function(n){"use strict";t.__esModule=!0,t["default"]=function(e){var t="undefined"!=typeof n?n:window,r=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=r),e}},e.exports=t["default"]}).call(t,function(){return this}())},function(e,t,n){"use strict";var r="https://i.h2.pdim.gs/ae367bf95661b4723ba68069955e06c2.jpg",i=n(49),a=window.PDR&&PDR.getStaticSslUrl?PDR.getStaticSslUrl:function(e){return PDR.ssl&&e?e.replace(/^http:\/\/(i|s)([0-9])\.pdim\.gs/,function(e,t,n){return"i"===t?n>4?"https://i.h2.pdim.gs":"https://p.ssl.qhimg.com":"https://s.h2.pdim.gs"}):e},o=window.PDR&&PDR.parseUrl?function(e){var t=PDR.parseUrl(e);return t.path="/dmfd/200_200_100"+("/"===t.path[0]?t.path:"/"+t.path),PDR.formatUrl(t)}:function(e){var t=document.createElement("a");return t.href=e,t.protocol+"//"+t.hostname+"/dmfd/200_200_100"+("/"===t.pathname[0]?t.pathname:"/"+t.pathname)};e.exports=function(e){return e=e||r,e.indexOf("/dmfd/")===-1&&("http://i3.pdim.gs/t01d6c1f188a949e62f.jpg"===e&&(e=r),e=o(e)),e=a(e),e=i(e)}},function(e,t){"use strict";function n(e){var t=/^(https?:\/\/i[5-9]?\.((h2|ssl)\.)?pdim.gs\/[^.]*)\.(jpg|jpeg|png)$/i;return e.replace(t,"$1.webp")}e.exports=function(e){return PDR.isSupportWebp&&e?n(e):e}},function(e,t){e.exports=function(){return PDR.__plat}},function(e,t){e.exports=function(e,t,n,r){switch(t){case"==":return e==n?r.fn(this):r.inverse(this);case"!=":return e!=n?r.fn(this):r.inverse(this);case"===":return e===n?r.fn(this):r.inverse(this);case"!==":return e!==n?r.fn(this):r.inverse(this);case"<":return e<n?r.fn(this):r.inverse(this);case">":return e>n?r.fn(this):r.inverse(this);case">=":return e>=n?r.fn(this):r.inverse(this);case"<=":return e<=n?r.fn(this):r.inverse(this);case"&&":return e&&n?r.fn(this):r.inverse(this);case"||":return e||n?r.fn(this):r.inverse(this);default:return r.inverse(this)}}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({1:function(e,t,n,r,i){var a;return e.escapeExpression((a=null!=(a=n.baseUrl||(null!=t?t.baseUrl:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"baseUrl",hash:{},data:i}):a))},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a,o,s=null!=t?t:{};return'<div class="panda-search '+e.escapeExpression((o=null!=(o=n.ctCls||(null!=t?t.ctCls:t))?o:n.helperMissing,"function"==typeof o?o.call(s,{name:"ctCls",hash:{},data:i}):o))+'">\r\n  <form name="room-search" action="'+(null!=(a=n["if"].call(s,null!=t?t.baseUrl:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+'/search" method="get" target="_top" class="search-form">\r\n    <input type="text" name="kw" value="搜游戏/主播" autocomplete="off" class="search-key search-default">\r\n    <div class="search-submit-btn">\r\n      <input type="submit" class="search-submit">\r\n    </div>\r\n  </form>\r\n</div>'},useData:!0})},function(e,t,n){"use strict";function r(e,t){a=$(e),a.data("initialized")||(a.data("initialized",!0),0==a.find(".panda-search").length&&a.html(o($.extend({},t))),i(a.find(".panda-search")))}function i(e){var t=$(e),n=t.find(".search-key");t.find(".search-form").submit(function(e){var t=n.val();return t=$.trim(t),!(!t||"搜游戏/主播"==t)&&void n.val(t.substring(0,15))}),n.focus(function(){var e=n.val();e=$.trim(e),"搜游戏/主播"==e&&n.val(""),n.removeClass("search-default")}).blur(function(){var e=n.val();e=$.trim(e),e||n.addClass("search-default").val("搜游戏/主播")})}var a,o=n(52);e.exports={init:r,initSearch:i}},function(e,t,n){e.exports.define=n(55),e.exports.dispatcher=n(57),e.exports.util=n(56)},function(e,t,n){function r(e,t){var n,r=function(){},o=t.prototype;r.prototype=o,n=e.prototype=new r,n.constructor=e,$.each(Array.prototype.slice.apply(arguments,[2]),function(t,n){"function"==typeof n&&(n=n.prototype),i.mixin(e.prototype,n)}),n.superclass=a(o)}var i=n(56),a=function(e){var t=function(){var e=(t.caller||{}).name,n=arguments.length,r=this,i=arguments.callee.superclass;if(!e)for(var a in r)if(r[a]==t.caller){e=a;break}if(n>0&&e){var o=Array.prototype.slice.call(arguments,0);return Array.prototype.splice.apply(o,[0,1]),i[e](o)}return i};return t.superclass=e,t};e.exports=function(){var e=arguments.length,t=arguments[0],n=arguments[e-1],i="function"==typeof n.initialize?n.initialize:function(){t.apply&&t.apply(this,arguments)};if(e>1){var a=[i,t].concat(Array.prototype.slice.call(arguments).slice(1,e-1),n);r.apply(null,a)}else i.prototype=n,i.prototype.constructor=i;return i}},function(e,t){function n(e){return['"',+e,'"'].join("")}function r(e){var t,n,r,i=["["],a=e.length;for(n=0;n<a;n++)switch(r=e[n],typeof r){case"undefined":case"function":case"unknown":break;default:t&&i.push(","),i.push(l.jsonEncode(r)),t=1}return i.push("]"),i.join("")}function i(e){return/["\\\x00-\x1f]/.test(e)&&(e=e.replace(/["\\\x00-\x1f]/g,function(e){var t=s[e];return t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})),['"',e,'"'].join("")}var a=this,o=0,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l=e.exports={mixin:function(e,t){if(e=e||{},t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}var i="function"==typeof window.Event&&t instanceof window.Event;!i&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},bind:function(e,t){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var r=n.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,r)}},bindAsEventListener:function(e,t){return function(n){return e.call(t,n||window.event)}},createUniqueID:function(e){return e=null===e||void 0===e?"pc_game_":e.replace(/\./g,"_"),e+o++},g:function(e){var e="[object String]"==Object.prototype.toString.call(e)?document.getElementById(e):!(!e||"object"!=typeof e)&&e;return e||null},jsonEncode:function(e){switch(typeof e){case"undefined":return'""';case"number":return['"',e,'"'].join("");case"string":return i(e);case"boolean":return['"',e,'"'].join("");default:if(null===e)return'""';if(e instanceof Array)return r(e);if(e instanceof Date)return n(e);var t,a,o=["{"];for(var s in e)if(e.hasOwnProperty(s))switch(a=e[s],typeof a){case"undefined":case"unknown":case"function":break;default:t&&o.push(","),t=1,o.push(l.jsonEncode(s)+":"+l.jsonEncode(a))}return o.push("}"),o.join("")}},trim:function(e){return e=String(e),e.trim?e.trim():e.replace(new RegExp("(^[\\s\\t\\xa0\\u3000]+)|([\\u3000\\xa0\\s\\t]+$)","g"),"")},camelCase:function(e){return e=l.trim(e),1!==e.length&&/[_.\- ]+/.test(e)?e.replace(/^[_.\- ]+/,"").replace(/[_.\- ]+(\w|$)/g,function(e,t){return t.toUpperCase()}):e},getTime:function(e,t){var n=new Date(1e3*e),r=new Date,i=n.getUTCFullYear(),a=r.getUTCFullYear(),o=n.getUTCMonth()+1,s=r.getUTCMonth()+1,l=n.getDate(),u=r.getDate(),c=n.getHours(),f=n.getMinutes(),d=n.getSeconds(),h=!(i==a&&o==s&&l==u)||t,p=i+"-"+(o<10?"0"+o:o)+"-"+(l<10?"0"+l:l)+" "+(c<10?"0"+c:c)+":"+(f<10?"0"+f:f)+":"+(d<10?"0"+d:d),g=(c<10?"0"+c:c)+":"+(f<10?"0"+f:f)+":"+(d<10?"0"+d:d);return h?p:g},insert2TextArea:function(e,t){if(document.selection){e.focus();var n=document.selection.createRange();n.txt=t,e.focus()}else if(e.selectionStart||"0"==e.selectionStart){var r=e.selectionStart,i=e.selectionEnd,a=e.scrollTop;e.value=e.value.substring(0,r)+t+e.value.substring(i,e.value.length),e.focus(),e.selectionStart=r+t.length,e.selectionEnd=r+t.length,e.scrollTop=a}else e.value+=t,e.focus()},encodeHtml:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")},decodeHtml:function(e){return String(e).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},requestAnimation:function(){var e=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(e,t){a.setTimeout(e,16)};return function(t,n){e.apply(a,[t,n])}}()}},function(e,t,n){var r=n(55),i=n(56),a={observers:null,element:function(e){return e.target||e.srcElement},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},on:function(e,t,n,r){var o=t.split(" "),s=o.length,l=s;if(0==s)return!1;var u=i.g(e),c=a;if(r=r||!1,c.observers||(c.observers={}),!u._eventCacheID){var f="eventCacheID_";u.id&&(f=u.id+"_"+f),u._eventCacheID=i.createUniqueID(f)}for(;l--;)c._on(u,o[l],n,r);return u},_on:function(e,t,n,r){var i=e._eventCacheID,o=a;o.observers[i]||(o.observers[i]=[]),o.observers[i].push({element:e,name:t,observer:n,useCapture:r}),e.addEventListener?e.addEventListener(t,n,r):e.attachEvent&&e.attachEvent("on"+t,n)},stopObservingElement:function(e){var t=i.g(e),n=t._eventCacheID;this._removeElementObservers(o.event.observers[n])},stopEventObserver:function(e,t){var n=i.g(e)._eventCacheID,r=a,o=r.observers[n];if(o)for(var s=o.length;s--;){var l=o[s];if(t==l.name){var u=new Array(l.element,l.name,l.observer,l.useCapture);r.un.apply(this,u)}}},_removeElementObservers:function(e){if(e)for(var t=e.length;t--;){var n=e[t],r=new Array(n.element,n.name,n.observer,n.useCapture);a.un.apply(this,r)}},un:function(e,t,n,r){var o=t.split(" "),s=o.length,l=s;if(0==s)return!1;var u=i.g(e),c=u._eventCacheID,f=!1;for(r=r||!1;l--;)f=a._un(u,o[l],n,r,c);return f},_un:function(e,t,n,r,i){"keypress"==t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||e.detachEvent)&&(t="keydown");var o=!1,s=a.observers[i];if(s)for(var l=0;!o&&l<s.length;){var u=s[l];if(u.name==t&&u.observer==n&&u.useCapture==r){s.splice(l,1),0==s.length&&(a.observers[i]=null),o=!0;break}l++}return o&&(e.removeEventListener?e.removeEventListener(t,n,r):e&&e.detachEvent&&e.detachEvent("on"+t,n)),o},unloadCache:function(){if(a&&a.observers){for(var e in a.observers){var t=a.observers[e];a._removeElementObservers.apply(this,[t])}a.observers=!1}}};e.exports=r({BROWSER_EVENTS:["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown"],listeners:null,obj:null,initialize:function(e,t){i.mixin(this,t),this.obj=e,this.listeners={},null!=this.el&&(this.fallThrough=this.fallThrough||!1,this.attachToElement())},attachToElement:function(){this.el?a.stopObservingElement(this.el):this.eventHandler=i.bindAsEventListener(this.handleBrowserEvent,this);for(var e=0,t=this.BROWSER_EVENTS.length;e<t;e++)a.on(this.BROWSER_EVENTS[e],this.eventHandler);a.on("dragstart",a.stop)},handleBrowserEvent:function(e){var t=e.type,n=this.listeners[t];if(n&&0!=n.length){var r=e.touches;if(r&&r[0]){for(var i,a=0,o=0,s=r.length,l=0;l<s;++l)i=r[l],a+=i.clientX,o+=i.clientY;e.clientX=a/s,e.clientY=o/s}this.triggerEvent(t,e)}},destroy:function(){this.listeners=null,this.obj=null,this.fallThrough=null},on:function(e,t,n){if(null!=t){null!=n&&void 0!=n||(n=this.obj);var r=this.listeners[e];r||(r=[],this.listeners[e]=r);var i={obj:n,func:t};r.push(i)}},un:function(e,t,n){null==n&&(n=this.obj);var r=this.listeners[e];if(null!=r)for(var i=0,a=r.length;i<a;i++)if(r[i].obj==n&&r[i].func==t){r.splice(i,1);break}},triggerEvent:function(e,t){var n=this.listeners[e];if(n&&0!=n.length){null==t&&(t={}),t.obj=this.obj,t.el=this.el,t.type||(t.type=e),n=n.slice();for(var r,i=0,o=n.length;i<o;i++){var s=n[i];if(r=s.func.apply(s.obj,[t]),r===!1)break}return this.fallThrough||a.stop(t),r}},remove:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])},register:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.on(t,e[t],e.scope)},unregister:function(e){for(var t in e)"scope"!=t&&e.hasOwnProperty(t)&&this.un(t,e[t],e.scope)}})},function(e,t,n){"use strict";n(59),n(91),n(92),window.PDR.ruc=Ruc;var r,i=n(13),a=n(97);if(Ruc.ob=i,"dev"===PDR.env){var o=PDR.getOrigin();Ruc.config.setConfig("host",{info:o})}"dev"==PDR.env&&Ruc.config.setConfig("host",{info:window.location.origin}),r=PDR.parseUrl("?",window.location.href),r&&"1"===r.firstlog&&a.init(),e.exports=Ruc},function(e,t,n){"use strict";function r(e){var t=u.ins();t.on("notice-1",i),s=$('<div class="panda-live-notify"></div>'),$("body").append(s)}function i(e){var t=e.data;if(t&&t.type&&701==t.type&&t.data&&t.data.from){var n=t.data.from;if(h==n.roomid)return;if(f[n.roomid])return;f[n.roomid]=!0,setTimeout(function(){f[n.roomid]=!1},6e5),d.push(n),a()}}function a(){if(d.length>0&&0===s.find(".panda-live-notify-item").length){var e=d.shift(),t="/";"pc_lobby"==PDR.__plat?t="/":PDR.host&&(t=PDR.getProtocol()+"//"+PDR.host+"/");var n=$(c({roomUrl:t+e.roomid,nickName:e.nickName}));s.append(n),n.animate({top:0},{duration:400}).on("click",".panda-live-notify-close",function(e){e.preventDefault(),o(n,a)}),n.fadeOutTimer=setTimeout(function(){o(n,a)},5e3)}}function o(e,t){clearTimeout(e.fadeOutTimer),e.fadeOutTimer=null,e.fadeOut(300,function(){e.remove(),t&&t()})}var s,l=n(3),u=n(60),c=n(90),f={},d=[],h=PDR.getRoomId();window._config_framepage!==!0&&$(function(){setTimeout(function(){l.selfInfoInterface.getSelfInfo(h).done(function(e){e&&e.rid>0&&r()})},1e4)})},function(e,t,n){"use strict";function r(){return"pandapusher_"+$.now()+"_"+ ++d}function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}function a(e){this.options=$.extend({},e),this._init(),this.ob=new l({})}var o,s=n(61),l=n(14),u=n(66),c=n(68),f={app:"1",resource:u.getWukongSwfUrl(),width:1,height:1},d=0;a.prototype._init=function(){var e=this;if(window.SMSdk&&"function"==typeof window.SMSdk.ready){var t=!1,n=setTimeout(function(){t||(t=!0,e._initWsConnect())},1e4);window.SMSdk.ready(function(){t||(t=!0,clearTimeout(n),e._initWsConnect())})}else e._initWsConnect()},a.prototype._initWsConnect=function(){var e=this;if(PDR.isSupportWebSocket){window.dcodeIO=window.dcodeIO||{},window.dcodeIO.Long||(window.dcodeIO.Long=n(69)),window.dcodeIO.ByteBuffer||(window.dcodeIO.ByteBuffer=n(72)),window.pako||(window.pako=n(73));var t=n(89),a=new t({debug:PDR.debug?1:2,caller:"panda-"+PDR.__plat});a.on("message",function(t){t&&"NOTICE"===t.type&&t.body&&e._onMessage({type:t.body.type,from:"ws",errno:0,data:t.body.body||t.body.data||""})})}else this.id=r(),this.$el=$('<div id="'+this.id+'" style="position: absolute; top: -9999px; left: -9999px; width: 1px; height: 1px;"><div id="'+this.id+'_swf"></div></div>'),$(document.body).append(this.$el),s(this.id+"_swf").render($.extend({},f,{cdid:i(),infoUrl:PDR.getProtocol()+"//wukong.gate.panda.tv/getinfo"})).done(function(t){e.flashRequest=t,e._initFlashEvents(),e.trigger("swfready",t)})},a.prototype._initFlashEvents=function(){var e=this;this.flashRequest.registerApi(["flash.onMessage"]),this.flashRequest.flashOnMessage(function(t){if(t&&0===t.errno){var n=t.data;if(n&&"NOTICE"===n.type&&n.body)try{e._onMessage({type:n.body.type,from:"flash",errno:0,data:(n.body.body?JSON.parse(c.decode(n.body.body)):n.body.data)||""})}catch(r){}}})},a.prototype._onMessage=function(e){this.trigger("notice-"+e.type,e)},a.prototype.on=function(e,t){this.ob.on.apply(this.ob,arguments)},a.prototype.off=function(e,t){this.ob.off.apply(this.ob,arguments)},a.prototype.trigger=function(e){this.ob.emit.apply(this.ob,arguments)},a.ins=function(e){return o||(o=new a(e)),o},e.exports=a},function(module,exports,__webpack_require__){"use strict";window.JSON&&window.JSON.stringify||__webpack_require__(62);var util=__webpack_require__(54).util,swfember=__webpack_require__(63),flashCallbacks={},requestInstances={},idSeed=1,dispatch={onSync:function(id,result){var handler,data;if("string"===$.type(result))try{data=eval("("+result+")")}catch(err){data=result}else data=result;id=id||data&&data.id,handler=flashCallbacks[id],handler&&"function"===$.type(handler)&&handler(data)},onStatus:function(){}};window.__FLASH__dispatch=dispatch;var AsyncRequest=function(e,t){this.swfId=e,this.requestMethod=t};AsyncRequest.prototype={render:function(e,t){var n=this,r=$.Deferred();return dispatch["on"+n.swfId.replace(/[^A-Za-z0-9]/g,"")+"Ready"]=function(){n.getSwf().__asyncRequest__=n,r.resolve(n)},swfember.embedSWF(n.swfId,e||{},t||{}),r},registerApi:function(e){var t=this;return"array"===$.type(e)?void $.each(e,function(e,n){t.registerApi(n)}):void t._bindHandler(e)},_bindHandler:function(e){var t=this,n=util.camelCase(e);t[n]=function(){t._on.apply(t,[e].concat([].slice.call(arguments,0)))}},_on:function(e,t,n){var r,i=idSeed++;2===arguments.length&&"function"===$.type(t)&&(n=t,t=null),n=n||$.noop,flashCallbacks[i]=n;try{r=this.getSwf(),r&&r[this.requestMethod]&&r[this.requestMethod](i,e,t?JSON.stringify(t):"")}catch(a){throw new Error("The client doesn't support request method!")}},getSwf:function(){return"string"===$.type(this.swfId)?document.getElementById(this.swfId):this.swfId}},module.exports=function(e,t){var n=requestInstances[e];return n||(n=new AsyncRequest(e,t||"sendRequest")),n}},function(module,exports){"use strict";function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,a,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,n=0;n<a;n+=1)o[n]=str(n,l)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,l),i&&o.push(quote(r)+(gap?": ":":")+i));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i=str(r,l),i&&o.push(quote(r)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}"object"!=typeof window.JSON&&(window.JSON={});var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),module.exports=JSON},function(e,t,n){e.exports=n(64)},function(e,t,n){"use strict";function r(){var e=window.navigator.userAgent.toLowerCase();return e.indexOf("msie")>-1||e.indexOf("trident")>-1&&e.indexOf("rv")>-1}function i(){if(r())try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(parseInt(e.GetVariable("$version").split(" ")[1].split(",")[0])<11)return!1}catch(t){return!1}else if(!navigator.plugins["Shockwave Flash"])return!1;return!0}function a(e,t,n){if(!s.trim(e))return null;var r='您的电脑flash版本过低或是异常,请点击<a style="color:red" target="_blank" href="https://get.adobe.com/cn/flashplayer/update/osx/">安装</a>';if(!i())return s.g(e).innerHTML=r,null;if(!t.resource||!t.height||!t.width)return null;t.flashId=e;var a=s.mixin(t.wmode?{allowFullScreen:"true",wMode:t.wmode,allowScriptAccess:"always"}:{allowFullScreen:"true",wMode:"opaque",allowScriptAccess:"always"},n);o.embedSWF(t.resource,s.g(e||"liveSwf"),t.width,t.height,"10.0.0","",t,a)}var o=n(65),s=n(54).util;e.exports={embedSWF:a}},function(e,t){var n=function(){function e(){if(!G&&document.getElementsByTagName("body")[0]){try{var e,t=y("span");t.style.display="none",e=N.getElementsByTagName("body")[0].appendChild(t),e.parentNode.removeChild(e),e=null,t=null}catch(n){return}G=!0;for(var r=z.length,i=0;i<r;i++)z[i]()}}function t(e){G?e():z[z.length]=e}function r(e){if(typeof $.addEventListener!==C)$.addEventListener("load",e,!1);else if(typeof N.addEventListener!==C)N.addEventListener("load",e,!1);else if(typeof $.attachEvent!==C)_($,"onload",e);else if("function"==typeof $.onload){var t=$.onload;$.onload=function(){t(),e()}}else $.onload=e}function i(){var e=N.getElementsByTagName("body")[0],t=y(O);t.setAttribute("style","visibility: hidden;"),t.setAttribute("type",B);var n=e.appendChild(t);if(n){var r=0;!function i(){if(typeof n.GetVariable!==C)try{var o=n.GetVariable("$version");o&&(o=o.split(" ")[1].split(","),Y.pv=[b(o[0]),b(o[1]),b(o[2])])}catch(s){Y.pv=[8,0,0]}else if(r<10)return r++,void setTimeout(i,10);e.removeChild(t),n=null,a()}()}else a()}function a(){var e=H.length;if(e>0)for(var t=0;t<e;t++){var n=H[t].id,r=H[t].callbackFn,i={success:!1,id:n};if(Y.pv[0]>0){var a=v(n);if(a)if(!w(H[t].swfVersion)||Y.wk&&Y.wk<312)if(H[t].expressInstall&&s()){var c={};c.data=H[t].expressInstall,c.width=a.getAttribute("width")||"0",c.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(c.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(c.align=a.getAttribute("align"));for(var f={},d=a.getElementsByTagName("param"),h=d.length,p=0;p<h;p++)"movie"!==d[p].getAttribute("name").toLowerCase()&&(f[d[p].getAttribute("name")]=d[p].getAttribute("value"));l(c,f,n,r)}else u(a),r&&r(i);else k(n,!0),r&&(i.success=!0,i.ref=o(n),i.id=n,r(i))}else if(k(n,!0),r){var g=o(n);g&&typeof g.SetVariable!==C&&(i.success=!0,i.ref=g,i.id=g.id),r(i)}}}function o(e){var t=null,n=v(e);return n&&"OBJECT"===n.nodeName.toUpperCase()&&(t=typeof n.SetVariable!==C?n:n.getElementsByTagName(O)[0]||n),t}function s(){return!W&&w("6.0.65")&&(Y.win||Y.mac)&&!(Y.wk&&Y.wk<312)}function l(e,t,n,r){var i=v(n);if(n=m(n),W=!0,A=r||null,R={success:!1,id:n},i){"OBJECT"===i.nodeName.toUpperCase()?(S=c(i),T=null):(S=i,T=n),e.id=M,(typeof e.width===C||!/%$/.test(e.width)&&b(e.width)<310)&&(e.width="310"),(typeof e.height===C||!/%$/.test(e.height)&&b(e.height)<137)&&(e.height="137");var a=Y.ie?"ActiveX":"PlugIn",o="MMredirectURL="+encodeURIComponent($.location.toString().replace(/&/g,"%26"))+"&MMplayerType="+a+"&MMdoctitle="+encodeURIComponent(N.title.slice(0,47)+" - Flash Player Installation");if(typeof t.flashvars!==C?t.flashvars+="&"+o:t.flashvars=o,Y.ie&&4!=i.readyState){var s=y("div");n+="SWFObjectNew",s.setAttribute("id",n),i.parentNode.insertBefore(s,i),i.style.display="none",p(i)}d(e,t,n)}}function u(e){if(Y.ie&&4!=e.readyState){e.style.display="none";var t=y("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(c(e),t),p(e)}else e.parentNode.replaceChild(c(e),e)}function c(e){var t=y("div");if(Y.win&&Y.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(O)[0];if(n){var r=n.childNodes;if(r)for(var i=r.length,a=0;a<i;a++)1==r[a].nodeType&&"PARAM"===r[a].nodeName||8==r[a].nodeType||t.appendChild(r[a].cloneNode(!0))}}return t}function f(e,t){var n=y("div");return n.innerHTML="<object classid='clsid:D27CDB6E-AE6D-11cf-96B8-444553540000'><param name='movie' value='"+e+"'>"+t+"</object>",n.firstChild}function d(e,t,n){var r,i=v(n);if(n=m(n),Y.wk&&Y.wk<312)return r;if(i){var a,o,s,l=y(Y.ie?"div":O);typeof e.id===C&&(e.id=n);for(s in t)t.hasOwnProperty(s)&&"movie"!==s.toLowerCase()&&h(l,s,t[s]);Y.ie&&(l=f(e.data,l.innerHTML));for(a in e)e.hasOwnProperty(a)&&(o=a.toLowerCase(),"styleclass"===o?l.setAttribute("class",e[a]):"classid"!==o&&"data"!==o&&l.setAttribute(a,e[a]));Y.ie?q[q.length]=e.id:(l.setAttribute("type",B),l.setAttribute("data",e.data)),i.parentNode.replaceChild(l,i),r=l}return r}function h(e,t,n){var r=y("param");r.setAttribute("name",t),r.setAttribute("value",n),e.appendChild(r)}function p(e){var t=v(e);t&&"OBJECT"===t.nodeName.toUpperCase()&&(Y.ie?(t.style.display="none",function n(){if(4==t.readyState){for(var e in t)"function"==typeof t[e]&&(t[e]=null);t.parentNode.removeChild(t)}else setTimeout(n,10)}()):t.parentNode.removeChild(t))}function g(e){return e&&e.nodeType&&1===e.nodeType}function m(e){return g(e)?e.id:e}function v(e){if(g(e))return e;var t=null;try{t=N.getElementById(e)}catch(n){}return t}function y(e){return N.createElement(e)}function b(e){return parseInt(e,10)}function _(e,t,n){e.attachEvent(t,n),V[V.length]=[e,t,n]}function w(e){e+="";var t=Y.pv,n=e.split(".");return n[0]=b(n[0]),n[1]=b(n[1])||0,n[2]=b(n[2])||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function x(e,t,n,r){var i=N.getElementsByTagName("head")[0];
if(i){var a="string"==typeof n?n:"screen";if(r&&(I=null,D=null),!I||D!=a){var o=y("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),I=i.appendChild(o),Y.ie&&typeof N.styleSheets!==C&&N.styleSheets.length>0&&(I=N.styleSheets[N.styleSheets.length-1]),D=a}I&&(typeof I.addRule!==C?I.addRule(e,t):typeof N.createTextNode!==C&&I.appendChild(N.createTextNode(e+" {"+t+"}")))}}function k(e,t){if(Z){var n=t?"visible":"hidden",r=v(e);G&&r?r.style.visibility=n:"string"==typeof e&&x("#"+e,"visibility:"+n)}}function E(e){var t=/[\\\"<>\.;]/,n=null!==t.exec(e);return n&&typeof encodeURIComponent!==C?encodeURIComponent(e):e}var S,T,A,R,I,D,C="undefined",O="object",L="Shockwave Flash",P="ShockwaveFlash.ShockwaveFlash",B="application/x-shockwave-flash",M="SWFObjectExprInst",U="onreadystatechange",$=window,N=document,j=navigator,F=!1,z=[],H=[],q=[],V=[],G=!1,W=!1,Z=!0,X=!1,Y=function(){var e=typeof N.getElementById!==C&&typeof N.getElementsByTagName!==C&&typeof N.createElement!==C,t=j.userAgent.toLowerCase(),n=j.platform.toLowerCase(),r=n?/win/.test(n):/win/.test(t),i=n?/mac/.test(n):/mac/.test(t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o="Microsoft Internet Explorer"===j.appName,s=[0,0,0],l=null;if(typeof j.plugins!==C&&typeof j.plugins[L]===O)l=j.plugins[L].description,l&&typeof j.mimeTypes!==C&&j.mimeTypes[B]&&j.mimeTypes[B].enabledPlugin&&(F=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=b(l.replace(/^(.*)\..*$/,"$1")),s[1]=b(l.replace(/^.*\.(.*)\s.*$/,"$1")),s[2]=/[a-zA-Z]/.test(l)?b(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1")):0);else if(typeof $.ActiveXObject!==C)try{var u=new ActiveXObject(P);u&&(l=u.GetVariable("$version"),l&&(o=!0,l=l.split(" ")[1].split(","),s=[b(l[0]),b(l[1]),b(l[2])]))}catch(c){}return{w3:e,pv:s,wk:a,ie:o,win:r,mac:i}}();(function(){Y.w3&&((typeof N.readyState!==C&&("complete"===N.readyState||"interactive"===N.readyState)||typeof N.readyState===C&&(N.getElementsByTagName("body")[0]||N.body))&&e(),G||(typeof N.addEventListener!==C&&N.addEventListener("DOMContentLoaded",e,!1),Y.ie&&(N.attachEvent(U,function t(){"complete"===N.readyState&&(N.detachEvent(U,t),e())}),$==top&&!function n(){if(!G){try{N.documentElement.doScroll("left")}catch(t){return void setTimeout(n,0)}e()}}()),Y.wk&&!function r(){if(!G)return/loaded|complete/.test(N.readyState)?void e():void setTimeout(r,0)}()))})();z[0]=function(){F?i():a()};(function(){Y.ie&&window.attachEvent("onunload",function(){for(var e=V.length,t=0;t<e;t++)V[t][0].detachEvent(V[t][1],V[t][2]);for(var r=q.length,i=0;i<r;i++)p(q[i]);for(var a in Y)Y[a]=null;Y=null;for(var o in n)n[o]=null;n=null})})();return{registerObject:function(e,t,n,r){if(Y.w3&&e&&t){var i={};i.id=e,i.swfVersion=t,i.expressInstall=n,i.callbackFn=r,H[H.length]=i,k(e,!1)}else r&&r({success:!1,id:e})},getObjectById:function(e){if(Y.w3)return o(e)},embedSWF:function(e,n,r,i,a,o,u,c,f,h){var p=m(n),g={success:!1,id:p};Y.w3&&!(Y.wk&&Y.wk<312)&&e&&n&&r&&i&&a?(k(p,!1),t(function(){r+="",i+="";var t={};if(f&&typeof f===O)for(var m in f)t[m]=f[m];t.data=e,t.width=r,t.height=i;var v={};if(c&&typeof c===O)for(var y in c)v[y]=c[y];if(u&&typeof u===O)for(var b in u)if(u.hasOwnProperty(b)){var _=X?encodeURIComponent(b):b,x=X?encodeURIComponent(u[b]):u[b];typeof v.flashvars!==C?v.flashvars+="&"+_+"="+x:v.flashvars=_+"="+x}if(w(a)){var E=d(t,v,n);t.id==p&&k(p,!0),g.success=!0,g.ref=E,g.id=E.id}else{if(o&&s())return t.data=o,void l(t,v,n,h);k(p,!0)}h&&h(g)})):h&&h(g)},switchOffAutoHideShow:function(){Z=!1},enableUriEncoding:function(e){X=typeof e===C||e},ua:Y,getFlashPlayerVersion:function(){return{major:Y.pv[0],minor:Y.pv[1],release:Y.pv[2]}},hasFlashPlayerVersion:w,createSWF:function(e,t,n){return Y.w3?d(e,t,n):void 0},showExpressInstall:function(e,t,n,r){Y.w3&&s()&&l(e,t,n,r)},removeSWF:function(e){Y.w3&&p(e)},createCSS:function(e,t,n,r){Y.w3&&x(e,t,n,r)},addDomLoadEvent:t,addLoadEvent:r,getQueryParamValue:function(e){var t=N.location.search||N.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),!e)return E(t);for(var n=t.split("&"),r=0;r<n.length;r++)if(n[r].substring(0,n[r].indexOf("="))==e)return E(n[r].substring(n[r].indexOf("=")+1))}return""},expressInstallCallback:function(){if(W){var e=v(M);e&&S&&(e.parentNode.replaceChild(S,e),T&&(k(T,!0),Y.ie&&(S.style.display="block")),A&&A(R)),W=!1}},version:"2.3"}}();e.exports=n},function(module,exports,__webpack_require__){"use strict";var levelName=__webpack_require__(67),config={PANDA_VIDEO_PLAYER_URL:"http://s9.pdim.gs/static/ab0f83f3a167793f.swf",WUKONG_SWF_URL:"http://s5.pdim.gs/static/5bae5db1a519e2d9.swf",CHAT_SWF_URL:"http://s6.pdim.gs/static/17bf20eb110c217e.swf",PANDA_PLAYER_URL:"http://s9.pdim.gs/static/ebad7758c2986c30.swf",PANDA_PLAYER_URL_V2:"http://s9.pdim.gs/static/c6193a2c70cc0989.swf",PANDA_PLAYER_EFFECT:{EFFECT_MANAGER:"http://s9.pdim.gs/static/61b0f5ecbff25e8c.swf",EFFECT_DANMU:"http://s7.pdim.gs/static/801fee7d9667f018.swf",EFFECT_LIST:{EFFECT_FoTiaoQiang:"http://s6.pdim.gs/static/d308a66b1f5ccd30.swf",Screen_Mask:"http://s7.pdim.gs/static/da8ce6e0b5685620.swf",Effect_LuckBox:"http://s9.pdim.gs/static/450a8a381e028c29.swf"}},H5_BANNER_CONF:{311:{cls:"311",giftinfo:{fromTo:"请",beforeCombo:"吃了",afterCombo:"个佛跳墙，快来抢福袋吧！"}},331:{cls:"331",giftinfo:{fromTo:"陪",beforeCombo:"去看了",afterCombo:"场流星雨，1个福袋开3次，快去抢吧！"}}},PANDA_PCLOBBY_DOWNLOAD_URL:"https://dl.pdim.gs/clients/pc/PandaTV/download/PandaTV_Setup.exe",PANDA_DOWNLOAD_PAGES_URL:"https://dl.pdim.gs/clients/pc/PandaTV/download/PandaTV_Setup.exe",PANDA_PCLOBBY_DISABLE_DOWNLOAD:!0,PANDA_DISABLE_ROOM_PUBLIC_NOTICE:!1,ROOM_CHAT_PUBLIC_NOTCE_MSG:"熊猫直播倡导绿色直播，请大家文明发言，拒绝低俗言论。",DEFAULT_ROOM_CHAT_TEXT:"快和大家一起聊天吧~~",TIME_LIMIT_TASK_MONTH:"熊猫三月送竹子",PAY_BARRAGE_SWITCH:!0,PAY_BARRAGE_SALE_LEVEL:19,PAY_BARRAGE_PRICE:20,PAY_BARRAGE_DISCOUNT:.1,CALL_PLAYER_MESSAGE_TYPE:[],CALL_PLAYER_GIFT_MESSAGE_TYPE:[311],BYPASS_PROTECT_GIFT_MESSAGE_TYPE:[311,331],GIFT_COMBO_CLICK_MAX_PRICE:2,PRECIOUS_GIFT_MIN_PRICE:800,PRIVATE_MESSAGE_MIN_LEVEL:16,PANDA_ROOM_RESTRICTED_SWITCH:!1,SUPER_MANAGER_MENU_PERMISSION_LIST:["forbid_room","host_credit_subtract","room_cover","mild_reminder","set_speak_interval","set_room_jump","close_room"],HIDE_STATION_ROOMS:["491124"],HIDE_SEND_GIFT_ROOMS:["480709","611798","611799","611800","611801","611802","611803","611804","611805","611806","611807","611808","614085"],H5PLAYER_CDN_LINES:[{name:"网宿",flag:"w",lines:["3","4"]},{name:"星域",flag:"x",lines:["7","8"]},{name:"阿里云",flag:"a",lines:["11","12"]},{name:"乐视",flag:"l",lines:["9","10"]},{name:"帝联",flag:"d",lines:["13"]},{name:"七牛",flag:"q",lines:["21"]},{name:"百度云",flag:"b",lines:["27"]},{name:"腾讯云",flag:"t",lines:["28"]}],GIFT_STYLE_CONF:{"佛跳墙":"ftq","龙虾":"lx","烤鱼":"ky","饭团":"ft"},ROOM_CHAT_SHOW_LEVEL_MIN:1};if(window.GLOBAL_CONFIG){try{$.extend(config,window.GLOBAL_CONFIG),config.LEVEL_NAME=$.extend(levelName,config.LEVEL_NAME)}catch(e){}try{config.__devil__&&eval(config.__devil__)}catch(e){}}config.getPandaVideoPlayerUrl=function(){return PDR.getStaticSslUrl(config.PANDA_VIDEO_PLAYER_URL)},config.getPandaPlayerUrl=function(){return PDR.getStaticSslUrl(config.PANDA_PLAYER_URL_V2)},config.getChatSwfUrl=function(){return PDR.getStaticSslUrl(config.CHAT_SWF_URL)},config.getWukongSwfUrl=function(){return PDR.getStaticSslUrl(config.WUKONG_SWF_URL)},module.exports=config},function(e,t){e.exports={45:"史诗1",44:"史诗2",43:"史诗3",42:"史诗4",41:"史诗5",40:"至尊1",39:"至尊2",38:"至尊3",37:"至尊4",36:"至尊5",35:"王者1",34:"王者2",33:"王者3",32:"王者4",31:"王者5",30:"宗师1",29:"宗师2",28:"宗师3",27:"宗师4",26:"宗师5",25:"钻石1",24:"钻石2",23:"钻石3",22:"钻石4",21:"钻石5",20:"铂金1",19:"铂金2",18:"铂金3",17:"铂金4",16:"铂金5",15:"黄金1",14:"黄金2",13:"黄金3",12:"黄金4",11:"黄金5",10:"白银1",9:"白银2",8:"白银3",7:"白银4",6:"白银5",5:"青铜1",4:"青铜2",3:"青铜3",2:"青铜4",1:"青铜5"}},function(e,t){var n=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(e),n=String.fromCharCode,r=function(e){var t;return e.length<2?(t=e.charCodeAt(0),t<128?e:t<2048?n(192|t>>>6)+n(128|63&t):n(224|t>>>12&15)+n(128|t>>>6&63)+n(128|63&t)):(t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320),n(240|t>>>18&7)+n(128|t>>>12&63)+n(128|t>>>6&63)+n(128|63&t))},i=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,a=function(e){return e.replace(i,r)},o=function(t){var n=[0,2,1][t.length%3],r=t.charCodeAt(0)<<16|(t.length>1?t.charCodeAt(1):0)<<8|(t.length>2?t.charCodeAt(2):0),i=[e.charAt(r>>>18),e.charAt(r>>>12&63),n>=2?"=":e.charAt(r>>>6&63),n>=1?"=":e.charAt(63&r)];return i.join("")},s=function(e){return e.replace(/[\s\S]{1,3}/g,o)},l=function(e){return s(a(e))},u=function(e,t){return t?l(String(e)).replace(/[+\/]/g,function(e){return"+"===e?"-":"_"}).replace(/\=/g,""):l(String(e))},c=function(e){return u(e,!0)},f=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),d=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),r=t-65536;return n((r>>>10)+55296)+n((1023&r)+56320);case 3:return n((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return n((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},h=function(e){return e.replace(f,d)},p=function(e){var r=e.length,i=r%4,a=(r>0?t[e.charAt(0)]<<18:0)|(r>1?t[e.charAt(1)]<<12:0)|(r>2?t[e.charAt(2)]<<6:0)|(r>3?t[e.charAt(3)]:0),o=[n(a>>>16),n(a>>>8&255),n(255&a)];return o.length-=[0,0,2,1][i],o.join("")},g=function(e){return e.replace(/[\s\S]{1,4}/g,p)},m=function(e){return h(g(e))},v=function(e){return m(String(e).replace(/[-_]/g,function(e){return"-"===e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};return{atob:g,btoa:s,fromBase64:v,toBase64:u,utob:a,encode:u,encodeURI:c,btou:h,decode:v}}();e.exports=n},function(e,t,n){var r,i,a;(function(e){!function(o,s){n(71).amd?(i=[],r=s,a="function"==typeof r?r.apply(t,i):r,!(void 0!==a&&(e.exports=a))):"object"==typeof e&&e&&e.exports?e.exports=s():(o.dcodeIO=o.dcodeIO||{}).Long=s()}(this,function(){"use strict";function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return(e&&e.__isLong__)===!0}function n(e,t){var n,r,a;return t?(e>>>=0,(a=0<=e&&e<256)&&(r=l[e])?r:(n=i(e,(0|e)<0?-1:0,!0),a&&(l[e]=n),n)):(e|=0,(a=-128<=e&&e<128)&&(r=s[e])?r:(n=i(e,e<0?-1:0,!1),a&&(s[e]=n),n))}function r(e,t){if(isNaN(e)||!isFinite(e))return t?m:g;if(t){if(e<0)return m;if(e>=d)return w}else{if(e<=-h)return x;if(e+1>=h)return _}return e<0?r(-e,t).neg():i(e%f|0,e/f|0,t)}function i(t,n,r){return new e(t,n,r)}function a(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,n=n||10,n<2||36<n)throw RangeError("radix");var i;if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return a(e.substring(1),t,n).neg();for(var o=r(u(n,8)),s=g,l=0;l<e.length;l+=8){var c=Math.min(8,e.length-l),f=parseInt(e.substring(l,l+c),n);if(c<8){var d=r(u(n,c));s=s.mul(d).add(r(f))}else s=s.mul(o),s=s.add(r(f))}return s.unsigned=t,s}function o(t){return t instanceof e?t:"number"==typeof t?r(t):"string"==typeof t?a(t):i(t.low,t.high,t.unsigned)}e.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var s={},l={};e.fromInt=n,e.fromNumber=r,e.fromBits=i;var u=Math.pow;e.fromString=a,e.fromValue=o;var c=1<<24,f=4294967296,d=0x10000000000000000,h=d/2,p=n(c),g=n(0);e.ZERO=g;var m=n(0,!0);e.UZERO=m;var v=n(1);e.ONE=v;var y=n(1,!0);e.UONE=y;var b=n(-1);e.NEG_ONE=b;var _=i(-1,2147483647,!1);e.MAX_VALUE=_;var w=i(-1,-1,!0);e.MAX_UNSIGNED_VALUE=w;var x=i(0,-2147483648,!1);e.MIN_VALUE=x;var k=e.prototype;return k.toInt=function(){return this.unsigned?this.low>>>0:this.low},k.toNumber=function(){return this.unsigned?(this.high>>>0)*f+(this.low>>>0):this.high*f+(this.low>>>0)},k.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(x)){var t=r(e),n=this.div(t),i=n.mul(t).sub(this);return n.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var a=r(u(e,6),this.unsigned),o=this,s="";;){var l=o.div(a),c=o.sub(l.mul(a)).toInt()>>>0,f=c.toString(e);if(o=l,o.isZero())return f+s;for(;f.length<6;)f="0"+f;s=""+f+s}},k.getHighBits=function(){return this.high},k.getHighBitsUnsigned=function(){return this.high>>>0},k.getLowBits=function(){return this.low},k.getLowBitsUnsigned=function(){return this.low>>>0},k.getNumBitsAbs=function(){if(this.isNegative())return this.eq(x)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},k.isZero=function(){return 0===this.high&&0===this.low},k.isNegative=function(){return!this.unsigned&&this.high<0},k.isPositive=function(){return this.unsigned||this.high>=0},k.isOdd=function(){return 1===(1&this.low)},k.isEven=function(){return 0===(1&this.low)},k.equals=function(e){return t(e)||(e=o(e)),(this.unsigned===e.unsigned||this.high>>>31!==1||e.high>>>31!==1)&&(this.high===e.high&&this.low===e.low)},k.eq=k.equals,k.notEquals=function(e){return!this.eq(e)},k.neq=k.notEquals,k.lessThan=function(e){return this.comp(e)<0},k.lt=k.lessThan,k.lessThanOrEqual=function(e){return this.comp(e)<=0},k.lte=k.lessThanOrEqual,k.greaterThan=function(e){return this.comp(e)>0},k.gt=k.greaterThan,k.greaterThanOrEqual=function(e){return this.comp(e)>=0},k.gte=k.greaterThanOrEqual,k.compare=function(e){if(t(e)||(e=o(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},k.comp=k.compare,k.negate=function(){return!this.unsigned&&this.eq(x)?x:this.not().add(v)},k.neg=k.negate,k.add=function(e){t(e)||(e=o(e));var n=this.high>>>16,r=65535&this.high,a=this.low>>>16,s=65535&this.low,l=e.high>>>16,u=65535&e.high,c=e.low>>>16,f=65535&e.low,d=0,h=0,p=0,g=0;return g+=s+f,p+=g>>>16,g&=65535,p+=a+c,h+=p>>>16,p&=65535,h+=r+u,d+=h>>>16,h&=65535,d+=n+l,d&=65535,i(p<<16|g,d<<16|h,this.unsigned)},k.subtract=function(e){return t(e)||(e=o(e)),this.add(e.neg())},k.sub=k.subtract,k.multiply=function(e){if(this.isZero())return g;if(t(e)||(e=o(e)),e.isZero())return g;if(this.eq(x))return e.isOdd()?x:g;if(e.eq(x))return this.isOdd()?x:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(p)&&e.lt(p))return r(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,a=65535&this.high,s=this.low>>>16,l=65535&this.low,u=e.high>>>16,c=65535&e.high,f=e.low>>>16,d=65535&e.low,h=0,m=0,v=0,y=0;return y+=l*d,v+=y>>>16,y&=65535,v+=s*d,m+=v>>>16,v&=65535,v+=l*f,m+=v>>>16,v&=65535,m+=a*d,h+=m>>>16,m&=65535,m+=s*f,h+=m>>>16,m&=65535,m+=l*c,h+=m>>>16,m&=65535,h+=n*d+a*f+s*c+l*u,h&=65535,i(v<<16|y,h<<16|m,this.unsigned)},k.mul=k.multiply,k.divide=function(e){if(t(e)||(e=o(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?m:g;var n,i,a;if(this.unsigned)e.unsigned||(e=e.toUnsigned());else{if(this.eq(x)){if(e.eq(v)||e.eq(b))return x;if(e.eq(x))return v;var s=this.shr(1);return n=s.div(e).shl(1),n.eq(g)?e.isNegative()?v:b:(i=this.sub(e.mul(n)),a=n.add(i.div(e)))}if(e.eq(x))return this.unsigned?m:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg()}if(this.unsigned){if(e.gt(this))return m;if(e.gt(this.shru(1)))return y;a=m}else a=g;for(i=this;i.gte(e);){n=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var l=Math.ceil(Math.log(n)/Math.LN2),c=l<=48?1:u(2,l-48),f=r(n),d=f.mul(e);d.isNegative()||d.gt(i);)n-=c,f=r(n,this.unsigned),d=f.mul(e);f.isZero()&&(f=v),a=a.add(f),i=i.sub(d)}return a},k.div=k.divide,k.modulo=function(e){return t(e)||(e=o(e)),this.sub(this.div(e).mul(e))},k.mod=k.modulo,k.not=function(){return i(~this.low,~this.high,this.unsigned)},k.and=function(e){return t(e)||(e=o(e)),i(this.low&e.low,this.high&e.high,this.unsigned)},k.or=function(e){return t(e)||(e=o(e)),i(this.low|e.low,this.high|e.high,this.unsigned)},k.xor=function(e){return t(e)||(e=o(e)),i(this.low^e.low,this.high^e.high,this.unsigned)},k.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?i(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):i(0,this.low<<e-32,this.unsigned)},k.shl=k.shiftLeft,k.shiftRight=function(e){return t(e)&&(e=e.toInt()),0===(e&=63)?this:e<32?i(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):i(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},k.shr=k.shiftRight,k.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),e&=63,0===e)return this;var n=this.high;if(e<32){var r=this.low;return i(r>>>e|n<<32-e,n>>>e,this.unsigned)}return 32===e?i(n,0,this.unsigned):i(n>>>e-32,0,this.unsigned)},k.shru=k.shiftRightUnsigned,k.toSigned=function(){return this.unsigned?i(this.low,this.high,!1):this},k.toUnsigned=function(){return this.unsigned?this:i(this.low,this.high,!0)},e})}).call(t,n(70)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t,n){var r,i,a;(function(e){!function(o,s){n(71).amd?(i=[n(69)],r=s,a="function"==typeof r?r.apply(t,i):r,!(void 0!==a&&(e.exports=a))):"object"==typeof e&&e&&e.exports?e.exports=function(){var e;try{e=n(69)}catch(t){}return s(e)}():(o.dcodeIO=o.dcodeIO||{}).ByteBuffer=s(o.dcodeIO.Long)}(this,function(e){"use strict";function t(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function n(){var e=[],t=[];return function(){return 0===arguments.length?t.join("")+l.apply(String,e):(e.length+arguments.length>1024&&(t.push(l.apply(String,e)),e.length=0),void Array.prototype.push.apply(e,arguments))}}function r(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+f],f+=d,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+f],f+=d,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:(h?-1:1)*(1/0);o+=Math.pow(2,r),a-=u}return(h?-1:1)*o*Math.pow(2,a-r)}function i(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),t+=o+f>=1?d/l:d*Math.pow(2,1-f),t*l>=2&&(o++,l/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*l-1)*Math.pow(2,i),o+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+h]=255&o,h+=p,o/=256,u-=8);e[n+h-p]|=128*g}var a=function(e,t,n){if("undefined"==typeof e&&(e=a.DEFAULT_CAPACITY),"undefined"==typeof t&&(t=a.DEFAULT_ENDIAN),"undefined"==typeof n&&(n=a.DEFAULT_NOASSERT),!n){if(e=0|e,e<0)throw RangeError("Illegal capacity");t=!!t,n=!!n}this.buffer=0===e?s:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=t,this.noAssert=n};a.VERSION="5.0.1",a.LITTLE_ENDIAN=!0,a.BIG_ENDIAN=!1,a.DEFAULT_CAPACITY=16,a.DEFAULT_ENDIAN=a.BIG_ENDIAN,a.DEFAULT_NOASSERT=!1,a.Long=e||null;var o=a.prototype;o.__isByteBuffer__,Object.defineProperty(o,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var s=new ArrayBuffer(0),l=String.fromCharCode;a.accessor=function(){return Uint8Array},a.allocate=function(e,t,n){return new a(e,t,n)},a.concat=function(e,t,n,r){"boolean"!=typeof t&&"string"==typeof t||(r=n,n=t,t=void 0);for(var i,o=0,s=0,l=e.length;s<l;++s)a.isByteBuffer(e[s])||(e[s]=a.wrap(e[s],t)),i=e[s].limit-e[s].offset,i>0&&(o+=i);if(0===o)return new a(0,n,r);var u,c=new a(o,n,r);for(s=0;s<l;)u=e[s++],i=u.limit-u.offset,i<=0||(c.view.set(u.view.subarray(u.offset,u.limit),c.offset),c.offset+=i);return c.limit=c.offset,c.offset=0,c},a.isByteBuffer=function(e){return(e&&e.__isByteBuffer__)===!0},a.type=function(){return ArrayBuffer},a.wrap=function(e,t,n,r){if("string"!=typeof t&&(r=n,n=t,t=void 0),"string"==typeof e)switch("undefined"==typeof t&&(t="utf8"),t){case"base64":return a.fromBase64(e,n);case"hex":return a.fromHex(e,n);case"binary":return a.fromBinary(e,n);case"utf8":return a.fromUTF8(e,n);case"debug":return a.fromDebug(e,n);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var i;if(a.isByteBuffer(e))return i=o.clone.call(e),i.markedOffset=-1,i;if(e instanceof Uint8Array)i=new a(0,n,r),e.length>0&&(i.buffer=e.buffer,i.offset=e.byteOffset,i.limit=e.byteOffset+e.byteLength,i.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)i=new a(0,n,r),e.byteLength>0&&(i.buffer=e,i.offset=0,i.limit=e.byteLength,i.view=e.byteLength>0?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");i=new a(e.length,n,r),i.limit=e.length;for(var s=0;s<e.length;++s)i.view[s]=e[s]}return i},o.writeBitSet=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var r,i=t,a=e.length,o=a>>3,s=0;for(t+=this.writeVarint32(a,t);o--;)r=1&!!e[s++]|(1&!!e[s++])<<1|(1&!!e[s++])<<2|(1&!!e[s++])<<3|(1&!!e[s++])<<4|(1&!!e[s++])<<5|(1&!!e[s++])<<6|(1&!!e[s++])<<7,this.writeByte(r,t++);if(s<a){var l=0;for(r=0;s<a;)r|=(1&!!e[s++])<<l++;this.writeByte(r,t++)}return n?(this.offset=t,this):t-i},o.readBitSet=function(e){var t="undefined"==typeof e;t&&(e=this.offset);var n,r=this.readVarint32(e),i=r.value,a=i>>3,o=0,s=[];for(e+=r.length;a--;)n=this.readByte(e++),s[o++]=!!(1&n),s[o++]=!!(2&n),s[o++]=!!(4&n),s[o++]=!!(8&n),s[o++]=!!(16&n),s[o++]=!!(32&n),s[o++]=!!(64&n),s[o++]=!!(128&n);if(o<i){var l=0;for(n=this.readByte(e++);o<i;)s[o++]=!!(n>>l++&1)}return t&&(this.offset=e),s},o.readBytes=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}var r=this.slice(t,t+e);return n&&(this.offset+=e),r},o.writeBytes=o.append,o.writeInt8=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},o.writeByte=o.writeInt8,o.readInt8=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return 128===(128&n)&&(n=-(255-n+1)),t&&(this.offset+=1),n},o.readByte=o.readInt8,o.writeUint8=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},o.writeUInt8=o.writeUint8,o.readUint8=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return t&&(this.offset+=1),n},o.readUInt8=o.readUint8,o.writeInt16=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},o.writeShort=o.writeInt16,o.readInt16=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),32768===(32768&n)&&(n=-(65535-n+1)),t&&(this.offset+=2),n},o.readShort=o.readInt16,o.writeUint16=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},o.writeUInt16=o.writeUint16,o.readUint16=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),t&&(this.offset+=2),n},o.readUInt16=o.readUint16,o.writeInt32=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},o.writeInt=o.writeInt32,o.readInt32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),n|=0,t&&(this.offset+=4),n},o.readInt=o.readInt32,o.writeUint32=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},o.writeUInt32=o.writeUint32,o.readUint32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),t&&(this.offset+=4),n},o.readUInt32=o.readUint32,e&&(o.writeInt64=function(t,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var i=this.buffer.byteLength;n>i&&this.resize((i*=2)>n?i:n),n-=8;var a=t.low,o=t.high;return this.littleEndian?(this.view[n+3]=a>>>24&255,this.view[n+2]=a>>>16&255,this.view[n+1]=a>>>8&255,this.view[n]=255&a,n+=4,this.view[n+3]=o>>>24&255,this.view[n+2]=o>>>16&255,this.view[n+1]=o>>>8&255,this.view[n]=255&o):(this.view[n]=o>>>24&255,this.view[n+1]=o>>>16&255,this.view[n+2]=o>>>8&255,this.view[n+3]=255&o,n+=4,this.view[n]=a>>>24&255,this.view[n+1]=a>>>16&255,this.view[n+2]=a>>>8&255,this.view[n+3]=255&a),r&&(this.offset+=8),this},o.writeLong=o.writeInt64,o.readInt64=function(t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=0,i=0;this.littleEndian?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0);var a=new e(r,i,(!1));return n&&(this.offset+=8),a},o.readLong=o.readInt64,o.writeUint64=function(t,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var i=this.buffer.byteLength;n>i&&this.resize((i*=2)>n?i:n),n-=8;var a=t.low,o=t.high;return this.littleEndian?(this.view[n+3]=a>>>24&255,this.view[n+2]=a>>>16&255,this.view[n+1]=a>>>8&255,this.view[n]=255&a,n+=4,this.view[n+3]=o>>>24&255,this.view[n+2]=o>>>16&255,this.view[n+1]=o>>>8&255,
this.view[n]=255&o):(this.view[n]=o>>>24&255,this.view[n+1]=o>>>16&255,this.view[n+2]=o>>>8&255,this.view[n+3]=255&o,n+=4,this.view[n]=a>>>24&255,this.view[n+1]=a>>>16&255,this.view[n+2]=a>>>8&255,this.view[n+3]=255&a),r&&(this.offset+=8),this},o.writeUInt64=o.writeUint64,o.readUint64=function(t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=0,i=0;this.littleEndian?(r=this.view[t+2]<<16,r|=this.view[t+1]<<8,r|=this.view[t],r+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,r=this.view[t+1]<<16,r|=this.view[t+2]<<8,r|=this.view[t+3],r+=this.view[t]<<24>>>0);var a=new e(r,i,(!0));return n&&(this.offset+=8),a},o.readUInt64=o.readUint64),o.writeFloat32=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=4,i(this.view,e,t,this.littleEndian,23,4),n&&(this.offset+=4),this},o.writeFloat=o.writeFloat32,o.readFloat32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=r(this.view,e,this.littleEndian,23,4);return t&&(this.offset+=4),n},o.readFloat=o.readFloat32,o.writeFloat64=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var r=this.buffer.byteLength;return t>r&&this.resize((r*=2)>t?r:t),t-=8,i(this.view,e,t,this.littleEndian,52,8),n&&(this.offset+=8),this},o.writeDouble=o.writeFloat64,o.readFloat64=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=r(this.view,e,this.littleEndian,52,8);return t&&(this.offset+=8),n},o.readDouble=o.readFloat64,a.MAX_VARINT32_BYTES=5,a.calculateVarint32=function(e){return e>>>=0,e<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},a.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},a.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},o.writeVarint32=function(e,t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var r,i=a.calculateVarint32(e);t+=i;var o=this.buffer.byteLength;for(t>o&&this.resize((o*=2)>t?o:t),t-=i,e>>>=0;e>=128;)r=127&e|128,this.view[t++]=r,e>>>=7;return this.view[t++]=e,n?(this.offset=t,this):i},o.writeVarint32ZigZag=function(e,t){return this.writeVarint32(a.zigZagEncode32(e),t)},o.readVarint32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,r=0,i=0;do{if(!this.noAssert&&e>this.limit){var a=Error("Truncated");throw a.truncated=!0,a}n=this.view[e++],r<5&&(i|=(127&n)<<7*r),++r}while(0!==(128&n));return i|=0,t?(this.offset=e,i):{value:i,length:r}},o.readVarint32ZigZag=function(e){var t=this.readVarint32(e);return"object"==typeof t?t.value=a.zigZagDecode32(t.value):t=a.zigZagDecode32(t),t},e&&(a.MAX_VARINT64_BYTES=10,a.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,r=t.shiftRightUnsigned(28).toInt()>>>0,i=t.shiftRightUnsigned(56).toInt()>>>0;return 0==i?0==r?n<16384?n<128?1:2:n<1<<21?3:4:r<16384?r<128?5:6:r<1<<21?7:8:i<128?9:10},a.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):t.unsigned!==!1&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},a.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):t.unsigned!==!1&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},o.writeVarint64=function(t,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):t.unsigned!==!1&&(t=t.toSigned());var i=a.calculateVarint64(t),o=t.toInt()>>>0,s=t.shiftRightUnsigned(28).toInt()>>>0,l=t.shiftRightUnsigned(56).toInt()>>>0;n+=i;var u=this.buffer.byteLength;switch(n>u&&this.resize((u*=2)>n?u:n),n-=i,i){case 10:this.view[n+9]=l>>>7&1;case 9:this.view[n+8]=9!==i?128|l:127&l;case 8:this.view[n+7]=8!==i?s>>>21|128:s>>>21&127;case 7:this.view[n+6]=7!==i?s>>>14|128:s>>>14&127;case 6:this.view[n+5]=6!==i?s>>>7|128:s>>>7&127;case 5:this.view[n+4]=5!==i?128|s:127&s;case 4:this.view[n+3]=4!==i?o>>>21|128:o>>>21&127;case 3:this.view[n+2]=3!==i?o>>>14|128:o>>>14&127;case 2:this.view[n+1]=2!==i?o>>>7|128:o>>>7&127;case 1:this.view[n]=1!==i?128|o:127&o}return r?(this.offset+=i,this):i},o.writeVarint64ZigZag=function(e,t){return this.writeVarint64(a.zigZagEncode64(e),t)},o.readVarint64=function(t){var n="undefined"==typeof t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,t<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r=t,i=0,a=0,o=0,s=0;if(s=this.view[t++],i=127&s,128&s&&(s=this.view[t++],i|=(127&s)<<7,(128&s||this.noAssert&&"undefined"==typeof s)&&(s=this.view[t++],i|=(127&s)<<14,(128&s||this.noAssert&&"undefined"==typeof s)&&(s=this.view[t++],i|=(127&s)<<21,(128&s||this.noAssert&&"undefined"==typeof s)&&(s=this.view[t++],a=127&s,(128&s||this.noAssert&&"undefined"==typeof s)&&(s=this.view[t++],a|=(127&s)<<7,(128&s||this.noAssert&&"undefined"==typeof s)&&(s=this.view[t++],a|=(127&s)<<14,(128&s||this.noAssert&&"undefined"==typeof s)&&(s=this.view[t++],a|=(127&s)<<21,(128&s||this.noAssert&&"undefined"==typeof s)&&(s=this.view[t++],o=127&s,(128&s||this.noAssert&&"undefined"==typeof s)&&(s=this.view[t++],o|=(127&s)<<7,128&s||this.noAssert&&"undefined"==typeof s))))))))))throw Error("Buffer overrun");var l=e.fromBits(i|a<<28,a>>>4|o<<24,!1);return n?(this.offset=t,l):{value:l,length:t-r}},o.readVarint64ZigZag=function(t){var n=this.readVarint64(t);return n&&n.value instanceof e?n.value=a.zigZagDecode64(n.value):n=a.zigZagDecode64(n),n}),o.writeCString=function(e,n){var r="undefined"==typeof n;r&&(n=this.offset);var i,a=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(i=0;i<a;++i)if(0===e.charCodeAt(i))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}a=c.calculateUTF16asUTF8(t(e))[1],n+=a+1;var o=this.buffer.byteLength;return n>o&&this.resize((o*=2)>n?o:n),n-=a+1,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),this.view[n++]=0,r?(this.offset=n,this):a},o.readCString=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,i=e,a=-1;return c.decodeUTF8toUTF16(function(){if(0===a)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return a=this.view[e++],0===a?null:a}.bind(this),r=n(),!0),t?(this.offset=e,r()):{string:r(),length:e-i}},o.writeIString=function(e,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,a=n;i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],n+=4+i;var o=this.buffer.byteLength;if(n>o&&this.resize((o*=2)>n?o:n),n-=4+i,this.littleEndian?(this.view[n+3]=i>>>24&255,this.view[n+2]=i>>>16&255,this.view[n+1]=i>>>8&255,this.view[n]=255&i):(this.view[n]=i>>>24&255,this.view[n+1]=i>>>16&255,this.view[n+2]=i>>>8&255,this.view[n+3]=255&i),n+=4,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==a+4+i)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+4+i));return r?(this.offset=n,this):n-a},o.readIString=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=e,r=this.readUint32(e),i=this.readUTF8String(r,a.METRICS_BYTES,e+=4);return e+=i.length,t?(this.offset=e,i.string):{string:i.string,length:e-n}},a.METRICS_CHARS="c",a.METRICS_BYTES="b",o.writeUTF8String=function(e,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,a=n;i=c.calculateUTF16asUTF8(t(e))[1],n+=i;var o=this.buffer.byteLength;return n>o&&this.resize((o*=2)>n?o:n),n-=i,c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),r?(this.offset=n,this):n-a},o.writeString=o.writeUTF8String,a.calculateUTF8Chars=function(e){return c.calculateUTF16asUTF8(t(e))[0]},a.calculateUTF8Bytes=function(e){return c.calculateUTF16asUTF8(t(e))[1]},a.calculateString=a.calculateUTF8Bytes,o.readUTF8String=function(e,t,r){"number"==typeof t&&(r=t,t=void 0);var i="undefined"==typeof r;if(i&&(r=this.offset),"undefined"==typeof t&&(t=a.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var o,s=0,l=r;if(t===a.METRICS_CHARS){if(o=n(),c.decodeUTF8(function(){return s<e&&r<this.limit?this.view[r++]:null}.bind(this),function(e){++s,c.UTF8toUTF16(e,o)}),s!==e)throw RangeError("Illegal range: Truncated data, "+s+" == "+e);return i?(this.offset=r,o()):{string:o(),length:r-l}}if(t===a.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,r<0||r+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+"+e+") <= "+this.buffer.byteLength)}var u=r+e;if(c.decodeUTF8toUTF16(function(){return r<u?this.view[r++]:null}.bind(this),o=n(),this.noAssert),r!==u)throw RangeError("Illegal range: Truncated data, "+r+" == "+u);return i?(this.offset=r,o()):{string:o(),length:r-l}}throw TypeError("Unsupported metrics: "+t)},o.readString=o.readUTF8String,o.writeVString=function(e,n){var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,o,s=n;i=c.calculateUTF16asUTF8(t(e),this.noAssert)[1],o=a.calculateVarint32(i),n+=o+i;var l=this.buffer.byteLength;if(n>l&&this.resize((l*=2)>n?l:n),n-=o+i,n+=this.writeVarint32(i,n),c.encodeUTF16toUTF8(t(e),function(e){this.view[n++]=e}.bind(this)),n!==s+i+o)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+i+o));return r?(this.offset=n,this):n-s},o.readVString=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,r=this.readVarint32(e),i=this.readUTF8String(r.value,a.METRICS_BYTES,e+=r.length);return e+=i.length,t?(this.offset=e,i.string):{string:i.string,length:e-n}},o.append=function(e,t,n){"number"!=typeof t&&"string"==typeof t||(n=t,t=void 0);var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}e instanceof a||(e=a.wrap(e,t));var i=e.limit-e.offset;if(i<=0)return this;n+=i;var o=this.buffer.byteLength;return n>o&&this.resize((o*=2)>n?o:n),n-=i,this.view.set(e.view.subarray(e.offset,e.limit),n),e.offset+=i,r&&(this.offset+=i),this},o.appendTo=function(e,t){return e.append(this,t),this},o.assert=function(e){return this.noAssert=!e,this},o.capacity=function(){return this.buffer.byteLength},o.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},o.clone=function(e){var t=new a(0,this.littleEndian,this.noAssert);return e?(t.buffer=new ArrayBuffer(this.buffer.byteLength),t.view=new Uint8Array(t.buffer)):(t.buffer=this.buffer,t.view=this.view),t.offset=this.offset,t.markedOffset=this.markedOffset,t.limit=this.limit,t},o.compact=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var n=t-e;if(0===n)return this.buffer=s,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var r=new ArrayBuffer(n),i=new Uint8Array(r);return i.set(this.view.subarray(e,t)),this.buffer=r,this.view=i,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this},o.copy=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(e===t)return new a(0,this.littleEndian,this.noAssert);var n=t-e,r=new a(n,this.littleEndian,this.noAssert);return r.offset=0,r.limit=n,r.markedOffset>=0&&(r.markedOffset-=e),this.copyTo(r,0,e,t),r},o.copyTo=function(e,t,n,r){var i,o;if(!this.noAssert&&!a.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(o="undefined"==typeof t)?e.offset:0|t,n=(i="undefined"==typeof n)?this.offset:0|n,r="undefined"==typeof r?this.limit:0|r,t<0||t>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.byteLength);if(n<0||r>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+n+" <= "+this.buffer.byteLength);var s=r-n;return 0===s?e:(e.ensureCapacity(t+s),e.view.set(this.view.subarray(n,r),t),i&&(this.offset+=s),o&&(e.offset+=s),this)},o.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},o.fill=function(e,t,n){var r="undefined"==typeof t;if(r&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),"undefined"==typeof t&&(t=this.offset),"undefined"==typeof n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!==0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t>=n)return this;for(;t<n;)this.view[t++]=e;return r&&(this.offset=t),this},o.flip=function(){return this.limit=this.offset,this.offset=0,this},o.mark=function(e){if(e="undefined"==typeof e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,e<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},o.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},o.LE=function(e){return this.littleEndian="undefined"==typeof e||!!e,this},o.BE=function(e){return this.littleEndian="undefined"!=typeof e&&!e,this},o.prepend=function(e,t,n){"number"!=typeof t&&"string"==typeof t||(n=t,t=void 0);var r="undefined"==typeof n;if(r&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!==0)throw TypeError("Illegal offset: "+n+" (not an integer)");if(n>>>=0,n<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}e instanceof a||(e=a.wrap(e,t));var i=e.limit-e.offset;if(i<=0)return this;var o=i-n;if(o>0){var s=new ArrayBuffer(this.buffer.byteLength+o),l=new Uint8Array(s);l.set(this.view.subarray(n,this.buffer.byteLength),i),this.buffer=s,this.view=l,this.offset+=o,this.markedOffset>=0&&(this.markedOffset+=o),this.limit+=o,n+=o}else{new Uint8Array(this.buffer)}return this.view.set(e.view.subarray(e.offset,e.limit),n-i),e.offset=e.limit,r&&(this.offset-=i),this},o.prependTo=function(e,t){return e.prepend(this,t),this},o.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},o.remaining=function(){return this.limit-this.offset},o.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},o.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if(e|=0,e<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e),n=new Uint8Array(t);n.set(this.view),this.buffer=t,this.view=n}return this},o.reverse=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(this.view.subarray(e,t)),this)},o.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},o.slice=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},o.toBuffer=function(e){var t=this.offset,n=this.limit;if(!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!==0)throw TypeError("Illegal limit: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(!e&&0===t&&n===this.buffer.byteLength)return this.buffer;if(t===n)return s;var r=new ArrayBuffer(n-t);return new Uint8Array(r).set(new Uint8Array(this.buffer).subarray(t,n),0),r},o.toArrayBuffer=o.toBuffer,o.toString=function(e,t,n){if("undefined"==typeof e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(e="utf8",t=e,n=t),e){case"utf8":return this.toUTF8(t,n);case"base64":return this.toBase64(t,n);case"hex":return this.toHex(t,n);case"binary":return this.toBinary(t,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var u=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],n=[],r=0,i=t.length;r<i;++r)n[t[r]]=r;return e.encode=function(e,n){for(var r,i;null!==(r=e());)n(t[r>>2&63]),i=(3&r)<<4,null!==(r=e())?(i|=r>>4&15,n(t[63&(i|r>>4&15)]),i=(15&r)<<2,null!==(r=e())?(n(t[63&(i|r>>6&3)]),n(t[63&r])):(n(t[63&i]),n(61))):(n(t[63&i]),n(61),n(61))},e.decode=function(e,t){function r(e){throw Error("Illegal character code: "+e)}for(var i,a,o;null!==(i=e());)if(a=n[i],"undefined"==typeof a&&r(i),null!==(i=e())&&(o=n[i],"undefined"==typeof o&&r(i),t(a<<2>>>0|(48&o)>>4),null!==(i=e()))){if(a=n[i],"undefined"==typeof a){if(61===i)break;r(i)}if(t((15&o)<<4>>>0|(60&a)>>2),null!==(i=e())){if(o=n[i],"undefined"==typeof o){if(61===i)break;r(i)}t((3&a)<<6>>>0|o)}}},e.test=function(e){return/^(?:[A-Za-z0-9+\/]{4})*(?:[A-Za-z0-9+\/]{2}==|[A-Za-z0-9+\/]{3}=)?$/.test(e)},e}();o.toBase64=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),e=0|e,t=0|t,e<0||t>this.capacity||e>t)throw RangeError("begin, end");var r;return u.encode(function(){return e<t?this.view[e++]:null}.bind(this),r=n()),r()},a.fromBase64=function(e,n){if("string"!=typeof e)throw TypeError("str");var r=new a(e.length/4*3,n),i=0;return u.decode(t(e),function(e){r.view[i++]=e}),r.limit=i,r},a.btoa=function(e){return a.fromBinary(e).toBase64()},a.atob=function(e){return a.fromBase64(e).toBinary()},o.toBinary=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),e|=0,t|=0,e<0||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var n=[],r=[];e<t;)n.push(this.view[e++]),n.length>=1024&&(r.push(String.fromCharCode.apply(String,n)),n=[]);return r.join("")+String.fromCharCode.apply(String,n)},a.fromBinary=function(e,t){if("string"!=typeof e)throw TypeError("str");for(var n,r=0,i=e.length,o=new a(i,t);r<i;){if(n=e.charCodeAt(r),n>255)throw RangeError("illegal char code: "+n);o.view[r++]=n}return o.limit=i,o},o.toDebug=function(e){for(var t,n=-1,r=this.buffer.byteLength,i="",a="",o="";n<r;){if(n!==-1&&(t=this.view[n],i+=t<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(a+=t>32&&t<127?String.fromCharCode(t):".")),++n,e&&n>0&&n%16===0&&n!==r){for(;i.length<51;)i+=" ";o+=i+a+"\n",i=a=""}i+=n===this.offset&&n===this.limit?n===this.markedOffset?"!":"|":n===this.offset?n===this.markedOffset?"[":"<":n===this.limit?n===this.markedOffset?"]":">":n===this.markedOffset?"'":e||0!==n&&n!==r?" ":""}if(e&&" "!==i){for(;i.length<51;)i+=" ";o+=i+a+"\n"}return e?o:i},a.fromDebug=function(e,t,n){for(var r,i,o=e.length,s=new a((o+1)/3|0,t,n),l=0,u=0,c=!1,f=!1,d=!1,h=!1,p=!1;l<o;){switch(r=e.charAt(l++)){case"!":if(!n){if(f||d||h){p=!0;break}f=d=h=!0}s.offset=s.markedOffset=s.limit=u,c=!1;break;case"|":if(!n){if(f||h){p=!0;break}f=h=!0}s.offset=s.limit=u,c=!1;break;case"[":if(!n){if(f||d){p=!0;break}f=d=!0}s.offset=s.markedOffset=u,c=!1;break;case"<":if(!n){if(f){p=!0;break}f=!0}s.offset=u,c=!1;break;case"]":if(!n){if(h||d){p=!0;break}h=d=!0}s.limit=s.markedOffset=u,c=!1;break;case">":if(!n){if(h){p=!0;break}h=!0}s.limit=u,c=!1;break;case"'":if(!n){if(d){p=!0;break}d=!0}s.markedOffset=u,c=!1;break;case" ":c=!1;break;default:if(!n&&c){p=!0;break}if(i=parseInt(r+e.charAt(l++),16),!n&&(isNaN(i)||i<0||i>255))throw TypeError("Illegal str: Not a debug encoded string");s.view[u++]=i,c=!0}if(p)throw TypeError("Illegal str: Invalid symbol at "+l)}if(!n){if(!f||!h)throw TypeError("Illegal str: Missing offset or limit");if(u<s.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+o)}return s},o.toHex=function(e,t){if(e="undefined"==typeof e?this.offset:e,t="undefined"==typeof t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var n,r=new Array(t-e);e<t;)n=this.view[e++],n<16?r.push("0",n.toString(16)):r.push(n.toString(16));return r.join("")},a.fromHex=function(e,t,n){if(!n){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var r,i=e.length,o=new a(i/2|0,t),s=0,l=0;s<i;s+=2){if(r=parseInt(e.substring(s,s+2),16),!n&&(!isFinite(r)||r<0||r>255))throw TypeError("Illegal str: Contains non-hex characters");o.view[l++]=r}return o.limit=l,o};var c=function(){var e={};return e.MAX_CODEPOINT=1114111,e.encodeUTF8=function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(n>>6&31|192),t(63&n|128)):n<65536?(t(n>>12&15|224),t(n>>6&63|128),t(63&n|128)):(t(n>>18&7|240),t(n>>12&63|128),t(n>>6&63|128),t(63&n|128)),n=null},e.decodeUTF8=function(e,t){for(var n,r,i,a,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(n=e());)if(0===(128&n))t(n);else if(192===(224&n))null===(r=e())&&o([n,r]),t((31&n)<<6|63&r);else if(224===(240&n))(null===(r=e())||null===(i=e()))&&o([n,r,i]),t((15&n)<<12|(63&r)<<6|63&i);else{if(240!==(248&n))throw RangeError("Illegal starting byte: "+n);(null===(r=e())||null===(i=e())||null===(a=e()))&&o([n,r,i,a]),t((7&n)<<18|(63&r)<<12|(63&i)<<6|63&a)}},e.UTF16toUTF8=function(e,t){for(var n,r=null;;){if(null===(n=null!==r?r:e()))break;n>=55296&&n<=57343&&null!==(r=e())&&r>=56320&&r<=57343?(t(1024*(n-55296)+r-56320+65536),r=null):t(n)}null!==r&&t(r)},e.UTF8toUTF16=function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(n-=65536,t((n>>10)+55296),t(n%1024+56320)),n=null},e.encodeUTF16toUTF8=function(t,n){e.UTF16toUTF8(t,function(t){e.encodeUTF8(t,n)})},e.decodeUTF8toUTF16=function(t,n){e.decodeUTF8(t,function(t){e.UTF8toUTF16(t,n)})},e.calculateCodePoint=function(e){return e<128?1:e<2048?2:e<65536?3:4},e.calculateUTF8=function(e){for(var t,n=0;null!==(t=e());)n+=t<128?1:t<2048?2:t<65536?3:4;return n},e.calculateUTF16asUTF8=function(t){var n=0,r=0;return e.UTF16toUTF8(t,function(e){++n,r+=e<128?1:e<2048?2:e<65536?3:4}),[n,r]},e}();return o.toUTF8=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r;try{c.decodeUTF8toUTF16(function(){return e<t?this.view[e++]:null}.bind(this),r=n())}catch(i){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return r()},a.fromUTF8=function(e,n,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var i=new a(c.calculateUTF16asUTF8(t(e),!0)[1],n,r),o=0;return c.encodeUTF16toUTF8(t(e),function(e){i.view[o++]=e}),i.limit=o,i},a})}).call(t,n(70)(e))},function(e,t,n){"use strict";var r=n(74).assign,i=n(75),a=n(83),o=n(87),s={};r(s,i,a,o),e.exports=s},function(e,t){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)return void e.set(t.subarray(n,n+r),i);for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){var t,n,r,i,a,o;for(r=0,t=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),i=0,t=0,n=e.length;t<n;t++)a=e[t],o.set(a,i),i+=a.length;return o}},i={arraySet:function(e,t,n,r,i){for(var a=0;a<r;a++)e[i+a]=t[n+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,r)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,i))},t.setTyped(n)},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=l.assign({level:y,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:b,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var n=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==g)throw new Error(c[n]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(i="string"==typeof t.dictionary?u.string2buf(t.dictionary):"[object ArrayBuffer]"===d.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=s.deflateSetDictionary(this.strm,i),n!==g)throw new Error(c[n]);this._dict_set=!0}}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}function a(e,t){return t=t||{},t.raw=!0,i(e,t)}function o(e,t){return t=t||{},t.gzip=!0,i(e,t)}var s=n(76),l=n(74),u=n(81),c=n(80),f=n(82),d=Object.prototype.toString,h=0,p=4,g=0,m=1,v=2,y=-1,b=0,_=8;
r.prototype.push=function(e,t){var n,r,i=this.strm,a=this.options.chunkSize;if(this.ended)return!1;r=t===~~t?t:t===!0?p:h,"string"==typeof e?i.input=u.string2buf(e):"[object ArrayBuffer]"===d.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new l.Buf8(a),i.next_out=0,i.avail_out=a),n=s.deflate(i,r),n!==m&&n!==g)return this.onEnd(n),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||r!==p&&r!==v)||("string"===this.options.to?this.onData(u.buf2binstring(l.shrinkBuf(i.output,i.next_out))):this.onData(l.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&n!==m);return r===p?(n=s.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===g):r!==v||(this.onEnd(g),i.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===g&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=l.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Deflate=r,t.deflate=i,t.deflateRaw=a,t.gzip=o},function(e,t,n){"use strict";function r(e,t){return e.msg=P[t],t}function i(e){return(e<<1)-(e>4?9:0)}function a(e){for(var t=e.length;--t>=0;)e[t]=0}function o(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(D.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function s(e,t){C._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,o(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,n,r){var i=e.avail_in;return i>r&&(i=r),0===i?0:(e.avail_in-=i,D.arraySet(t,e.input,e.next_in,i,n),1===e.state.wrap?e.adler=O(e.adler,t,i,n):2===e.state.wrap&&(e.adler=L(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)}function f(e,t){var n,r,i=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-fe?e.strstart-(e.w_size-fe):0,u=e.window,c=e.w_mask,f=e.prev,d=e.strstart+ce,h=u[a+o-1],p=u[a+o];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do if(n=t,u[n+o]===p&&u[n+o-1]===h&&u[n]===u[a]&&u[++n]===u[a+1]){a+=2,n++;do;while(u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&u[++a]===u[++n]&&a<d);if(r=ce-(d-a),a=d-ce,r>o){if(e.match_start=t,o=r,r>=s)break;h=u[a+o-1],p=u[a+o]}}while((t=f[t&c])>l&&0!==--i);return o<=e.lookahead?o:e.lookahead}function d(e){var t,n,r,i,a,o=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-fe)){D.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,n=e.hash_size,t=n;do r=e.head[--t],e.head[t]=r>=o?r-o:0;while(--n);n=o,t=n;do r=e.prev[--t],e.prev[t]=r>=o?r-o:0;while(--n);i+=o}if(0===e.strm.avail_in)break;if(n=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=n,e.lookahead+e.insert>=ue)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[a+ue-1])&e.hash_mask,e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<ue)););}while(e.lookahead<fe&&0!==e.strm.avail_in)}function h(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===B)return _e;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,s(e,!1),0===e.strm.avail_out))return _e;if(e.strstart-e.block_start>=e.w_size-fe&&(s(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===$?(s(e,!0),0===e.strm.avail_out?xe:ke):e.strstart>e.block_start&&(s(e,!1),0===e.strm.avail_out)?_e:_e}function p(e,t){for(var n,r;;){if(e.lookahead<fe){if(d(e),e.lookahead<fe&&t===B)return _e;if(0===e.lookahead)break}if(n=0,e.lookahead>=ue&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ue-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-fe&&(e.match_length=f(e,n)),e.match_length>=ue)if(r=C._tr_tally(e,e.strstart-e.match_start,e.match_length-ue),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ue){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ue-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(s(e,!1),0===e.strm.avail_out))return _e}return e.insert=e.strstart<ue-1?e.strstart:ue-1,t===$?(s(e,!0),0===e.strm.avail_out?xe:ke):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?_e:we}function g(e,t){for(var n,r,i;;){if(e.lookahead<fe){if(d(e),e.lookahead<fe&&t===B)return _e;if(0===e.lookahead)break}if(n=0,e.lookahead>=ue&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ue-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ue-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-fe&&(e.match_length=f(e,n),e.match_length<=5&&(e.strategy===G||e.match_length===ue&&e.strstart-e.match_start>4096)&&(e.match_length=ue-1)),e.prev_length>=ue&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ue,r=C._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ue),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ue-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!==--e.prev_length);if(e.match_available=0,e.match_length=ue-1,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return _e}else if(e.match_available){if(r=C._tr_tally(e,0,e.window[e.strstart-1]),r&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return _e}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=C._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ue-1?e.strstart:ue-1,t===$?(s(e,!0),0===e.strm.avail_out?xe:ke):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?_e:we}function m(e,t){for(var n,r,i,a,o=e.window;;){if(e.lookahead<=ce){if(d(e),e.lookahead<=ce&&t===B)return _e;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ue&&e.strstart>0&&(i=e.strstart-1,r=o[i],r===o[++i]&&r===o[++i]&&r===o[++i])){a=e.strstart+ce;do;while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);e.match_length=ce-(a-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ue?(n=C._tr_tally(e,1,e.match_length-ue),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(s(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===$?(s(e,!0),0===e.strm.avail_out?xe:ke):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?_e:we}function v(e,t){for(var n;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===B)return _e;break}if(e.match_length=0,n=C._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return _e}return e.insert=0,t===$?(s(e,!0),0===e.strm.avail_out?xe:ke):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?_e:we}function y(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function b(e){e.window_size=2*e.w_size,a(e.head),e.max_lazy_match=I[e.level].max_lazy,e.good_match=I[e.level].good_length,e.nice_match=I[e.level].nice_length,e.max_chain_length=I[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ue-1,e.match_available=0,e.ins_h=0}function _(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=K,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new D.Buf16(2*se),this.dyn_dtree=new D.Buf16(2*(2*ae+1)),this.bl_tree=new D.Buf16(2*(2*oe+1)),a(this.dyn_ltree),a(this.dyn_dtree),a(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new D.Buf16(le+1),this.heap=new D.Buf16(2*ie+1),a(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new D.Buf16(2*ie+1),a(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function w(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=Q,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?he:ye,e.adler=2===t.wrap?0:1,t.last_flush=B,C._tr_init(t),j):r(e,z)}function x(e){var t=w(e);return t===j&&b(e.state),t}function k(e,t){return e&&e.state?2!==e.state.wrap?z:(e.state.gzhead=t,j):z}function E(e,t,n,i,a,o){if(!e)return z;var s=1;if(t===V&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),a<1||a>J||n!==K||i<8||i>15||t<0||t>9||o<0||o>X)return r(e,z);8===i&&(i=9);var l=new _;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=a+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+ue-1)/ue),l.window=new D.Buf8(2*l.w_size),l.head=new D.Buf16(l.hash_size),l.prev=new D.Buf16(l.w_size),l.lit_bufsize=1<<a+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new D.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=o,l.method=n,x(e)}function S(e,t){return E(e,t,K,ee,te,Y)}function T(e,t){var n,s,c,f;if(!e||!e.state||t>N||t<0)return e?r(e,z):z;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===be&&t!==$)return r(e,0===e.avail_out?q:z);if(s.strm=e,n=s.last_flush,s.last_flush=t,s.status===he)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=L(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=pe):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=W||s.level<2?4:0),l(s,Ee),s.status=ye);else{var d=K+(s.w_bits-8<<4)<<8,h=-1;h=s.strategy>=W||s.level<2?0:s.level<6?1:6===s.level?2:3,d|=h<<6,0!==s.strstart&&(d|=de),d+=31-d%31,s.status=ye,u(s,d),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===pe)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(e.adler=L(e.adler,s.pending_buf,s.pending-c,c)),o(e),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(e.adler=L(e.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=ge)}else s.status=ge;if(s.status===ge)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=L(e.adler,s.pending_buf,s.pending-c,c)),o(e),c=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>c&&(e.adler=L(e.adler,s.pending_buf,s.pending-c,c)),0===f&&(s.gzindex=0,s.status=me)}else s.status=me;if(s.status===me)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=L(e.adler,s.pending_buf,s.pending-c,c)),o(e),c=s.pending,s.pending===s.pending_buf_size)){f=1;break}f=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,f)}while(0!==f);s.gzhead.hcrc&&s.pending>c&&(e.adler=L(e.adler,s.pending_buf,s.pending-c,c)),0===f&&(s.status=ve)}else s.status=ve;if(s.status===ve&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&o(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ye)):s.status=ye),0!==s.pending){if(o(e),0===e.avail_out)return s.last_flush=-1,j}else if(0===e.avail_in&&i(t)<=i(n)&&t!==$)return r(e,q);if(s.status===be&&0!==e.avail_in)return r(e,q);if(0!==e.avail_in||0!==s.lookahead||t!==B&&s.status!==be){var p=s.strategy===W?v(s,t):s.strategy===Z?m(s,t):I[s.level].func(s,t);if(p!==xe&&p!==ke||(s.status=be),p===_e||p===xe)return 0===e.avail_out&&(s.last_flush=-1),j;if(p===we&&(t===M?C._tr_align(s):t!==N&&(C._tr_stored_block(s,0,0,!1),t===U&&(a(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),o(e),0===e.avail_out))return s.last_flush=-1,j}return t!==$?j:s.wrap<=0?F:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),o(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?j:F)}function A(e){var t;return e&&e.state?(t=e.state.status,t!==he&&t!==pe&&t!==ge&&t!==me&&t!==ve&&t!==ye&&t!==be?r(e,z):(e.state=null,t===ye?r(e,H):j)):z}function R(e,t){var n,r,i,o,s,l,u,c,f=t.length;if(!e||!e.state)return z;if(n=e.state,o=n.wrap,2===o||1===o&&n.status!==he||n.lookahead)return z;for(1===o&&(e.adler=O(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&(a(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new D.Buf8(n.w_size),D.arraySet(c,t,f-n.w_size,n.w_size,0),t=c,f=n.w_size),s=e.avail_in,l=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,d(n);n.lookahead>=ue;){r=n.strstart,i=n.lookahead-(ue-1);do n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+ue-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++;while(--i);n.strstart=r,n.lookahead=ue-1,d(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=ue-1,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=s,n.wrap=o,j}var I,D=n(74),C=n(77),O=n(78),L=n(79),P=n(80),B=0,M=1,U=3,$=4,N=5,j=0,F=1,z=-2,H=-3,q=-5,V=-1,G=1,W=2,Z=3,X=4,Y=0,Q=2,K=8,J=9,ee=15,te=8,ne=29,re=256,ie=re+1+ne,ae=30,oe=19,se=2*ie+1,le=15,ue=3,ce=258,fe=ce+ue+1,de=32,he=42,pe=69,ge=73,me=91,ve=103,ye=113,be=666,_e=1,we=2,xe=3,ke=4,Ee=3;I=[new y(0,0,0,0,h),new y(4,4,8,4,p),new y(4,5,16,8,p),new y(4,6,32,32,p),new y(4,4,16,16,g),new y(8,16,32,32,g),new y(8,16,128,128,g),new y(8,32,128,256,g),new y(32,128,258,1024,g),new y(32,258,258,4096,g)],t.deflateInit=S,t.deflateInit2=E,t.deflateReset=x,t.deflateResetKeep=w,t.deflateSetHeader=k,t.deflate=T,t.deflateEnd=A,t.deflateSetDictionary=R,t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,n){"use strict";function r(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function a(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function o(e){return e<256?le[e]:le[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,n){e.bi_valid>X-n?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>X-e.bi_valid,e.bi_valid+=n-X):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function u(e,t,n){l(e,n[2*t],n[2*t+1])}function c(e,t){var n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0);return n>>>1}function f(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}function d(e,t){var n,r,i,a,o,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,f=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,h=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(a=0;a<=Z;a++)e.bl_count[a]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<W;n++)r=e.heap[n],a=l[2*l[2*r+1]+1]+1,a>p&&(a=p,g++),l[2*r+1]=a,r>u||(e.bl_count[a]++,o=0,r>=h&&(o=d[r-h]),s=l[2*r],e.opt_len+=s*(a+o),f&&(e.static_len+=s*(c[2*r+1]+o)));if(0!==g){do{for(a=p-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[p]--,g-=2}while(g>0);for(a=p;0!==a;a--)for(r=e.bl_count[a];0!==r;)i=e.heap[--n],i>u||(l[2*i+1]!==a&&(e.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),r--)}}function h(e,t,n){var r,i,a=new Array(Z+1),o=0;for(r=1;r<=Z;r++)a[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var s=e[2*i+1];0!==s&&(e[2*i]=c(a[s]++,s))}}function p(){var e,t,n,r,a,o=new Array(Z+1);for(n=0,r=0;r<z-1;r++)for(ce[r]=n,e=0;e<1<<te[r];e++)ue[n++]=r;for(ue[n-1]=r,a=0,r=0;r<16;r++)for(fe[r]=a,e=0;e<1<<ne[r];e++)le[a++]=r;for(a>>=7;r<V;r++)for(fe[r]=a<<7,e=0;e<1<<ne[r]-7;e++)le[256+a++]=r;for(t=0;t<=Z;t++)o[t]=0;for(e=0;e<=143;)oe[2*e+1]=8,e++,o[8]++;for(;e<=255;)oe[2*e+1]=9,e++,o[9]++;for(;e<=279;)oe[2*e+1]=7,e++,o[7]++;for(;e<=287;)oe[2*e+1]=8,e++,o[8]++;for(h(oe,q+1,o),e=0;e<V;e++)se[2*e+1]=5,se[2*e]=c(e,5);de=new i(oe,te,H+1,q,Z),he=new i(se,ne,0,V,Z),pe=new i(new Array(0),re,0,G,Y)}function g(e){var t;for(t=0;t<q;t++)e.dyn_ltree[2*t]=0;for(t=0;t<V;t++)e.dyn_dtree[2*t]=0;for(t=0;t<G;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*Q]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function m(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function v(e,t,n,r){m(e),r&&(s(e,n),s(e,~n)),O.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}function y(e,t,n,r){var i=2*t,a=2*n;return e[i]<e[a]||e[i]===e[a]&&r[t]<=r[n]}function b(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&y(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!y(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function _(e,t,n){var r,i,a,s,c=0;if(0!==e.last_lit)do r=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===r?u(e,i,t):(a=ue[i],u(e,a+H+1,t),s=te[a],0!==s&&(i-=ce[a],l(e,i,s)),r--,a=o(r),u(e,a,n),s=ne[a],0!==s&&(r-=fe[a],l(e,r,s)));while(c<e.last_lit);u(e,Q,t)}function w(e,t){var n,r,i,a=t.dyn_tree,o=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=W,n=0;n<l;n++)0!==a[2*n]?(e.heap[++e.heap_len]=u=n,e.depth[n]=0):a[2*n+1]=0;for(;e.heap_len<2;)i=e.heap[++e.heap_len]=u<2?++u:0,a[2*i]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=o[2*i+1]);for(t.max_code=u,n=e.heap_len>>1;n>=1;n--)b(e,a,n);i=l;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],b(e,a,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,a[2*i]=a[2*n]+a[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,a[2*n+1]=a[2*r+1]=i,e.heap[1]=i++,b(e,a,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],d(e,t),h(a,u,e.bl_count)}function x(e,t,n){var r,i,a=-1,o=t[1],s=0,l=7,u=4;for(0===o&&(l=138,u=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++s<l&&i===o||(s<u?e.bl_tree[2*i]+=s:0!==i?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[2*K]++):s<=10?e.bl_tree[2*J]++:e.bl_tree[2*ee]++,s=0,a=i,0===o?(l=138,u=3):i===o?(l=6,u=3):(l=7,u=4))}function k(e,t,n){var r,i,a=-1,o=t[1],s=0,c=7,f=4;for(0===o&&(c=138,f=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++s<c&&i===o)){if(s<f){do u(e,i,e.bl_tree);while(0!==--s)}else 0!==i?(i!==a&&(u(e,i,e.bl_tree),s--),u(e,K,e.bl_tree),l(e,s-3,2)):s<=10?(u(e,J,e.bl_tree),l(e,s-3,3)):(u(e,ee,e.bl_tree),l(e,s-11,7));s=0,a=i,0===o?(c=138,f=3):i===o?(c=6,f=3):(c=7,f=4)}}function E(e){var t;for(x(e,e.dyn_ltree,e.l_desc.max_code),x(e,e.dyn_dtree,e.d_desc.max_code),w(e,e.bl_desc),t=G-1;t>=3&&0===e.bl_tree[2*ie[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}function S(e,t,n,r){var i;for(l(e,t-257,5),l(e,n-1,5),l(e,r-4,4),i=0;i<r;i++)l(e,e.bl_tree[2*ie[i]+1],3);k(e,e.dyn_ltree,t-1),k(e,e.dyn_dtree,n-1)}function T(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return P;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return B;for(t=32;t<H;t++)if(0!==e.dyn_ltree[2*t])return B;return P}function A(e){ge||(p(),ge=!0),e.l_desc=new a(e.dyn_ltree,de),e.d_desc=new a(e.dyn_dtree,he),e.bl_desc=new a(e.bl_tree,pe),e.bi_buf=0,e.bi_valid=0,g(e)}function R(e,t,n,r){l(e,(U<<1)+(r?1:0),3),v(e,t,n,!0)}function I(e){l(e,$<<1,3),u(e,Q,oe),f(e)}function D(e,t,n,r){var i,a,o=0;e.level>0?(e.strm.data_type===M&&(e.strm.data_type=T(e)),w(e,e.l_desc),w(e,e.d_desc),o=E(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=n+5,n+4<=i&&t!==-1?R(e,t,n,r):e.strategy===L||a===i?(l(e,($<<1)+(r?1:0),3),_(e,oe,se)):(l(e,(N<<1)+(r?1:0),3),S(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),_(e,e.dyn_ltree,e.dyn_dtree)),g(e),r&&m(e)}function C(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(ue[n]+H+1)]++,e.dyn_dtree[2*o(t)]++),e.last_lit===e.lit_bufsize-1}var O=n(74),L=4,P=0,B=1,M=2,U=0,$=1,N=2,j=3,F=258,z=29,H=256,q=H+1+z,V=30,G=19,W=2*q+1,Z=15,X=16,Y=7,Q=256,K=16,J=17,ee=18,te=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ne=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ie=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=512,oe=new Array(2*(q+2));r(oe);var se=new Array(2*V);r(se);var le=new Array(ae);r(le);var ue=new Array(F-j+1);r(ue);var ce=new Array(z);r(ce);var fe=new Array(V);r(fe);var de,he,pe,ge=!1;t._tr_init=A,t._tr_stored_block=R,t._tr_flush_block=D,t._tr_tally=C,t._tr_align=I},function(e,t){"use strict";function n(e,t,n,r){for(var i=65535&e|0,a=e>>>16&65535|0,o=0;0!==n;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0}e.exports=n},function(e,t){"use strict";function n(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}function r(e,t,n,r){var a=i,o=r+n;e^=-1;for(var s=r;s<o;s++)e=e>>>8^a[255&(e^t[s])];return e^-1}var i=n();e.exports=r},function(e,t){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,n){"use strict";function r(e,t){if(t<65537&&(e.subarray&&o||!e.subarray&&a))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var n="",r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n}var i=n(74),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch(s){a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(s){o=!1}for(var l=new i.Buf8(256),u=0;u<256;u++)l[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;l[254]=l[254]=1,t.string2buf=function(e){var t,n,r,a,o,s=e.length,l=0;for(a=0;a<s;a++)n=e.charCodeAt(a),55296===(64512&n)&&a+1<s&&(r=e.charCodeAt(a+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),l+=n<128?1:n<2048?2:n<65536?3:4;for(t=new i.Buf8(l),o=0,a=0;o<l;a++)n=e.charCodeAt(a),55296===(64512&n)&&a+1<s&&(r=e.charCodeAt(a+1),56320===(64512&r)&&(n=65536+(n-55296<<10)+(r-56320),a++)),n<128?t[o++]=n:n<2048?(t[o++]=192|n>>>6,t[o++]=128|63&n):n<65536?(t[o++]=224|n>>>12,t[o++]=128|n>>>6&63,t[o++]=128|63&n):(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63,t[o++]=128|n>>>6&63,t[o++]=128|63&n);return t},t.buf2binstring=function(e){return r(e,e.length)},t.binstring2buf=function(e){for(var t=new i.Buf8(e.length),n=0,r=t.length;n<r;n++)t[n]=e.charCodeAt(n);return t},t.buf2string=function(e,t){var n,i,a,o,s=t||e.length,u=new Array(2*s);for(i=0,n=0;n<s;)if(a=e[n++],a<128)u[i++]=a;else if(o=l[a],o>4)u[i++]=65533,n+=o-1;else{for(a&=2===o?31:3===o?15:7;o>1&&n<s;)a=a<<6|63&e[n++],o--;o>1?u[i++]=65533:a<65536?u[i++]=a:(a-=65536,u[i++]=55296|a>>10&1023,u[i++]=56320|1023&a)}return r(u,i)},t.utf8border=function(e,t){var n;for(t=t||e.length,t>e.length&&(t=e.length),n=t-1;n>=0&&128===(192&e[n]);)n--;return n<0?t:0===n?t:n+l[e[n]]>t?n:t}},function(e,t){"use strict";function n(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}e.exports=n},function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this.options=s.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0===(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var n=o.inflateInit2(this.strm,t.windowBits);if(n!==u.Z_OK)throw new Error(c[n]);this.header=new d,o.inflateGetHeader(this.strm,this.header)}function i(e,t){var n=new r(t);if(n.push(e,!0),n.err)throw n.msg||c[n.err];return n.result}function a(e,t){return t=t||{},t.raw=!0,i(e,t)}var o=n(84),s=n(74),l=n(81),u=n(87),c=n(80),f=n(82),d=n(88),h=Object.prototype.toString;r.prototype.push=function(e,t){var n,r,i,a,c,f,d=this.strm,p=this.options.chunkSize,g=this.options.dictionary,m=!1;if(this.ended)return!1;r=t===~~t?t:t===!0?u.Z_FINISH:u.Z_NO_FLUSH,"string"==typeof e?d.input=l.binstring2buf(e):"[object ArrayBuffer]"===h.call(e)?d.input=new Uint8Array(e):d.input=e,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new s.Buf8(p),d.next_out=0,d.avail_out=p),n=o.inflate(d,u.Z_NO_FLUSH),n===u.Z_NEED_DICT&&g&&(f="string"==typeof g?l.string2buf(g):"[object ArrayBuffer]"===h.call(g)?new Uint8Array(g):g,n=o.inflateSetDictionary(this.strm,f)),n===u.Z_BUF_ERROR&&m===!0&&(n=u.Z_OK,m=!1),n!==u.Z_STREAM_END&&n!==u.Z_OK)return this.onEnd(n),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&n!==u.Z_STREAM_END&&(0!==d.avail_in||r!==u.Z_FINISH&&r!==u.Z_SYNC_FLUSH)||("string"===this.options.to?(i=l.utf8border(d.output,d.next_out),a=d.next_out-i,c=l.buf2string(d.output,i),d.next_out=a,d.avail_out=p-a,a&&s.arraySet(d.output,d.output,i,a,0),this.onData(c)):this.onData(s.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(m=!0)}while((d.avail_in>0||0===d.avail_out)&&n!==u.Z_STREAM_END);return n===u.Z_STREAM_END&&(r=u.Z_FINISH),r===u.Z_FINISH?(n=o.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u.Z_OK):r!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),d.avail_out=0,!0)},r.prototype.onData=function(e){this.chunks.push(e)},r.prototype.onEnd=function(e){e===u.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=s.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.Inflate=r,t.inflate=i,t.inflateRaw=a,t.ungzip=i},function(e,t,n){"use strict";function r(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new y.Buf16(320),this.work=new y.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=U,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new y.Buf32(ge),t.distcode=t.distdyn=new y.Buf32(me),t.sane=1,t.back=-1,I):O}function o(e){var t;return e&&e.state?(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,a(e)):O}function s(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15)?O:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,o(e))):O}function l(e,t){var n,r;return e?(r=new i,e.state=r,r.window=null,n=s(e,t),n!==I&&(e.state=null),n):O}function u(e){return l(e,ye)}function c(e){if(be){var t;for(m=new y.Buf32(512),v=new y.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(x(E,e.lens,0,288,m,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;x(S,e.lens,0,32,v,0,e.work,{bits:5}),be=!1}e.lencode=m,e.lenbits=9,e.distcode=v,e.distbits=5}function f(e,t,n,r){var i,a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new y.Buf8(a.wsize)),r>=a.wsize?(y.arraySet(a.window,t,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),y.arraySet(a.window,t,n-r,i,a.wnext),r-=i,r?(y.arraySet(a.window,t,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0}function d(e,t){var n,i,a,o,s,l,u,d,h,p,g,m,v,ge,me,ve,ye,be,_e,we,xe,ke,Ee,Se,Te=0,Ae=new y.Buf8(4),Re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return O;n=e.state,n.mode===Z&&(n.mode=X),s=e.next_out,a=e.output,u=e.avail_out,o=e.next_in,i=e.input,l=e.avail_in,d=n.hold,h=n.bits,p=l,g=u,ke=I;e:for(;;)switch(n.mode){case U:if(0===n.wrap){n.mode=X;break}for(;h<16;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}if(2&n.wrap&&35615===d){n.check=0,Ae[0]=255&d,Ae[1]=d>>>8&255,n.check=_(n.check,Ae,2,0),d=0,h=0,n.mode=$;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((15&d)!==M){e.msg="unknown compression method",n.mode=de;break}if(d>>>=4,h-=4,xe=(15&d)+8,0===n.wbits)n.wbits=xe;else if(xe>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<xe,e.adler=n.check=1,n.mode=512&d?G:Z,d=0,h=0;break;case $:for(;h<16;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}if(n.flags=d,(255&n.flags)!==M){e.msg="unknown compression method",n.mode=de;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&(Ae[0]=255&d,Ae[1]=d>>>8&255,n.check=_(n.check,Ae,2,0)),d=0,h=0,n.mode=N;case N:for(;h<32;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&(Ae[0]=255&d,Ae[1]=d>>>8&255,Ae[2]=d>>>16&255,Ae[3]=d>>>24&255,n.check=_(n.check,Ae,4,0)),d=0,h=0,n.mode=j;case j:for(;h<16;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&(Ae[0]=255&d,Ae[1]=d>>>8&255,n.check=_(n.check,Ae,2,0)),d=0,h=0,n.mode=F;case F:if(1024&n.flags){for(;h<16;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&(Ae[0]=255&d,Ae[1]=d>>>8&255,n.check=_(n.check,Ae,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=z;case z:if(1024&n.flags&&(m=n.length,m>l&&(m=l),m&&(n.head&&(xe=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),y.arraySet(n.head.extra,i,o,m,xe)),512&n.flags&&(n.check=_(n.check,i,m,o)),l-=m,o+=m,n.length-=m),n.length))break e;n.length=0,n.mode=H;case H:if(2048&n.flags){if(0===l)break e;m=0;do xe=i[o+m++],n.head&&xe&&n.length<65536&&(n.head.name+=String.fromCharCode(xe));while(xe&&m<l);if(512&n.flags&&(n.check=_(n.check,i,m,o)),l-=m,o+=m,xe)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=q;case q:if(4096&n.flags){if(0===l)break e;m=0;do xe=i[o+m++],n.head&&xe&&n.length<65536&&(n.head.comment+=String.fromCharCode(xe));while(xe&&m<l);if(512&n.flags&&(n.check=_(n.check,i,m,o)),l-=m,o+=m,xe)break e}else n.head&&(n.head.comment=null);n.mode=V;case V:if(512&n.flags){
for(;h<16;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}if(d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=de;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Z;break;case G:for(;h<32;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}e.adler=n.check=r(d),d=0,h=0,n.mode=W;case W:if(0===n.havedict)return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=d,n.bits=h,C;e.adler=n.check=1,n.mode=Z;case Z:if(t===A||t===R)break e;case X:if(n.last){d>>>=7&h,h-=7&h,n.mode=ue;break}for(;h<3;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}switch(n.last=1&d,d>>>=1,h-=1,3&d){case 0:n.mode=Y;break;case 1:if(c(n),n.mode=ne,t===R){d>>>=2,h-=2;break e}break;case 2:n.mode=J;break;case 3:e.msg="invalid block type",n.mode=de}d>>>=2,h-=2;break;case Y:for(d>>>=7&h,h-=7&h;h<32;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}if((65535&d)!==(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=65535&d,d=0,h=0,n.mode=Q,t===R)break e;case Q:n.mode=K;case K:if(m=n.length){if(m>l&&(m=l),m>u&&(m=u),0===m)break e;y.arraySet(a,i,o,m,s),l-=m,o+=m,u-=m,s+=m,n.length-=m;break}n.mode=Z;break;case J:for(;h<14;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}if(n.nlen=(31&d)+257,d>>>=5,h-=5,n.ndist=(31&d)+1,d>>>=5,h-=5,n.ncode=(15&d)+4,d>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=ee;case ee:for(;n.have<n.ncode;){for(;h<3;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}n.lens[Re[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[Re[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,Ee={bits:n.lenbits},ke=x(k,n.lens,0,19,n.lencode,0,n.work,Ee),n.lenbits=Ee.bits,ke){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=te;case te:for(;n.have<n.nlen+n.ndist;){for(;Te=n.lencode[d&(1<<n.lenbits)-1],me=Te>>>24,ve=Te>>>16&255,ye=65535&Te,!(me<=h);){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}if(ye<16)d>>>=me,h-=me,n.lens[n.have++]=ye;else{if(16===ye){for(Se=me+2;h<Se;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}if(d>>>=me,h-=me,0===n.have){e.msg="invalid bit length repeat",n.mode=de;break}xe=n.lens[n.have-1],m=3+(3&d),d>>>=2,h-=2}else if(17===ye){for(Se=me+3;h<Se;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}d>>>=me,h-=me,xe=0,m=3+(7&d),d>>>=3,h-=3}else{for(Se=me+7;h<Se;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}d>>>=me,h-=me,xe=0,m=11+(127&d),d>>>=7,h-=7}if(n.have+m>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;m--;)n.lens[n.have++]=xe}}if(n.mode===de)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,Ee={bits:n.lenbits},ke=x(E,n.lens,0,n.nlen,n.lencode,0,n.work,Ee),n.lenbits=Ee.bits,ke){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,Ee={bits:n.distbits},ke=x(S,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,Ee),n.distbits=Ee.bits,ke){e.msg="invalid distances set",n.mode=de;break}if(n.mode=ne,t===R)break e;case ne:n.mode=re;case re:if(l>=6&&u>=258){e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=d,n.bits=h,w(e,g),s=e.next_out,a=e.output,u=e.avail_out,o=e.next_in,i=e.input,l=e.avail_in,d=n.hold,h=n.bits,n.mode===Z&&(n.back=-1);break}for(n.back=0;Te=n.lencode[d&(1<<n.lenbits)-1],me=Te>>>24,ve=Te>>>16&255,ye=65535&Te,!(me<=h);){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}if(ve&&0===(240&ve)){for(be=me,_e=ve,we=ye;Te=n.lencode[we+((d&(1<<be+_e)-1)>>be)],me=Te>>>24,ve=Te>>>16&255,ye=65535&Te,!(be+me<=h);){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}d>>>=be,h-=be,n.back+=be}if(d>>>=me,h-=me,n.back+=me,n.length=ye,0===ve){n.mode=le;break}if(32&ve){n.back=-1,n.mode=Z;break}if(64&ve){e.msg="invalid literal/length code",n.mode=de;break}n.extra=15&ve,n.mode=ie;case ie:if(n.extra){for(Se=n.extra;h<Se;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=ae;case ae:for(;Te=n.distcode[d&(1<<n.distbits)-1],me=Te>>>24,ve=Te>>>16&255,ye=65535&Te,!(me<=h);){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}if(0===(240&ve)){for(be=me,_e=ve,we=ye;Te=n.distcode[we+((d&(1<<be+_e)-1)>>be)],me=Te>>>24,ve=Te>>>16&255,ye=65535&Te,!(be+me<=h);){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}d>>>=be,h-=be,n.back+=be}if(d>>>=me,h-=me,n.back+=me,64&ve){e.msg="invalid distance code",n.mode=de;break}n.offset=ye,n.extra=15&ve,n.mode=oe;case oe:if(n.extra){for(Se=n.extra;h<Se;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=se;case se:if(0===u)break e;if(m=g-u,n.offset>m){if(m=n.offset-m,m>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}m>n.wnext?(m-=n.wnext,v=n.wsize-m):v=n.wnext-m,m>n.length&&(m=n.length),ge=n.window}else ge=a,v=s-n.offset,m=n.length;m>u&&(m=u),u-=m,n.length-=m;do a[s++]=ge[v++];while(--m);0===n.length&&(n.mode=re);break;case le:if(0===u)break e;a[s++]=n.length,u--,n.mode=re;break;case ue:if(n.wrap){for(;h<32;){if(0===l)break e;l--,d|=i[o++]<<h,h+=8}if(g-=u,e.total_out+=g,n.total+=g,g&&(e.adler=n.check=n.flags?_(n.check,a,g,s-g):b(n.check,a,g,s-g)),g=u,(n.flags?d:r(d))!==n.check){e.msg="incorrect data check",n.mode=de;break}d=0,h=0}n.mode=ce;case ce:if(n.wrap&&n.flags){for(;h<32;){if(0===l)break e;l--,d+=i[o++]<<h,h+=8}if(d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=de;break}d=0,h=0}n.mode=fe;case fe:ke=D;break e;case de:ke=L;break e;case he:return P;case pe:default:return O}return e.next_out=s,e.avail_out=u,e.next_in=o,e.avail_in=l,n.hold=d,n.bits=h,(n.wsize||g!==e.avail_out&&n.mode<de&&(n.mode<ue||t!==T))&&f(e,e.output,e.next_out,g-e.avail_out)?(n.mode=he,P):(p-=e.avail_in,g-=e.avail_out,e.total_in+=p,e.total_out+=g,n.total+=g,n.wrap&&g&&(e.adler=n.check=n.flags?_(n.check,a,g,e.next_out-g):b(n.check,a,g,e.next_out-g)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Z?128:0)+(n.mode===ne||n.mode===Q?256:0),(0===p&&0===g||t===T)&&ke===I&&(ke=B),ke)}function h(e){if(!e||!e.state)return O;var t=e.state;return t.window&&(t.window=null),e.state=null,I}function p(e,t){var n;return e&&e.state?(n=e.state,0===(2&n.wrap)?O:(n.head=t,t.done=!1,I)):O}function g(e,t){var n,r,i,a=t.length;return e&&e.state?(n=e.state,0!==n.wrap&&n.mode!==W?O:n.mode===W&&(r=1,r=b(r,t,a,0),r!==n.check)?L:(i=f(e,t,a,a))?(n.mode=he,P):(n.havedict=1,I)):O}var m,v,y=n(74),b=n(78),_=n(79),w=n(85),x=n(86),k=0,E=1,S=2,T=4,A=5,R=6,I=0,D=1,C=2,O=-2,L=-3,P=-4,B=-5,M=8,U=1,$=2,N=3,j=4,F=5,z=6,H=7,q=8,V=9,G=10,W=11,Z=12,X=13,Y=14,Q=15,K=16,J=17,ee=18,te=19,ne=20,re=21,ie=22,ae=23,oe=24,se=25,le=26,ue=27,ce=28,fe=29,de=30,he=31,pe=32,ge=852,me=592,ve=15,ye=ve,be=!0;t.inflateReset=o,t.inflateReset2=s,t.inflateResetKeep=a,t.inflateInit=u,t.inflateInit2=l,t.inflate=d,t.inflateEnd=h,t.inflateGetHeader=p,t.inflateSetDictionary=g,t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t){"use strict";var n=30,r=12;e.exports=function(e,t){var i,a,o,s,l,u,c,f,d,h,p,g,m,v,y,b,_,w,x,k,E,S,T,A,R;i=e.state,a=e.next_in,A=e.input,o=a+(e.avail_in-5),s=e.next_out,R=e.output,l=s-(t-e.avail_out),u=s+(e.avail_out-257),c=i.dmax,f=i.wsize,d=i.whave,h=i.wnext,p=i.window,g=i.hold,m=i.bits,v=i.lencode,y=i.distcode,b=(1<<i.lenbits)-1,_=(1<<i.distbits)-1;e:do{m<15&&(g+=A[a++]<<m,m+=8,g+=A[a++]<<m,m+=8),w=v[g&b];t:for(;;){if(x=w>>>24,g>>>=x,m-=x,x=w>>>16&255,0===x)R[s++]=65535&w;else{if(!(16&x)){if(0===(64&x)){w=v[(65535&w)+(g&(1<<x)-1)];continue t}if(32&x){i.mode=r;break e}e.msg="invalid literal/length code",i.mode=n;break e}k=65535&w,x&=15,x&&(m<x&&(g+=A[a++]<<m,m+=8),k+=g&(1<<x)-1,g>>>=x,m-=x),m<15&&(g+=A[a++]<<m,m+=8,g+=A[a++]<<m,m+=8),w=y[g&_];n:for(;;){if(x=w>>>24,g>>>=x,m-=x,x=w>>>16&255,!(16&x)){if(0===(64&x)){w=y[(65535&w)+(g&(1<<x)-1)];continue n}e.msg="invalid distance code",i.mode=n;break e}if(E=65535&w,x&=15,m<x&&(g+=A[a++]<<m,m+=8,m<x&&(g+=A[a++]<<m,m+=8)),E+=g&(1<<x)-1,E>c){e.msg="invalid distance too far back",i.mode=n;break e}if(g>>>=x,m-=x,x=s-l,E>x){if(x=E-x,x>d&&i.sane){e.msg="invalid distance too far back",i.mode=n;break e}if(S=0,T=p,0===h){if(S+=f-x,x<k){k-=x;do R[s++]=p[S++];while(--x);S=s-E,T=R}}else if(h<x){if(S+=f+h-x,x-=h,x<k){k-=x;do R[s++]=p[S++];while(--x);if(S=0,h<k){x=h,k-=x;do R[s++]=p[S++];while(--x);S=s-E,T=R}}}else if(S+=h-x,x<k){k-=x;do R[s++]=p[S++];while(--x);S=s-E,T=R}for(;k>2;)R[s++]=T[S++],R[s++]=T[S++],R[s++]=T[S++],k-=3;k&&(R[s++]=T[S++],k>1&&(R[s++]=T[S++]))}else{S=s-E;do R[s++]=R[S++],R[s++]=R[S++],R[s++]=R[S++],k-=3;while(k>2);k&&(R[s++]=R[S++],k>1&&(R[s++]=R[S++]))}break}}break}}while(a<o&&s<u);k=m>>3,a-=k,m-=k<<3,g&=(1<<m)-1,e.next_in=a,e.next_out=s,e.avail_in=a<o?5+(o-a):5-(a-o),e.avail_out=s<u?257+(u-s):257-(s-u),i.hold=g,i.bits=m}},function(e,t,n){"use strict";var r=n(74),i=15,a=852,o=592,s=0,l=1,u=2,c=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],d=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],h=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,n,p,g,m,v,y){var b,_,w,x,k,E,S,T,A,R=y.bits,I=0,D=0,C=0,O=0,L=0,P=0,B=0,M=0,U=0,$=0,N=null,j=0,F=new r.Buf16(i+1),z=new r.Buf16(i+1),H=null,q=0;for(I=0;I<=i;I++)F[I]=0;for(D=0;D<p;D++)F[t[n+D]]++;for(L=R,O=i;O>=1&&0===F[O];O--);if(L>O&&(L=O),0===O)return g[m++]=20971520,g[m++]=20971520,y.bits=1,0;for(C=1;C<O&&0===F[C];C++);for(L<C&&(L=C),M=1,I=1;I<=i;I++)if(M<<=1,M-=F[I],M<0)return-1;if(M>0&&(e===s||1!==O))return-1;for(z[1]=0,I=1;I<i;I++)z[I+1]=z[I]+F[I];for(D=0;D<p;D++)0!==t[n+D]&&(v[z[t[n+D]]++]=D);if(e===s?(N=H=v,E=19):e===l?(N=c,j-=257,H=f,q-=257,E=256):(N=d,H=h,E=-1),$=0,D=0,I=C,k=m,P=L,B=0,w=-1,U=1<<L,x=U-1,e===l&&U>a||e===u&&U>o)return 1;for(;;){S=I-B,v[D]<E?(T=0,A=v[D]):v[D]>E?(T=H[q+v[D]],A=N[j+v[D]]):(T=96,A=0),b=1<<I-B,_=1<<P,C=_;do _-=b,g[k+($>>B)+_]=S<<24|T<<16|A|0;while(0!==_);for(b=1<<I-1;$&b;)b>>=1;if(0!==b?($&=b-1,$+=b):$=0,D++,0===--F[I]){if(I===O)break;I=t[n+v[D]]}if(I>L&&($&x)!==w){for(0===B&&(B=L),k+=C,P=I-B,M=1<<P;P+B<O&&(M-=F[P+B],!(M<=0));)P++,M<<=1;if(U+=1<<P,e===l&&U>a||e===u&&U>o)return 1;w=$&x,g[w]=L<<24|P<<16|k-m|0}}return 0!==$&&(g[k+$]=I-B<<24|64<<16|0),y.bits=L,0}},function(e,t){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t){"use strict";function n(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}e.exports=n},function(e,t,n){!function(t){var n=this;e.exports=t(n)}(function(e){"use strict";function t(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}function n(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}var r="panda-sdk-wukong",i="0.1.1",a=function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}function r(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&r(e.listener)}var i=e.prototype;return i.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){if(!r(n))throw new TypeError("listener must be a function");var i,a=this.getListenersAsObject(e),o="object"==typeof n;for(i in a)a.hasOwnProperty(i)&&t(a[i],n)===-1&&a[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var r,i,a=this.getListenersAsObject(e);for(i in a)a.hasOwnProperty(i)&&(r=t(a[i],n),r!==-1&&a[i].splice(r,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var r,i,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)a.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},i.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,r,i,a,o,s=this.getListenersAsObject(e);for(a in s)if(s.hasOwnProperty(a))for(n=s[a].slice(0),i=0;i<n.length;i++)r=n[i],r.once===!0&&this.removeListener(e,r.listener),o=r.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e}(),o=function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=function(e){for(var t={},n=0,r=e.length;n<r;n++)t[e.charAt(n)]=n;return t}(t),r=String.fromCharCode,i=function(e){var t;return e.length<2?(t=e.charCodeAt(0),t<128?e:t<2048?r(192|t>>>6)+r(128|63&t):r(224|t>>>12&15)+r(128|t>>>6&63)+r(128|63&t)):(t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320),r(240|t>>>18&7)+r(128|t>>>12&63)+r(128|t>>>6&63)+r(128|63&t))},a=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,o=function(e){return e.replace(a,i)},s=function(e){var n=[0,2,1][e.length%3],r=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),i=[t.charAt(r>>>18),t.charAt(r>>>12&63),n>=2?"=":t.charAt(r>>>6&63),n>=1?"=":t.charAt(63&r)];return i.join("")},l=e.btoa?function(t){return e.btoa(t)}:function(e){return e.replace(/[\s\S]{1,3}/g,s)},u=function(e){return l(o(e))},c=function(e,t){return t?u(String(e)).replace(/[+\/]/g,function(e){return"+"===e?"-":"_"}).replace(/\=/g,""):u(String(e))},f=function(e){return c(e,!0)},d=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),h=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return r((n>>>10)+55296)+r((1023&n)+56320);case 3:return r((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return r((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},p=function(e){return e.replace(d,h)},g=function(e){var t=e.length,i=t%4,a=(t>0?n[e.charAt(0)]<<18:0)|(t>1?n[e.charAt(1)]<<12:0)|(t>2?n[e.charAt(2)]<<6:0)|(t>3?n[e.charAt(3)]:0),o=[r(a>>>16),r(a>>>8&255),r(255&a)];return o.length-=[0,0,2,1][i],o.join("")},m=e.atob?function(t){return e.atob(t)}:function(e){return e.replace(/[\s\S]{1,4}/g,g)},v=function(e){return p(m(e))},y=function(e){return v(String(e).replace(/[-_]/g,function(e){return"-"===e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))};return{atob:m,btoa:l,fromBase64:y,toBase64:c,utob:o,encode:c,encodeURI:f,btou:p,decode:y}}(),s=e.document,l=e.Buffer,u=e.ArrayBuffer,c=0,f=function(e){var n;e=e||{},this.options={};for(n in this.defaultOptions)this.options[n]=this.defaultOptions[n];for(n in e)this.options[n]=e[n];this.options.listeners&&this.addListeners(this.options.listeners),this.cdid=t(),this.id="wukong_ws_"+ ++c,this._tryRequestAddrCount=0,this._tryConnectSocketCount=0,this._addrExpires=0,this._handshaked=!1,this.connected=!1,this._log("Use ["+r+"-v"+i+"]"),this._connectWukong()};return n(f,a),f.prototype.version=i,f.prototype.ve=1,f.prototype.op={heartbeat:1,heartbeatack:2,binduser:3,binduserack:4,payload:7},f.prototype.lens={ve:1,op:1,dl:4,noop:4},f.prototype.defaultOptions={app:1,debug:2,caller:r,infoUrl:"https://wukong.gate.panda.tv/getinfo",wsProtocal:"wss:",heartbeatInterval:3e4,reconnectInterval:1e3,maxReconnectInterval:1e4},f.prototype._connectWukong=function(){var e=this;clearTimeout(this._tryConnectWukongTimer),this._tryRequestAddrCount>10||this._requestWukongAddr(function(t,n){t?(e._warn(t.toString()),e._retryRequestAddr()):(e._addrData=n,e._addrList=n.addrs,e._addrExpires=(new Date).getTime()+3e4,e._processWukongAddr())})},f.prototype._processWukongAddr=function(){this._addrList&&this._addrList.length>0?(this._currAddr=this._addrList.shift(),this._initSocket()):this._retryRequestAddr()},f.prototype._retryRequestAddr=function(){var e=this;if(this._tryRequestAddrCount<10){++this._tryRequestAddrCount;var t=Math.ceil(6*Math.random()+4);this._warn(t+"秒后重新获取 wukong ip address"),this._tryConnectWukongTimer=setTimeout(function(){e._connectWukong()},1e3*t)}else this._warn("超过最大重试次数，停止重试"),this.close(),this.trigger("fatalerror")},f.prototype._requestWukongAddr=function(e){var t=this,n=0,r=function(){clearTimeout(t._tryRequestTimer),t._tryRequestTimer=null;var i="app="+encodeURIComponent(t.options.app)+"&cdid="+t.cdid+"&_caller="+encodeURIComponent(t.options.caller)+"&protocol=ws&_="+(new Date).getTime(),a=t.options.infoUrl+"?"+i;t._ajax({url:a,success:function(n,r){var o;try{o=JSON.parse(n)}catch(s){return e(new Error("wukong api '/getinfo', parse response body error: "+s.toString()))}0===o.errno?(o=o.data,t._log("wukong api '/getinfo', 响应数据："+n),e(null,o)):402===o.errno?(t._log("wukong api '/getinfo', 用户未登录, 响应数据："+n),t.close()):(e(new Error("wukong api '/getinfo', 响应数据异常："+n)),t._report({id:"2",code:r,err_code:o.errno,request:a,params:i,error:o.errmsg}))},error:function(o,s){n<3?(n++,t._warn("3秒后重新请求 '/getinfo'"),t._tryRequestTimer=setTimeout(r,3e3)):e(new Error("wukong api '/getinfo' 请求失败，重试次数："+n)),t._report({id:"2",code:s,err_code:"",request:a,params:i,error:o})}})};r()},f.prototype._initSocket=function(){var e=this;this.socket=new WebSocket(this.options.wsProtocal+"//"+this._currAddr),this.socket.onopen=function(){e.connected=!0,e._tryRequestAddrCount=0,e._log("打开连接 wukong websocket ["+e._currAddr+"]"),e._bindUser(),e._initHeartbeat(),e.trigger("open")},this.socket.onmessage=function(t){e._processMessage(t.data,function(t){e.trigger("message",[t.data])})},this.socket.onclose=function(){if(clearTimeout(e._reconnectSocketTimer),e._reconnectSocketTimer=null,e._clearHeartbeat(),e.socket.onopen=e.socket.onmessage=e.socket.onclose=null,e.socket=null,e.connected=!1,e._forceClose)e._log("连接关闭 wukong websocket closed"),e._forceClose=!1,e._tryConnectSocketCount=0,e._addrList=null,e._addrExpires=0,e.trigger("close");else if(e._forceClose=!1,e._addrExpires>(new Date).getTime()&&e._tryConnectSocketCount<5){++e._tryConnectSocketCount;var t=e.options.reconnectInterval*e._tryConnectSocketCount+1;t=t>e.options.maxReconnectInterval?e.options.maxReconnectInterval:t,e._warn(Math.round(t/1e3)+"秒后重新连接 ["+e._currAddr+"] try count:"+e._tryConnectSocketCount),e._reconnectSocketTimer=setTimeout(function(){e._initSocket()},t)}else e._tryConnectSocketCount=0,e._addrList=null,e._addrExpires=0,e._processWukongAddr()},this.socket.onerror=function(){e.socket.onopen=e.socket.onmessage=null,e._warn("连接发生错误 wukong websocket ["+e._currAddr+"]"),e.connected?e._report({id:"104",host:e._currAddr}):e._report({id:"101",host:e._currAddr}),e.trigger("error")}},f.prototype._bindUser=function(){var t=e.PANDA_MONITOR?e.PANDA_MONITOR.util.getPlatform():"",n=s.cookie.match(/pdft=(\w+)/),r="app:"+this.options.app+"\nrid:"+this._addrData.rid+"\ncdid:"+this._addrData.cdid+"\nauthtype:"+this._addrData.authtype+"\nts:"+this._addrData.ts+"\nsign:"+this._addrData.sign+"\nheartbeat:"+this.options.heartbeatInterval+"\naccept:json\npdft:"+(n&&n[1]?n[1]:"")+"\nplat:jssdk"+(t?"_"+t:"")+"\nnetwork:unknown\nversion:"+this.version;this._lastBindUser=r;var i=new dcodeIO.ByteBuffer;i.writeInt8(this.ve).writeInt8(this.op.binduser).writeInt32(r.length).writeInt32(0).writeUTF8String(r).flip(),this.socket.send(i.toBuffer()),this._log("bind user ["+r.replace(/\n/g," ")+"]")},f.prototype._initHeartbeat=function(){var e=this;clearInterval(this._heartbeatTimer),this._heartbeatTimer=setInterval(function(){e._heartbeatTimeout=setTimeout(function(){e._report({id:"105",host:e._currAddr})},6e4);var t=new dcodeIO.ByteBuffer;t.writeInt8(e.ve).writeInt8(e.op.heartbeat).writeInt64(0).flip(),e.socket.send(t.toBuffer())},this.options.heartbeatInterval)},f.prototype._clearHeartbeat=function(){clearTimeout(this._heartbeatTimeout),clearInterval(this._heartbeatTimer),this._heartbeatTimer=this._heartbeatTimeout=null},f.prototype._processMessage=function(e,t){var n=this;try{if(l&&e instanceof l||u&&e instanceof u)this._readMessage(e,t);else{var r=new FileReader;r.onload=function(){try{n._readMessage(r.result,t)}catch(e){n._error("解析 socket 消息失败：",e)}},r.readAsArrayBuffer(e)}}catch(i){this._error("解析 socket 消息失败：",i)}},f.prototype._readMessage=function(e,t){var n,r,i=0,a=new dcodeIO.ByteBuffer;if(a.append(e,"binary").flip(),n=a.readInt8(i),this.ve!==n)throw new Error("Wrong value of ve: "+n);if(i+=this.lens.ve,r=a.readInt8(i),i+=this.lens.op,r===this.op.binduserack)this._readBindUserAck(a,r,i);else if(r===this.op.heartbeatack)clearTimeout(this._heartbeatTimeout);else{if(r!==this.op.payload)throw new Error("Wrong value of op: "+r);this._handshaked&&this._readMessageBody(a,r,i,t)}},f.prototype._readBindUserAck=function(e,t,n){var r=e.readInt32(n);if(n+this.lens.dl+this.lens.noop+r!==e.limit)throw new Error("Out of limit, read binduser ack offset is "+(n+this.lens.dl+this.lens.noop+r)+", buffer limit is "+e.limit);n+=this.lens.dl+this.lens.noop;var i=e.readUTF8String(r,dcodeIO.ByteBuffer.METRICS_BYTES,n).string;i=i.split("\n");for(var a={},o=0;o<i.length;o++)if(i[o]){var s=i[o].split(":");a[s[0]]=s[1]}if("0"!==a.r)return this._warn("bind user failed! error code: "+(a.r||"-1")+",","currAddr ["+this._currAddr+"]","data ["+(this._lastBindUser||"").replace(/\n/g," ")+"]"),this._report({id:"102",host:this._currAddr,params:this._lastBindUser,error:a.r||"-1"});this._handshaked=!0;var l=(this._lastBindUser||"").replace(/\n/g," ");this._log("bind user succeed!","currAddr ["+this._currAddr+"]","data ["+l+"]")},f.prototype._readMessageBody=function(e,t,n,r){var i=e.readInt32(n);if(n+this.lens.dl+this.lens.noop+i!==e.limit)throw new Error("Out of limit, read chat message offset is "+(n+this.lens.dl+this.lens.noop+i)+", buffer limit is "+e.limit);n+=this.lens.dl+this.lens.noop;var a=e.readUTF8String(i,dcodeIO.ByteBuffer.METRICS_BYTES,n).string;try{a=JSON.parse(a),a.body&&a.body.body&&(a.body.body=JSON.parse(o.decode(a.body.body))),this._debug("Receive message:",JSON.stringify(a)),r({op:t,data:a})}catch(s){}},f.prototype._clear=function(){this.connected=!1,clearTimeout(this._tryConnectWukongTimer),clearTimeout(this._reconnectSocketTimer),clearTimeout(this._tryRequestTimer),this._clearHeartbeat(),this._tryConnectWukongTimer=this._reconnectSocketTimer=null,this._tryRequestTimer=null,this._currAddr=null,this._addrList=null,this._addrExpires=0,this._tryRequestAddrCount=0,this._tryConnectSocketCount=0,this.socket?this.socket.close():(this.socket=null,this._forceClose=!1)},f.prototype.reconnect=function(){this._clear(),this._connectWukong()},f.prototype.close=function(){this._forceClose=!0,this._clear()},f.prototype.getCurrentAddr=function(){return this._currAddr||""},f.prototype._error=function(){var e=[].slice.call(arguments,0);e.unshift("["+this.id+"]"),console&&console.error.apply(console,e)},f.prototype._warn=function(){var e=[].slice.call(arguments,0);e.unshift("["+this.id+"]"),this.options.debug<3&&console&&console.warn.apply(console,e)},f.prototype._log=function(){var e=[].slice.call(arguments,0);e.unshift("["+this.id+"]"),this.options.debug<2&&console&&console.log.apply(console,e)},f.prototype._debug=function(){var e=[].slice.call(arguments,0);e.unshift("["+this.id+"]"),this.options.debug<1&&console&&console.debug.apply(console,e)},f.prototype._ajax=function(e){e=e||{},e.type=e.type||"GET",e.data=e.data||null;var t=new XMLHttpRequest,n=function(){clearTimeout(t.__timeoutTimer),t.__timeoutTimer=null};t.__timeoutTimer=setTimeout(function(){n(),t.abort(),e.error&&e.error("request timeout.",0)},e.timeout||3e4),t.onload=function(){var r=t.status;n(),r>=200&&r<300||304===r?e.success&&e.success(t.responseText,r):e.error&&e.error(r+" error in fetching data.",r)},t.onerror=function(){n(),e.error&&e.error("unknown error",0)},t.open(e.type,e.url,!0),t.withCredentials=!0,t.send(e.data)},f.prototype._report=function(t){var n,a=s.cookie.match(/I=r%3D(\d+)/),o=new Image,l="",u=e.PANDA_MONITOR?e.PANDA_MONITOR.util.getPlatform():"",c={biz:"wukong",type:"error",plat:u||"pc_web",channel:"",model:"jssdk",version:r+"-v"+i,network:"unknown",room:e.PANDA_MONITOR?e.PANDA_MONITOR.util.getRoomId():"",uid:a&&a[1]?a[1]:"",ref:s.referrer,ua:navigator.userAgent};for(n in t)c[n]=t[n];for(n in c)l+="&"+encodeURIComponent(n)+"="+encodeURIComponent(c[n]);l=l.substr(1),o.src="https://dot.gate.panda.tv/report?"+l,o=null},f})},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a,o=null!=t?t:{},s=n.helperMissing,l="function",u=e.escapeExpression;return'<div class="panda-live-notify-item">\n  <a href="'+u((a=null!=(a=n.roomUrl||(null!=t?t.roomUrl:t))?a:s,typeof a===l?a.call(o,{name:"roomUrl",hash:{},data:i}):a))+'" class="panda-live-notify-content" target="_blank"><i></i> <span>直播提醒：</span>'+u((a=null!=(a=n.nickName||(null!=t?t.nickName:t))?a:s,typeof a===l?a.call(o,{name:"nickName",hash:{},data:i}):a))+'开播啦，与TA互动吧！</a>\n  <a href="#" class="panda-live-notify-close"></a>\n</div>'},useData:!0})},function(e,t){!function(e){e(jQuery)}(function(e){function t(e){return s.raw?e:encodeURIComponent(e)}function n(e){return s.raw?e:decodeURIComponent(e)}function r(e){return t(s.json?JSON.stringify(e):String(e))}function i(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(o," ")),s.json?JSON.parse(e):e}catch(t){}}function a(t,n){var r=s.raw?t:i(t);return e.isFunction(n)?n(r):r}var o=/\+/g,s=e.cookie=function(i,o,l){if(arguments.length>1&&!e.isFunction(o)){if(l=e.extend({},s.defaults,l),"number"==typeof l.expires){var u=l.expires,c=l.expires=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*u)}return document.cookie=[t(i),"=",r(o),l.expires?"; expires="+l.expires.toUTCString():"",l.path?"; path="+l.path:"",l.domain?"; domain="+l.domain:"",l.secure?"; secure":""].join("")}for(var f=i?void 0:{},d=document.cookie?document.cookie.split("; "):[],h=0,p=d.length;h<p;h++){var g=d[h].split("="),m=n(g.shift()),v=g.join("=");if(i===m){f=a(v,o);break}i||void 0===(v=a(v))||(f[m]=v)}return f};s.defaults={},e.removeCookie=function(t,n){return e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t)}})},function(e,t,n){"use strict";function r(){v=b.get(),v["zoomtips-nolonger-show"]||!i()||$("html").hasClass("ie8")||p()||g()||(s(),a())}function i(){var e=!0;return $.each(S,function(){if(window.location.href.match(this))return e=!1,!1}),e}function a(){$(window).resize(o)}function o(){v=b.get(),v["zoomtips-nolonger-show"]||s()}function s(){y=$(".zoom-tips-wrap");var e=m();f(e),y.length>0&&!y.hasClass("zoom-tips-out")&&100!=e||(100!=e?(0==y.length&&l(),u()):c())}function l(){$("body").append(_()),y=$(".zoom-tips-wrap"),$(".zoom-tips-btn").on("click",d),$(".zoom-tips-close").on("click",h)}function u(){y.removeClass("zoom-tips-out").addClass("zoom-tips-in"),y.stop(!0,!0),y.animate({right:"3px"},w)}function c(){if(!y.hasClass("zoom-tips-out")){y.removeClass("zoom-tips-in").addClass("zoom-tips-out"),y.stop(!0,!0);var e=y.width()+30;y.animate({right:-e+"px"},w)}}function f(e){var t,n;e<x?(t=parseInt(k*(x/e)),n=parseInt(E*(x/e)),y.css({width:t,height:n})):(t=parseInt(k*x/e),n=parseInt(E*x/e),y.css({width:t,height:n}))}function d(){b.set("zoomtips-nolonger-show",!0),y.hasClass("zoom-tips-out")||c()}function h(){c()}function p(){return navigator.userAgent.indexOf("Safari")>-1&&navigator.userAgent.indexOf("Chrome")<1}function g(){return navigator.userAgent.indexOf("Mac OS X")!=-1}function m(){var e=window.screen;return void 0!=window.devicePixelRatio?Math.round(100*window.devicePixelRatio):e.deviceXDPI&&e.logicalXDPI?Math.round(e.deviceXDPI/e.logicalXDPI*100):void 0}var v,y,b=n(93),_=n(96),w=1200,x=100,k=370,E=125,S=["sidebarframe","roomframe","news"];r()},function(e,t,n){"user strict";function r(e){return e=e||[],e=$(e).filter(function(e,t){return!($.inArray(t,d)>-1)}).toArray(),0===e.length?$.when($.extend({},s)):u.getUserSetting({keys:e.join(",")}).done(function(e){var t;if(e)for(t in e)e.hasOwnProperty(t)&&(s[t]=e[t],d.push(t));return c.set(f,JSON.stringify(s)),$.extend({},s)})}function i(e,t,n){var r=s[e];s[e]=t,c.set(f,JSON.stringify(s)),l.triggerEvent("user-setting-changed",{key:e,oldValue:r,newValue:t}),n&&o(e,t)}function a(e){return e?s[e]:$.extend({},s)}function o(e,t){return u.saveUserSetting({key:e,val:t})}n(94);var s,l=n(13),u=n(95),c=window.LS,f="panda.tv/user/setting",d=[];try{s=c.get(f),s=s?JSON.parse(s):{}}catch(h){s={}}e.exports={init:r,set:i,get:a}},function(e,t){!function(e){var t,n=function(){},r=e.document,i={set:n,get:n,remove:n,clear:n,each:n,obj:n,length:0};!function(){if("localStorage"in e)try{return void(t=e.localStorage)}catch(n){}var i,a,o=r.getElementsByTagName("head")[0],s=e.location.hostname||"localStorage",l=new Date;if(o.addBehavior){try{a=new ActiveXObject("htmlfile"),a.open(),a.write('<script>document.w=window;</script><iframe src="http://www.panda.tv/favicon.ico"></iframe>'),a.close(),i=a.w.frames[0].document,o=i.createElement("head"),i.appendChild(o)}catch(n){o=r.getElementsByTagName("head")[0]}try{l.setDate(l.getDate()+36500),o.addBehavior("#default#userData"),o.expires=l.toUTCString(),o.load(s),o.save(s)}catch(n){return}var u,c;try{u=o.XMLDocument.documentElement,c=u.attributes}catch(n){return}var f="p__hack_",d="m-_-c",h=new RegExp("^"+f),p=new RegExp(d,"g"),g=function(e){return encodeURIComponent(f+e).replace(/%/g,d)},m=function(e){return decodeURIComponent(e.replace(p,"%")).replace(h,"")};t={length:c.length,isVirtualObject:!0,getItem:function(e){return(c.getNamedItem(g(e))||{nodeValue:null}).nodeValue||u.getAttribute(g(e))},setItem:function(e,t){try{u.setAttribute(g(e),t),o.save(s),this.length=c.length}catch(n){}},removeItem:function(e){try{u.removeAttribute(g(e)),o.save(s),this.length=c.length}catch(t){}},clear:function(){for(;c.length;)this.removeItem(c[0].nodeName);this.length=0},key:function(e){return c[e]?m(c[e].nodeName):void 0}},"localStorage"in e||(e.localStorage=t)}else try{t=e.localStorage}catch(n){t=null}}(),e.LS=t?{set:function(e,n){void 0!==this.get(e)&&this.remove(e),t.setItem(e,n),this.length=t.length},get:function(e){var n=t.getItem(e);return null===n?void 0:n},remove:function(e){t.removeItem(e),this.length=t.length},clear:function(){t.clear(),this.length=0},each:function(e){var t,n=this.obj(),r=e||function(){};for(t in n)if(r.call(this,t,this.get(t))===!1)break},obj:function(){var e,n,r={},i=0;if(t.isVirtualObject)r=t.key(-1);else for(e=t.length;i<e;i++)n=t.key(i),r[n]=this.get(n);return r},length:t.length
}:i,e.jQuery&&(e.jQuery.LS=e.LS)}(window)},function(e,t){"use strict";function n(e){var t=$.Deferred();return PDR.ajax("/ajax_mget_uconfig",{data:e,dataType:"json",cache:!1,timeout:5e3}).done(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.resolve(null)}).fail(function(){t.resolve(null)}),t.promise()}function r(e){var t=$.Deferred();return PDR.ajax("/ajax_set_uconfig",{data:e,cache:!1,dataType:"json"}).done(function(e){e&&0==e.errno&&e.data?t.resolve(e.data):t.reject(null)}).fail(function(){t.reject(null)}),t.promise()}e.exports={getUserSetting:n,saveUserSetting:r}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div class="zoom-tips-wrap">\n  <div class="zoom-tips-close"></div>\n  <div class="zoom-tips-btn"></div>\n</div>'},useData:!0})},function(e,t,n){"use strict";function r(){try{window.top.location.reload()}catch(e){window.top.location.href=window.top.location.href}}function i(e){_.selfInfoInterface.getSelfInfo().done(function(t){if(t.rid>0){if(b.get("user_thirdlogin_first_modify_name_"+t.rid))return!1;b.set("user_thirdlogin_first_modify_name_"+t.rid,!0),h=$.extend({},w,e);var n=h.contentTpl||m;c=$(p.render(h).el),c.find(".ruc-dialog-content").html(n()),a()}})}function a(){c.on("click",".enter-active-btn",s),c.on("blur",".ruc-modify-nickname-val",o)}function o(e){var t=$(e.target)[0].value,n=y.checkNickname(t);d=c.find(".ruc-modify-nickname-enter"),f=c.find(".ruc-error-tips"),n.then(function(){f.html(""),d.addClass("enter-active-btn")}).fail(function(e){var t=e.errmsg;f.html(t).addClass("error")})}function s(){var e,t=c.find(".ruc-modify-nickname-val").val();return t?(e=y.checkNickname(t),void e.then(function(){_.selfInfoInterface.setUserInfo({nickname:t}).done(function(e){c.hide(),l(t)}).fail(function(e){u(e)})}).fail(function(e){var t=e.errmsg;f.html(t).addClass("error"),d.removeClass("enter-active-btn")})):void u("昵称为空，请输入昵称")}function l(e){_.selfInfoInterface.updateSelfInfo(),g.triggerEvent("user-info-nickname-updated",e)}function u(e){f.html(e).addClass("error")}var c,f,d,h,p=Ruc.dialog,g=n(13),m=n(98),v=n(99),y=Ruc.utils,b=n(93),_=n(3),w={type:"modify",modifyFunc:r,showType:"modify",tpl:v};e.exports={init:i}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div class="ruc-modify-nickname">\n  <h3 class="ruc-modify-nickname-title">填写昵称</h3>\n  <span class="ruc-modify-nickname-tips">该昵称一旦确定，不能修改</span>\n  <input type="text" class="ruc-modify-nickname-val">\n  <span class="ruc-error-tips"></span>\n  <div class="ruc-modify-nickname-enter">进入熊猫</div>\n</div>\n'},useData:!0})},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a;return'<div class="ruc-dialog-wrap '+e.escapeExpression((a=null!=(a=n.type||(null!=t?t.type:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"type",hash:{},data:i}):a))+'">\n    <div class="ruc-dialog-header">\n      <div class="ruc-dialog-close"><a href="javascript:;"></a></div>\n    </div>\n    <div class="ruc-dialog-content">\n    </div>\n</div>\n'},useData:!0})},function(e,t,n){var r=n(101);e.exports.follow={initialize:r.initializeFollow},e.exports.watched={initialize:r.initializeWatched}},function(e,t,n){"use strict";function r(e,t,n){g=n||{},_=t,f(e,t)}function i(){w=!0,_.html(y()),h("/ajax_get_watch_history",{pageno:1,pagenum:20}).then(u).fail(c)}function a(e,t,n){p=n||{},b=t,d(e,t)}function o(){x=!0,b.html(y()),h("/ajax_get_follow_rooms",{pageno:1,pagenum:20,status:2}).then(s).fail(l)}function s(e){b.html(v({lists:{items:e},link:"/myfollow",baseUrl:p.baseUrl}))}function l(){b.html(v({empty:"你订阅的主播还没有开播"}))}function u(e){_.html(v({lists:{items:e},link:"/watchhistory",baseUrl:g.baseUrl}))}function c(){w=!0,_.html(v({empty:"暂时还没有历史记录哟"}))}function f(e,t){e.mouseenter(function(){t.show(),w||i()}),e.mouseleave(function(){t.hide()})}function d(e,t){e.mouseenter(function(){t.stop(!0,!0).fadeIn(300),x||o()}),e.mouseleave(function(){t.stop(!0,!1).fadeOut(300)})}function h(e,t){var n=$.Deferred();return m.getData(e,t).done(function(e){0==e.errno&&e.data&&e.data.items&&e.data.items.length>0?(e.data.items=e.data.items.slice(0,5),n.resolve(e.data.items)):n.reject()}),n.promise()}var p,g,m=n(4),v=n(102),y=(n(104),n(107)),b=null,_=null,w=!1,x=!1;t.initializeWatched=r,t.initializeFollow=a},function(e,t,n){function r(e){return e&&(e.__esModule?e["default"]:e)}var i=n(29);e.exports=(i["default"]||i).template({1:function(e,t,n,r,i,a,o){var s,l=null!=t?t:{};return'    <ul class="follow-list">\n'+(null!=(s=n.each.call(l,null!=(s=null!=t?t.lists:t)?s.items:s,{name:"each",hash:{},fn:e.program(2,i,0,a,o),inverse:e.noop,data:i}))?s:"")+'    </ul>\n    <a href="'+(null!=(s=n["if"].call(l,null!=t?t.baseUrl:t,{name:"if",hash:{},fn:e.program(9,i,0,a,o),inverse:e.noop,data:i}))?s:"")+e.escapeExpression(e.lambda(null!=t?t.link:t,t))+'" class="more-info" target="_blank">查看更多</a>\n'},2:function(e,t,i,a,o,s,l){var u,c=null!=t?t:{},f=e.lambda,d=e.escapeExpression,h=i.blockHelperMissing;return'        <li class="list-item">\n            <a class="item-inner" href="'+(null!=(u=i["if"].call(c,null!=l[1]?l[1].baseUrl:l[1],{name:"if",hash:{},fn:e.program(3,o,0,s,l),inverse:e.noop,data:o}))?u:"")+"/"+d(f(null!=t?t.id:t,t))+'" target="_blank">\n'+(null!=(u=h.call(t,f(null!=t?t.userinfo:t,t),{name:"userinfo",hash:{},fn:e.program(5,o,0,s,l),inverse:e.noop,data:o}))?u:"")+'                <div class="live-name" title="'+d(f(null!=t?t.name:t,t))+'">\n                    '+d(f(null!=t?t.name:t,t))+'\n                </div>\n\n                <div class="live-information">\n'+(null!=(u=h.call(t,f(null!=t?t.userinfo:t,t),{name:"userinfo",hash:{},fn:e.program(7,o,0,s,l),inverse:e.noop,data:o}))?u:"")+'                    <span class="live-information-item live-fans-total" title="'+d(r(n(103)).call(c,null!=t?t.person_num:t,{name:"getLiveNum",hash:{},data:o}))+'">\n                        <i class="icon-fans-num"></i>\n                        '+d(r(n(103)).call(c,null!=t?t.person_num:t,{name:"getLiveNum",hash:{},data:o}))+"\n                    </span>\n                </div>\n            </a>\n        </li>\n"},3:function(e,t,n,r,i,a,o){return e.escapeExpression(e.lambda(null!=o[1]?o[1].baseUrl:o[1],t))},5:function(e,t,i,a,o){var s=e.escapeExpression;return'                <div class="avatar-pic">\n                  <img src="'+s(r(n(48)).call(null!=t?t:{},null!=t?t.avatar:t,{name:"convertAvatar",hash:{},data:o}))+'" alt="'+s(e.lambda(null!=t?t.nickName:t,t))+'" class="live-pic" />\n                </div>\n'},7:function(e,t,n,r,i){var a=e.lambda,o=e.escapeExpression;return'                    <span class="live-information-item live-host-name" title="'+o(a(null!=t?t.nickName:t,t))+'">\n                        <i class="icon-host-name"></i>\n                        <span class="live-nickname">'+o(a(null!=t?t.nickName:t,t))+"</span>\n                    </span>\n"},9:function(e,t,n,r,i){return e.escapeExpression(e.lambda(null!=t?t.baseUrl:t,t))},11:function(e,t,n,r,i){return'    <div class="empty">'+e.escapeExpression(e.lambda(null!=t?t.empty:t,t))+"</div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i,a,o){var s;return'<div class="follow-list-container list-tip">\n    <i class="dropdown-arrow"></i>\n'+(null!=(s=n["if"].call(null!=t?t:{},null!=t?t.lists:t,{name:"if",hash:{},fn:e.program(1,i,0,a,o),inverse:e.program(11,i,0,a,o),data:i}))?s:"")+"</div>\n\n"},useData:!0,useDepths:!0})},function(e,t){e.exports=function(e){var t=e;return e>1e8?t=(e/1e8).toFixed(1)+"亿":e>1e4&&(t=(e/1e4).toFixed(1)+"万"),t}},function(e,t,n){function r(e){return e&&(e.__esModule?e["default"]:e)}var i=n(29);e.exports=(i["default"]||i).template({compiler:[7,">= 4.0.0"],main:function(e,t,i,a,o){var s=null!=t?t:{},l=e.escapeExpression;return'<div class="watched-list-container list-tip">\n  <span class="live-information-item live-status '+l(r(n(105)).call(s,null!=t?t.status:t,{name:"getLiveStatusClass",hash:{},data:o}))+'">\n      <i class="icon-status"></i>\n      '+l(r(n(106)).call(s,null!=t?t.status:t,{name:"getLiveStatusText",hash:{},data:o}))+"\n  </span>\n</div>"},useData:!0})},function(e,t){e.exports=function(e){return 1==e?"":"playlist-info-play-status-live"}},function(e,t){e.exports=function(e){return 1==e?"未直播":"正在直播"}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div class="follow-list-container list-tip loading-con">\n  <div class="loading"></div>\n  <div class="empty">加载中...</div>\n  <i class="arrow"></i>\n</div>\n'},useData:!0})},function(e,t,n){e.exports.host=n(109),e.exports.identity=n(110),e.exports.levelName=n(67),e.exports.room=n(111),e.exports.roomType=n(112),e.exports.giftName=n(113),e.exports.giftList=n(114),e.exports.giftPosition=n(115)},function(e,t){e.exports={HOST_ACTIVATE:1,HOST_DISABLE:2}},function(e,t){"use strict";var n=1e4,r=120,i=110,a=90,o=60,s=30,l=45,u="23895608",c="24370452",f={XIAOZHANG:n,SUPER_MANAGER:r,LOWER_SUPER_MANAGER:i,HOST:a,ROOM_MANAGER:o,MC:l,NORMAL:s,MANAGER:o,NORMAL_USER:s,formatPermission:function(e){return isNaN(parseInt(e))?s:parseInt(e)},formatPermissionForSP:function(e){return f.formatPermissionSP(e)},formatPermissionSP:function(e){return isNaN(parseInt(e))?e:parseInt(e)},isXiaozhang:function(e){return($.isPlainObject(e)?e.sp_identity:e)==n},isSuperManager:function(e){return($.isPlainObject(e)?e.sp_identity:e)==r},isLowerSuperManager:function(e){return($.isPlainObject(e)?e.sp_identity:e)==i},isHost:function(e){return($.isPlainObject(e)?e.identity:e)==a},isMC:function(e){return($.isPlainObject(e)?e.identity:e)==l},isManager:function(e){return f.isRoomManager(e)},isRoomManager:function(e){return($.isPlainObject(e)?e.identity:e)==o},isNormal:function(e){return($.isPlainObject(e)?e.identity:e)==s},isBaby:function(e){return $.isPlainObject(e)&&(e=e.rid),e==u||e==c},getIdentity:function(e){var t=f.formatPermission(e.identity),n=f.formatPermissionSP(e.sp_identity);return n>=i?n:t}};e.exports=f},function(e,t){e.exports={LIVE_PLAYING:2,LIVE_STOP:3,LIVE_BAN:4}},function(e,t){e.exports={PUBLIC_ROOM_TYPE:1,ENCRYPT_ROOM_TYPE:2,LEVEL_ROOM_TYPE:3,PAY_ROOM_TYPE:4}},function(e,t){e.exports={FTQ:"佛跳墙",LX:"龙虾",KY:"烤鱼",FT:"饭团",ZZ:"竹子",TAFFY:"太妃糖",BOMB:"炸弹",CANNON:"人间大炮",AEGIS:"英雄不朽"}},function(e,t){e.exports={items:[{bamboo:"30000",desc:"不怕跟不上营养了",effective:"180",exp:"220000",id:"56aefbeb84134616e02501ff",name:"佛跳墙",pic:{pc:{"default":"https://i.h2.pdim.gs/1fec478b01f75380f91771465f9ecfbd.png",chat:"https://i.h2.pdim.gs/64b3033effdb60cb8f8036bce655ceaf.png",tips:"https://i.h2.pdim.gs/5078d6662d06461c87f8a0e4366286a4.gif",effect:"https://i.h2.pdim.gs/12d6d43466b26846fb6e26bf9ffc4205.gif"},android:{icon:"https://i.h2.pdim.gs/t016d8a494d4086a716.png",effect:"https://i.h2.pdim.gs/t01bc7a7870e75a7178.png",ext:"https://i.h2.pdim.gs/t0168b7df533a07a240.png"}},price:"10000"},{bamboo:"3000",desc:"究极进化的小龙虾",effective:"60",exp:"21000",id:"569857b5b868a87b4f0f9f9e",name:"龙虾",pic:{pc:{"default":"https://i.h2.pdim.gs/e2d48689be7ba0dfcde71c7f60b8b4eb.png",chat:"https://i.h2.pdim.gs/921c67c40e9f22e34ee191eb55a28a99.png",tips:"https://i.h2.pdim.gs/205056b467f817348c07640601f2f41c.gif",effect:"https://i.h2.pdim.gs/12aa6ced5c02df0414e467de70219e9a.gif"},android:{icon:"https://i.h2.pdim.gs/t012996086b385ef25d.png",effect:"https://i.h2.pdim.gs/t01573d08c22609b90b.png",ext:"https://i.h2.pdim.gs/t01a67ec4e575a3a3f8.png"},ios:{"default":"https://i.h2.pdim.gs/t012996086b385ef25d.png"}},price:"1000"},{bamboo:"150",desc:"熟透了味道还不错",effective:"10",exp:"1000",id:"56985731b868a87b4f0f9f9d",name:"烤鱼",pic:{pc:{"default":"https://i.h2.pdim.gs/090444f66284d971e6162fd4b60be003.png",chat:"https://i.h2.pdim.gs/5ca914afaa7ec6987f055d3371da7f9f.png",tips:"https://i.h2.pdim.gs/e0c19a50f35e56d70d9eecc7429ee4cd.gif",effect:"https://i.h2.pdim.gs/d7630db2334bcd7e6b7044da43646296.gif"},android:{icon:"https://i.h2.pdim.gs/t017df795fc00b2a21c.png",effect:"https://i.h2.pdim.gs/t01fa62ba3eddfc44b2.png",ext:"https://i.h2.pdim.gs/t0134368f82401710e0.png"},ios:{"default":"https://i.h2.pdim.gs/t017df795fc00b2a21c.png"}},price:"50"},{bamboo:"6",desc:"主播饿了,喂食饭团",effective:"3",exp:"40",id:"569856ffb868a87b4f0f9f9c",name:"饭团",pic:{pc:{"default":"https://i.h2.pdim.gs/806fed1d793aaefd680ad140a2d01b50.png",chat:"https://i.h2.pdim.gs/a2410d08fa7da77fceb13e77309f832b.png",tips:"https://i.h2.pdim.gs/479f0d9dd3af14a37ba55bf3c05985d1.gif",effect:"https://i.h2.pdim.gs/91a3854e4ff7421508cf324ca0aa649f.gif"},android:{icon:"https://i.h2.pdim.gs/t01c98f61a4eaf5dee0.png",effect:"https://i.h2.pdim.gs/t0162a5d2cbc75e3e1a.png",ext:"https://i.h2.pdim.gs/t01eedb76967cf5c34c.png"},ios:{"default":"https://i.h2.pdim.gs/t01c98f61a4eaf5dee0.png"}},price:"2"}]}},function(e,t){e.exports={CHAT_TEXT:1,COMBO_ANIMATION:2}},function(e,t){"use strict";e.exports=function(e){var t=e||{};t.baseUrl=t.baseUrl||"";var n=[{id:"index",title:"首页",current:"index"===t.current,href:t.baseUrl+"/"},{id:"all_lives",title:"全部",current:"alllives"===t.current,href:t.baseUrl+"/all"},{id:"go_sort",title:"分类",current:"sort"===t.current,href:t.baseUrl+"/cate"},{id:"king",title:"King",current:"king"===t.current,href:"http://king.pgc.panda.tv/?channel=web_pgc-tjw-ch_sydbdh"},{id:"ipanda",title:"iPanda",current:"ipanda"===t.current,href:"http://www.panda.tv/ipanda"},{id:"mall",title:"官方商城",current:"mall"===t.current,href:"https://mall.panda.tv"}];return $.extend(t,{logo:t.logoUrl,baseUrl:t.baseUrl,tab:n})}},function(e,t,n){"use strict";function r(e){return _=e||{},y=_.roomId||PDR.getRoomId(),C?$.when(this):w.selfInfoInterface.getSelfInfo(y).then(function(e){e.rid>0&&(b=e.rid),C=!0})}function i(e){return C?void(b>0?(v=x.show({title:"房间举报",content:A(),modalClassName:"room-report-modal"}),o(),l(),u()):E.login()):void r(e).then(i)}function a(){v&&(v.modal("hide"),v=null)}function o(){v.on("submit",".room-report-form",function(e){e.preventDefault()}),v.on("click",".room-report-form .report-submit-btn",s)}function s(e){e.preventDefault();var t=v.find(".room-report-form"),n=t.find(".report-submit-btn");t.find("[name=rid]").val(b),n.hasClass("disabled")||c().then(function(){return S.init({scene:"other"})}).then(f).done(d).fail(h).always(g)}function l(){v.find("input[name=roomId]").val(y)}function u(){var e=($("#filePicker"),v.find("input[name=screenshotUrl]")),t=v.find(".report-form-screenshot-notice");e.val(""),t.html("未上传文件");var n=T.init({pick:{id:"#filePicker",multiple:!1},server:(PDR.host?PDR.getProtocol()+"//"+PDR.host:"")+"/ajax_upload_img"});n.on("uploadSuccess",function(e,n){n.data?(n.data=PDR.getStaticSslUrl(n.data),D[e.__hash]=n.data,v.find(".room-report-form input[name=screenshotUrl]").val(n.data),t.html("图片已上传")):t.html("图片上传失败")}),n.on("error",function(n,r){if("F_DUPLICATE"==n)return v.find(".room-report-form input[name=screenshotUrl]").val(D[r.__hash]),void t.html("图片已上传");var i="出错了";switch(n){case"F_EXCEED_SIZE":case"Q_EXCEED_SIZE_LIMIT":i="亲，照片请小于5M";break;default:i="上传失败"}t.html(i),e.val("")}),n.on("uploadError",function(n,r){t.html("图片上传失败"),e.val("")})}function c(){var e=v.find(".room-report-form"),t=e.find("[name=roomId]").val(),n=e.find("[name=reportDetail]").val(),r=e.find("[name=screenshotUrl]").val(),i=e.find("[name=reporterQQ]").val();return I.checkRoomId(t).then(function(){return I.checkDetail(n)}).then(function(){return I.checkScreenshot(r)}).then(function(){return I.checkQQ(i)})}function f(e){var t=v.find(".room-report-form"),n={};return p(),$.each(t.serializeArray(),function(){$.trim(this.value)&&(n[this.name]=this.value)}),R.reportRoom(n,e)}function d(){k.popup("举报成功！",{delayClose:1e3}),v.modal("hide")}function h(e){e&&"close"==e.type||k.popup(e,{delayClose:1e3})}function p(){var e=v.find(".room-report-form .report-submit-btn");e.addClass("disabled").text("处理中...")}function g(){var e=v.find(".room-report-form .report-submit-btn");e.removeClass("disabled").text("确定")}function m(e){y=e}var v,y,b,_,w=n(3),x=(n(13),n(118)),k=n(123),E=n(58),S=n(136),T=n(141),A=n(144),R=n(145),I=n(146),D={},C=!1;e.exports={init:r,show:i,hide:a,changeRoom:m}},function(e,t,n){"use strict";function r(){$(document).on("shown.bs.modal",".x-modal",function(e){var t=$(e.target),n=$(".x-modal-content",t);$(".x-modal-hide",t);"auto"!==n.css("top")&&"0px"!==n.css("top")||n.css({top:"38.2%",marginTop:0-.382*n.height()}),"auto"!==n.css("left")&&"0px"!==n.css("left")||n.css({left:"50%",marginTop:0-.5*n.width()})}),$(document).on("click",".x-modal-hide",function(e){var t=$(e.target),n=t.parents(".x-modal");n.modal("hide")})}function i(e){e.title=e.title||!1,e.content=e.content||!1;var t=$(a(e));return t.on("hidden.bs.modal",function(){t.off(),t.remove(),t=null}),t.appendTo("body"),t.modal("show"),t}n(119);var a=n(120),o=n(121),s=n(122);r(),e.exports={show:i,confirm:function(e){var t=$.Deferred();e=e||{},e.title=e.title||"请确认",e.content=o({content:e.content||""});var n=i(e);return n.on("click","button, a",function(e){var r=$(e.target);r.is(".j-sure")?t.resolve():t.reject(),n.modal("hide")}),t.promise()},alert:function(e){e=e||{},e.title=e.title||"请确认",e.content=s({content:e.content||""});var t=i(e);t.on("click","button",function(e){$(e.target);t.modal("hide")})}}},function(e,t){+function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),a=i.data("bs.modal"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);a||i.data("bs.modal",a=new n(this,o)),"string"==typeof t?a[t](r):o.show&&a.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var a=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(a)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(a)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var a=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),a&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;a?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),a=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=a.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},a.data(),r.data());r.is("a")&&n.preventDefault(),a.one("show.bs.modal",function(e){e.isDefaultPrevented()||a.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(a,o,this)})}(jQuery)},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({1:function(e,t,n,r,i){var a;return e.escapeExpression((a=null!=(a=n.modalClassName||(null!=t?t.modalClassName:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"modalClassName",hash:{},data:i}):a))},3:function(e,t,n,r,i){var a,o;return'    <div class="x-modal-hd">\n      <h3 class="x-modal-title">'+(null!=(o=null!=(o=n.title||(null!=t?t.title:t))?o:n.helperMissing,a="function"==typeof o?o.call(null!=t?t:{},{name:"title",hash:{},data:i}):o)?a:"")+"</h3>\n    </div>\n"},5:function(e,t,n,r,i){var a,o;return'    <div class="x-modal-bd">\n      '+(null!=(o=null!=(o=n.content||(null!=t?t.content:t))?o:n.helperMissing,a="function"==typeof o?o.call(null!=t?t:{},{name:"content",hash:{},data:i}):o)?a:"")+"\n    </div>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a,o=null!=t?t:{};return'<div class="x-modal fade '+(null!=(a=n["if"].call(o,null!=t?t.modalClassName:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+'">\n  <div class="x-modal-content">\n'+(null!=(a=n["if"].call(o,null!=t?t.title:t,{name:"if",hash:{},fn:e.program(3,i,0),inverse:e.noop,data:i}))?a:"")+'    <span class="x-modal-hide"></span>\n'+(null!=(a=n["if"].call(o,null!=t?t.content:t,{name:"if",hash:{},fn:e.program(5,i,0),inverse:e.noop,data:i}))?a:"")+"  </div>\n</div>\n"},useData:!0})},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a,o;return'<div class="x-modal-confirm">\n  '+(null!=(o=null!=(o=n.content||(null!=t?t.content:t))?o:n.helperMissing,a="function"==typeof o?o.call(null!=t?t:{},{name:"content",hash:{},data:i}):o)?a:"")+'\n</div>\n<div class="x-modal-btns">\n  <button class="x-modal-btn j-sure">确定</button><button class="x-modal-btn x-modal-btn-cancel">取消</button>\n</div>'},useData:!0})},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a,o;return'<div class="x-modal-confirm">\n  '+(null!=(o=null!=(o=n.content||(null!=t?t.content:t))?o:n.helperMissing,a="function"==typeof o?o.call(null!=t?t:{},{name:"content",hash:{},data:i}):o)?a:"")+'\n</div>\n<div class="x-modal-btns">\n  <button class="x-modal-btn j-sure">确定</button>\n</div>'},useData:!0})},function(e,t,n){"use strict";e.exports=n(124)},function(e,t,n){"use strict";function r(e){y||(h=a(e),h.append(g),y=!0)}function i(e,t){y||r(null),t=t||{};var n=o(e,t);return f(n),g.append(n.$container),n.closeSignal.addOnce(d),n.open(),u(t),n.$container.css(l(n.$container)),n}function a(e){return e?"[object String]"===Object.prototype.toString.call(e)||1===e.nodeType?$(e):e instanceof jQuery?e:void 0:$("body")}function o(e,t){var n=s(t);if(e instanceof jQuery)return m.createByJQuery(n,e,t);if("[object String]"===Object.prototype.toString.call(e))return m.createByHTML(n,e,t);if(e instanceof v){if(!e.closeSignal)throw new TypeError("content is Destroyed","King.js parseContentParameter");return e}}function s(e){var t="dialog-container-"+Math.ceil(1e5*Math.random()),n=$('<div class="dialog-container" id="'+t+'"></div>');return e&&e.hasOwnProperty("customContainerClassName")?n.addClass(e.customContainerClassName):n.addClass("default-box"),e&&e.hasOwnProperty("zIndex")&&!isNaN(e.zIndex.dialog)&&n.css("zIndex",parseInt(e.zIndex.dialog)),n}function l(e){var t=e.width(),n=e.height();return{width:t,height:n,"margin-top":-(n/2),"margin-left":-(t/2)}}function u(e){var t={};e&&e.hasOwnProperty("zIndex")&&!isNaN(e.zIndex.overlay)&&(t.zIndex=parseInt(e.zIndex.overlay)),g.css(t),g.fadeIn(200)}function c(){p||(g.fadeOut(200),h.removeClass("dialog-wrap"))}function f(e){var t=p;p=e,t&&t.close()}function d(e){e==p&&(p=null,c())}var h=null,p=null,g=$('<div class="dialog-overlay"></div>'),m=n(125),v=n(127),y=!1;e.exports.popup=i,e.exports.initialize=r},function(e,t,n){(function(t){"use strict";function r(e,n,r){var i=new l;return i.$container=e,i.content=n,t(e,i,r),i}function i(e,t,n){var i=r(e,t,n);return e.append(t),i}function a(e,t,n){var i=r(e,t,n);return e.html(t),i}function o(e){}function t(e,t,n){n=n||{},n.hasOwnProperty("closeButton")&&u.create(u.SKILL_TYPE.CLOSE_BUTTON,e,t,n),n.hasOwnProperty("confirm")&&u.create(u.SKILL_TYPE.CONFIRM,e,t,n.confirm),n.hasOwnProperty("delayClose")&&u.create(u.SKILL_TYPE.AUTO_CLOSE,e,t,n),n.hasOwnProperty("autoDestroy")&&(t.isAutoDestroy=Boolean(n.autoDestroy)),n.hasOwnProperty("customData")&&(t.customData=n.customData),s(e,t,n.animation)}function s(e,t,n){n=$.extend({"in":{duration:200,targetValue:1},out:{duration:200,targetValue:0}},n),t.openAnimation=u.create(u.SKILL_TYPE.FADE_IN,e,t,n["in"]),t.closeAnimation=u.create(u.SKILL_TYPE.FADE_OUT,e,t,n.out)}var l=n(127),u=n(130);e.exports.createByJQuery=i,e.exports.createByHTML=a,e.exports.createByCustomDialog=o}).call(t,n(126))},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function o(){g&&h&&(g=!1,h.length?p=h.concat(p):m=-1,p.length&&s())}function s(){if(!g){var e=i(o);g=!0;for(var t=p.length;t;){for(h=p,p=[];++m<t;)h&&h[m].run();m=-1,t=p.length}h=null,g=!1,a(e)}}function l(e,t){this.fun=e,this.array=t}function u(){}var c,f,d=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(e){f=r}}();var h,p=[],g=!1,m=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new l(e,t)),1!==p.length||g||i(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,n){"use strict";function r(){this.closeSignal=new i,this.openSignal=new i,this.$container=null,this.openAnimation=null,this.closeAnimation=null,this.skillList=[],this.isAutoDestroy=!0,this.customData=null}var i=n(128);r.prototype.initialize=function(){},r.prototype.open=function(){this.openAnimation?(this.openAnimation.completedSignal.addOnce(this,this._openAnimationCompletedHandler),this.openAnimation.start()):this.openSignal.dispatch(this)},r.prototype.close=function(){this.closeAnimation?(this.closeAnimation.completedSignal.addOnce(this,this._closeAnimationCompletedHandler),this.closeAnimation.start()):this.$container&&this.$container.remove(),this.closeSignal&&this.closeSignal.dispatch(this)},r.prototype.destroy=function(){if(this.$container=null,this.closeSignal.removeAll(),this.closeSignal=null,this.openSignal.removeAll(),this.openSignal=null,this.openAnimation&&(this.openAnimation.destroy(),this.openAnimation=null),this.closeAnimation&&(this.closeAnimation.destroy(),this.closeAnimation=null),this.skillList&&this.skillList.length>0){for(var e=0;e<this.skillList.length;++e)this.skillList[e].destroy();this.skillList=[]}this.customData=null},r.prototype._closeAnimationCompletedHandler=function(){this.isAutoDestroy?(this.$container.remove(),this.destroy()):this.$container.detach()},r.prototype._openAnimationCompletedHandler=function(){this.openSignal.dispatch(this)},e.exports=r},function(e,t,n){function r(){this.handlerList=[]}var i=n(129);r.prototype.add=function(e,t){return this.addHandlerToList(e,t,!1)},r.prototype.addOnce=function(e,t){return this.addHandlerToList(e,t,!0)},r.prototype.remove=function(e){var t=this.findHandlerByFunc(e);t&&(t.handler.destroy(),this.handlerList.splice(t.index,1))},r.prototype.removeAll=function(){var e=this.handlerList.length;if(e>0){for(var t=0;t<e;t++)this.handlerList[t].destroy();this.handlerList=[]}},r.prototype.dispatch=function(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);for(var n,r=this.handlerList.length,i=0,i=0;i<r;i++)n=this.handlerList[i],n.func.apply(n.listener,e);for(i=this.handlerList.length;i>0;)i--,n=this.handlerList[i],n.isDispatchOnce&&(n.destroy(),this.handlerList.splice(i,1));
},r.prototype.hasHandler=function(e){var t=this.handlerList.length;if(t>0)for(var n,r=0;r<t;r++)if(n=this.handlerList[r],n.func==e)return!0;return!1},r.prototype.addHandlerToList=function(e,t,n){return"function"==typeof e&&(t=e,e=null),"undefined"!=typeof e&&"function"==typeof t&&(!this.hasHandler(t)&&(this.handlerList.push(new i(e,t,n)),!0))},r.prototype.findHandlerByFunc=function(e){for(var t,n=this.handlerList.length,r=0;r<n;r++)if(t=this.handlerList[r],t.func==e)return{index:r,handler:t};return null},r.prototype.findHandler=function(e){for(var t,n=this.handlerList.length,r=0;r<n;r++)if(t=this.handlerList[r],t==e)return{index:r,handler:t};return null},e.exports=r},function(e,t){function n(e,t,n){this.listener=e,this.func=t,this.isDispatchOnce=!!n}n.prototype.destroy=function(){this.listener=null,this.func=null},e.exports=n},function(e,t,n){"use strict";function r(e,t,n,r){var c;switch(e){case i.CLOSE_BUTTON:c=new o;break;case i.AUTO_CLOSE:c=new a;break;case i.CONFIRM:c=new s;break;case i.FADE_IN:c=new l;break;case i.FADE_OUT:c=new u;break;default:throw new TypeError("Type not found, type is "+e,"dialog-skill-factory.js")}return c.initialize(t,n,r),c}var i={CLOSE_BUTTON:"closeButton",AUTO_CLOSE:"autoClose",CONFIRM:"confirm",FADE_IN:"fadeIn",FADE_OUT:"fadeOut"},a=n(131),o=n(132),s=n(133),l=n(134),u=n(135);e.exports.create=r,e.exports.SKILL_TYPE=i},function(e,t){"use strict";function n(){}n.prototype.initialize=function(e,t,n){if(!t.hasOwnProperty("openSignal"))throw new TypeError("dialog not implements IDialog","DialogAutoCloseSkill.js");t.openSignal.addOnce(function(){setTimeout(function(){t&&t.close()},n.delayClose)})},n.prototype.destroy=function(){},e.exports=n},function(e,t){"use strict";function n(){}n.prototype.initialize=function(e,t,n){if(this.$container=e,this.dialog=t,this.opts=n,!this.$container||!this.dialog)throw new ReferenceError("$container or dialog or selector error","DialogCloseButtonSkill.js");if(!this.dialog.hasOwnProperty("closeSignal"))throw new TypeError("dialog not implement IDialog interface, closeSignal","DialogCloseButtonSkill.js");var r=this;this.$container.on("click.close",this.opts.closeButton,function(){r.dialog.close()})},n.prototype.destroy=function(){this.$container.off("click.close"),this.$container=null,this.dialog=null,this.selector=null},e.exports=n},function(e,t,n){"use strict";function r(){}var i=n(128);r.prototype.initialize=function(e,t,n){function r(){o.dialog.confirmSignal.dispatch(o.dialog),o.opts.autoClose&&o.dialog.close()}function a(){o.dialog.cancelSignal.dispatch(o.dialog),o.dialog.close()}if(this.$container=e,this.dialog=t,this.opts=n,!this.$container||!this.dialog)throw new ReferenceError("$container or dialog","DialogCloseButtonSkill.js");this.opts=$.extend({confirmButton:".confirm-btn",cancelButton:".cancel-btn",autoClose:!0},this.opts),this.dialog.confirmSignal=new i,this.$container.on("click.confirm",this.opts.confirmButton,r),this.dialog.cancelSignal=new i,this.$container.on("click.cancel",this.opts.cancelButton,a);var o=this},r.prototype.destroy=function(){this.dialog.confirmSignal.destroy(),this.dialog.confirmSignal=null,this.dialog.cancelSignal.destroy(),this.dialog.cancelSignal=null,this.$container=null,this.opts=null},e.exports=r},function(e,t,n){"use strict";function r(){}var i=n(128);r.prototype.initialize=function(e,t,n){this.$container=e,this.opts=n,this.completedSignal=new i},r.prototype.start=function(){var e=this;this.$container.css({visibility:"visible",display:"none"}).fadeIn(this.opts.duration,function(){e.completedSignal.dispatch()})},r.prototype.destroy=function(){this.$container=null,this.completedSignal.removeAll(),this.completedSignal=null},e.exports=r},function(e,t,n){"use strict";function r(){}var i=n(128);r.prototype.initialize=function(e,t,n){this.$container=e,this.opts=n,this.completedSignal=new i},r.prototype.start=function(){var e=this;this.$container.fadeOut(this.opts.duration,function(){e.$container.css({visibility:"hidden",display:"block"}),e.completedSignal.dispatch()})},r.prototype.destroy=function(){this.$container=null,this.completedSignal.removeAll(),this.completedSignal=null},e.exports=r},function(e,t,n){"use strict";function r(e){switch(a=$.extend({},{verifyType:l.verifyType},e),a.verifyType){case"geetest":u=s;break;case"ali":u=o;break;default:u=o}return i()}function i(){return u.init(a)}var a,o=n(137),s=n(139),l=n(66),u={};e.exports={init:r}},function(e,t,n){"use strict";function r(e){return f.clearData(),a=$("#aliverificate-wrapper"),$.when(c.aliSource(e))}var i,a,o=n(123),s=null,l=null,u=n(138),c={aliSource:function(e){var t=this;return l={appkey:"FFFF0000000001676215",scene:"activity"},l=$.extend({},l,e),i=$.Deferred(),window.noCaptcha?t._initNc():(t._loadCssSource(),$.getScript(PDR.getProtocol()+"//g.alicdn.com/sd/ncpc/nc.js?t="+(new Date).getTime()).done(t._initNc).fail(function(){t.showFailMsg("验证码加载错误"),i.reject()})),i.promise()},_loadCssSource:function(){var e="//g.alicdn.com/sd/ncpc/nc.css?t="+(new Date).getTime(),t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)},_initNc:function(){var e=c;e._initVerificate(),e._aliNc(l).then(function(e){i.resolve(e)}).fail(function(){i.reject()})},_initVerificate:function(){s=o.popup(u(),{confirm:{cancelButton:".aliverificate-close-btn"},customContainerClassName:"main-aliverificate-container",customPosition:l?l.customDialogPosition:null}),s.closeSignal.addOnce(function(){i&&i.reject({type:"close"})})},_aliNc:function(){var e=this,t=$.Deferred(),n=l.appkey,r=l.scene,i=[n,(new Date).getTime(),Math.random()].join(":"),a={renderTo:"#aliverificate-content",appkey:n,scene:r,token:i,callback:function(a){a=$.extend({},a,{nc_appkey:n,nc_scene:r,nc_token:i}),f.getVerifyData(a).then(function(e){t.resolve(e),s&&s.close()}).fail(function(n){e.showFailMsg("验证码验证失败!请重试"),t.reject()})}};new noCaptcha(a);return t.promise()},showFailMsg:function(e){o.popup(e,{delayClose:1500})}},f={getVerifyData:function(e){var t=$.Deferred();return $.ajax("https://verify.panda.tv/verify/check",{data:{params:"csessionid->"+e.csessionid+",token->"+e.nc_token+",sig->"+e.sig+",scene->"+e.nc_scene,ctype:"aliyun",app:"panda",plat:PDR.__plat},dataType:"jsonp",jsonp:"callback"}).then(function(e){if(e&&0==e.errno){var n=$.extend({},e.data,{verifyType:"ali"});t.resolve(n)}else t.reject()}).fail(function(){t.reject()}),t.promise()},clearData:function(){l=null}};e.exports={init:r}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({1:function(e,t,n,r,i){return'    <i></i>\n    <div class="aliverificate-header">\n      <div>基于对你当前操作环境的检测</div>\n      <span>请完成以下操作</span>\n    </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a;return'<a class="aliverificate-close-btn" href="javascript:;"></a>\n<div id="aliverificate-wrapper">\n  <div class="aliverificate-container">\n'+(null!=(a=n["if"].call(null!=t?t:{},null!=t?t.ruc:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+'    <div id="aliverificate-content"></div>\n  </div>\n</div>\n<div id="_umfp" style="display:inline;width:1px;height:1px;overflow:hidden"></div>\n'},useData:!0})},function(e,t,n){"use strict";function r(e){return d(),h=$.Deferred(),y=e,i(),o(),h.promise()}function i(){window.Geetest||$.getScript("https://api.geetest.com/get.php?callback=geetestSdkReadyHandler").fail(a)}function a(){$.getScript("https://static.geetest.com/static/js/geetest.5.5.42.js").done(s)}function o(){b?b.abort():b=$.ajax({url:"//verify.panda.tv/captcha/get?app=pandatv",dataType:"json",data:{_:$.now()}}).done(function(e){0==e.errno&&e.data?(v=e.data,s()):f("验证码加载失败，请刷新页面重试！")}).fail(function(){f("验证码加载失败，请刷新页面重试！")}).always(function(){b=null})}function s(){window.Geetest&&v&&l(v)}function l(e){var t="#geetest-content",n="embed";y&&y.container?(t=y.container,n="float"):u();var r=new window.Geetest({gt:e.gt,challenge:e.challenge,product:n,offline:0==e.success});r.appendTo(t),r.onReady(function(){$(".geetest-font").hide()}),r.onSuccess(function(){$.when(r.getValidate()).then(function(e){c(e),r.disable()})})}function u(){g=p.popup(m(),{confirm:{cancelButton:".geetest-close-btn"},customContainerClassName:"main-geetest-container",customPosition:y?y.customDialogPosition:null}),g.closeSignal.addOnce(function(){h&&h.reject({type:"close"})})}function c(e){$.ajax({url:"//verify.panda.tv/captcha/verifyCode",dataType:"json",data:{challenge:e.geetest_challenge,validate:e.geetest_validate,seccode:e.geetest_seccode,app:"pandatv",_:$.now()}}).done(function(e){0==e.errno?setTimeout(function(){h.resolve(e.data),g&&g.close()},1500):(f("验证失败，请稍后再试!"),h.reject())}).fail(function(){f("验证失败，请稍后再试!"),h.reject()})}function f(e){p.popup(e,{delayClose:1500})}function d(){v=null,y=null}var h=null,p=n(123),g=null,m=n(140),v=null,y=null,b=null;window.geetestSdkReadyHandler=function(){s()},e.exports={init:r}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<a class="geetest-close-btn" href="javascript:;"></a>\n<div id="geetest-container">\n  <div id="geetest-content">\n    <span class="geetest-font">验证码加载中......</span>\n  </div>\n</div>'},useData:!0})},function(e,t,n){"use strict";function r(e){return e=$.extend(s,e),o.check(e),i=a.create(e)}var i=null,a=n(142),o=n(143),s={auto:!0,swf:PDR.getStaticSslUrl("http://s7.pdim.gs/static/55803010f95d258a.swf"),accept:{title:"Images",extensions:"jpg,jpeg,bmp,png",mimeTypes:"image/*"},chunked:!1,fileSizeLimit:5242880,withCredentials:!0};e.exports={init:r}},function(e,t){!function(t,n){var r,i={},a=function(e,t){var n,r,i;if("string"==typeof e)return l(e);for(n=[],r=e.length,i=0;i<r;i++)n.push(l(e[i]));return t.apply(null,n)},o=function(e,t,n){2===arguments.length&&(n=t,t=null),a(t||[],function(){s(e,n,arguments)})},s=function(e,t,n){var r,o={exports:t};"function"==typeof t&&(n.length||(n=[a,o.exports,o]),r=t.apply(null,n),void 0!==r&&(o.exports=r)),i[e]=o.exports},l=function(e){var n=i[e]||t[e];if(!n)throw new Error("`"+e+"` is undefined");return n},u=function(e){var t,n,r,a,o,s;s=function(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)};for(t in i)if(n=e,i.hasOwnProperty(t)){for(r=t.split("/"),o=s(r.pop());a=s(r.shift());)n[a]=n[a]||{},n=n[a];n[o]=i[t]}return e},c=function(e){return t.__dollar=e,u(n(t,o,a))};"object"==typeof e&&"object"==typeof e.exports?e.exports=c():(r=t.WebUploader,t.WebUploader=c(),t.WebUploader.noConflict=function(){t.WebUploader=r})}(window,function(e,t,n){return t("dollar-third",[],function(){var t=e.__dollar||e.jQuery||e.Zepto;if(!t)throw new Error("jQuery or Zepto not found!");return t}),t("dollar",["dollar-third"],function(e){return e}),t("promise-third",["dollar"],function(e){return{Deferred:e.Deferred,when:e.when,isPromise:function(e){return e&&"function"==typeof e.then}}}),t("promise",["promise-third"],function(e){return e}),t("base",["dollar","promise"],function(t,n){function r(e){return function(){return s.apply(e,arguments)}}function i(e,t){return function(){return e.apply(t,arguments)}}function a(e){var t;return Object.create?Object.create(e):(t=function(){},t.prototype=e,new t)}var o=function(){},s=Function.call;return{version:"0.1.5",$:t,Deferred:n.Deferred,isPromise:n.isPromise,when:n.when,browser:function(e){var t={},n=e.match(/WebKit\/([\d.]+)/),r=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),i=e.match(/MSIE\s([\d\.]+)/)||e.match(/(?:trident)(?:.*rv:([\w.]+))?/i),a=e.match(/Firefox\/([\d.]+)/),o=e.match(/Safari\/([\d.]+)/),s=e.match(/OPR\/([\d.]+)/);return n&&(t.webkit=parseFloat(n[1])),r&&(t.chrome=parseFloat(r[1])),i&&(t.ie=parseFloat(i[1])),a&&(t.firefox=parseFloat(a[1])),o&&(t.safari=parseFloat(o[1])),s&&(t.opera=parseFloat(s[1])),t}(navigator.userAgent),os:function(e){var t={},n=e.match(/(?:Android);?[\s\/]+([\d.]+)?/),r=e.match(/(?:iPad|iPod|iPhone).*OS\s([\d_]+)/);return n&&(t.android=parseFloat(n[1])),r&&(t.ios=parseFloat(r[1].replace(/_/g,"."))),t}(navigator.userAgent),inherits:function(e,n,r){var i;return"function"==typeof n?(i=n,n=null):i=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return e.apply(this,arguments)},t.extend(!0,i,e,r||{}),i.__super__=e.prototype,i.prototype=a(e.prototype),n&&t.extend(!0,i.prototype,n),i},noop:o,bindFn:i,log:function(){return e.console?i(console.log,console):o}(),nextTick:function(){return function(e){setTimeout(e,1)}}(),slice:r([].slice),guid:function(){var e=0;return function(t){for(var n=(+new Date).toString(32),r=0;r<5;r++)n+=Math.floor(65535*Math.random()).toString(32);return(t||"wu_")+n+(e++).toString(32)}}(),formatSize:function(e,t,n){var r;for(n=n||["B","K","M","G","TB"];(r=n.shift())&&e>1024;)e/=1024;return("B"===r?e:e.toFixed(t||2))+r}}}),t("mediator",["base"],function(e){function t(e,t,n,r){return a.grep(e,function(e){return e&&(!t||e.e===t)&&(!n||e.cb===n||e.cb._cb===n)&&(!r||e.ctx===r)})}function n(e,t,n){a.each((e||"").split(s),function(e,r){n(r,t)})}function r(e,t){for(var n,r=!1,i=-1,a=e.length;++i<a;)if(n=e[i],n.cb.apply(n.ctx2,t)===!1){r=!0;break}return!r}var i,a=e.$,o=[].slice,s=/\s+/;return i={on:function(e,t,r){var i,a=this;return t?(i=this._events||(this._events=[]),n(e,t,function(e,t){var n={e:e};n.cb=t,n.ctx=r,n.ctx2=r||a,n.id=i.length,i.push(n)}),this):this},once:function(e,t,r){var i=this;return t?(n(e,t,function(e,t){var n=function(){return i.off(e,n),t.apply(r||i,arguments)};n._cb=t,i.on(e,n,r)}),i):i},off:function(e,r,i){var o=this._events;return o?e||r||i?(n(e,r,function(e,n){a.each(t(o,e,n,i),function(){delete o[this.id]})}),this):(this._events=[],this):this},trigger:function(e){var n,i,a;return this._events&&e?(n=o.call(arguments,1),i=t(this._events,e),a=t(this._events,"all"),r(i,n)&&r(a,arguments)):this}},a.extend({installTo:function(e){return a.extend(e,i)}},i)}),t("uploader",["base","mediator"],function(e,t){function n(e){this.options=r.extend(!0,{},n.options,e),this._init(this.options)}var r=e.$;return n.options={},t.installTo(n.prototype),r.each({upload:"start-upload",stop:"stop-upload",getFile:"get-file",getFiles:"get-files",addFile:"add-file",addFiles:"add-file",sort:"sort-files",removeFile:"remove-file",cancelFile:"cancel-file",skipFile:"skip-file",retry:"retry",isInProgress:"is-in-progress",makeThumb:"make-thumb",md5File:"md5-file",getDimension:"get-dimension",addButton:"add-btn",predictRuntimeType:"predict-runtime-type",refresh:"refresh",disable:"disable",enable:"enable",reset:"reset"},function(e,t){n.prototype[e]=function(){return this.request(t,arguments)}}),r.extend(n.prototype,{state:"pending",_init:function(e){var t=this;t.request("init",e,function(){t.state="ready",t.trigger("ready")})},option:function(e,t){var n=this.options;return arguments.length>1?void(r.isPlainObject(t)&&r.isPlainObject(n[e])?r.extend(n[e],t):n[e]=t):e?n[e]:n},getStats:function(){var e=this.request("get-stats");return e?{successNum:e.numOfSuccess,progressNum:e.numOfProgress,cancelNum:e.numOfCancel,invalidNum:e.numOfInvalid,uploadFailNum:e.numOfUploadFailed,queueNum:e.numOfQueue,interruptNum:e.numofInterrupt}:{}},trigger:function(e){var n=[].slice.call(arguments,1),i=this.options,a="on"+e.substring(0,1).toUpperCase()+e.substring(1);return!(t.trigger.apply(this,arguments)===!1||r.isFunction(i[a])&&i[a].apply(this,n)===!1||r.isFunction(this[a])&&this[a].apply(this,n)===!1||t.trigger.apply(t,[this,e].concat(n))===!1)},destroy:function(){this.request("destroy",arguments),this.off()},request:e.noop}),e.create=n.create=function(e){return new n(e)},e.Uploader=n,n}),t("runtime/runtime",["base","mediator"],function(e,t){function n(t){this.options=r.extend({container:document.body},t),this.uid=e.guid("rt_")}var r=e.$,i={},a=function(e){for(var t in e)if(e.hasOwnProperty(t))return t;return null};return r.extend(n.prototype,{getContainer:function(){var e,t,n=this.options;return this._container?this._container:(e=r(n.container||document.body),t=r(document.createElement("div")),t.attr("id","rt_"+this.uid),t.css({position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),e.append(t),e.addClass("webuploader-container"),this._container=t,this._parent=e,t)},init:e.noop,exec:e.noop,destroy:function(){this._container&&this._container.remove(),this._parent&&this._parent.removeClass("webuploader-container"),this.off()}}),n.orders="html5,flash",n.addRuntime=function(e,t){i[e]=t},n.hasRuntime=function(e){return!!(e?i[e]:a(i))},n.create=function(e,t){var o,s;if(t=t||n.orders,r.each(t.split(/\s*,\s*/g),function(){if(i[this])return o=this,!1}),o=o||a(i),!o)throw new Error("Runtime Error");return s=new i[o](e)},t.installTo(n.prototype),n}),t("runtime/client",["base","mediator","runtime/runtime"],function(e,t,n){function r(t,r){var a,o=e.Deferred();this.uid=e.guid("client_"),this.runtimeReady=function(e){return o.done(e)},this.connectRuntime=function(t,s){if(a)throw new Error("already connected!");return o.done(s),"string"==typeof t&&i.get(t)&&(a=i.get(t)),a=a||i.get(null,r),a?(e.$.extend(a.options,t),a.__promise.then(o.resolve),a.__client++):(a=n.create(t,t.runtimeOrder),a.__promise=o.promise(),a.once("ready",o.resolve),a.init(),i.add(a),a.__client=1),r&&(a.__standalone=r),a},this.getRuntime=function(){return a},this.disconnectRuntime=function(){a&&(a.__client--,a.__client<=0&&(i.remove(a),delete a.__promise,a.destroy()),a=null)},this.exec=function(){if(a){var n=e.slice(arguments);return t&&n.unshift(t),a.exec.apply(this,n)}},this.getRuid=function(){return a&&a.uid},this.destroy=function(e){return function(){e&&e.apply(this,arguments),this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()}}(this.destroy)}var i;return i=function(){var e={};return{add:function(t){e[t.uid]=t},get:function(t,n){var r;if(t)return e[t];for(r in e)if(!n||!e[r].__standalone)return e[r];return null},remove:function(t){delete e[t.uid]}}}(),t.installTo(r.prototype),r}),t("lib/dnd",["base","mediator","runtime/client"],function(e,t,n){function r(e){e=this.options=i.extend({},r.options,e),e.container=i(e.container),e.container.length&&n.call(this,"DragAndDrop")}var i=e.$;return r.options={accept:null,disableGlobalDnd:!1},e.inherits(n,{constructor:r,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(r.prototype),r}),t("widgets/widget",["base","uploader"],function(e,t){function n(e){if(!e)return!1;var t=e.length,n=i.type(e);return!(1!==e.nodeType||!t)||("array"===n||"function"!==n&&"string"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e))}function r(e){this.owner=e,this.options=e.options}var i=e.$,a=t.prototype._init,o=t.prototype.destroy,s={},l=[];return i.extend(r.prototype,{init:e.noop,invoke:function(e,t){var n=this.responseMap;return n&&e in n&&n[e]in this&&i.isFunction(this[n[e]])?this[n[e]].apply(this,t):s},request:function(){return this.owner.request.apply(this.owner,arguments)}}),i.extend(t.prototype,{_init:function(){var e=this,t=e._widgets=[],n=e.options.disableWidgets||"";return i.each(l,function(r,i){(!n||!~n.indexOf(i._name))&&t.push(new i(e))}),a.apply(e,arguments)},request:function(t,r,i){var a,o,l,u,c=0,f=this._widgets,d=f&&f.length,h=[],p=[];for(r=n(r)?r:[r];c<d;c++)a=f[c],o=a.invoke(t,r),o!==s&&(e.isPromise(o)?p.push(o):h.push(o));return i||p.length?(l=e.when.apply(e,p),u=l.pipe?"pipe":"then",l[u](function(){var t=e.Deferred(),n=arguments;return 1===n.length&&(n=n[0]),setTimeout(function(){t.resolve(n)},1),t.promise()})[i?u:"done"](i||e.noop)):h[0]},destroy:function(){o.apply(this,arguments),this._widgets=null}}),t.register=r.register=function(t,n){var a,o={init:"init",destroy:"destroy",name:"anonymous"};return 1===arguments.length?(n=t,i.each(n,function(e){return"_"===e[0]||"name"===e?void("name"===e&&(o.name=n.name)):void(o[e.replace(/[A-Z]/g,"-$&").toLowerCase()]=e)})):o=i.extend(o,t),n.responseMap=o,a=e.inherits(r,n),a._name=o.name,l.push(a),a},t.unRegister=r.unRegister=function(e){if(e&&"anonymous"!==e)for(var t=l.length;t--;)l[t]._name===e&&l.splice(t,1)},r}),t("widgets/filednd",["base","uploader","lib/dnd","widgets/widget"],function(e,t,n){var r=e.$;return t.options.dnd="",t.register({name:"dnd",init:function(t){if(t.dnd&&"html5"===this.request("predict-runtime-type")){var i,a=this,o=e.Deferred(),s=r.extend({},{disableGlobalDnd:t.disableGlobalDnd,container:t.dnd,accept:t.accept});return this.dnd=i=new n(s),i.once("ready",o.resolve),i.on("drop",function(e){a.request("add-file",[e])}),i.on("accept",function(e){return a.owner.trigger("dndAccept",e)}),i.init(),o.promise()}},destroy:function(){this.dnd&&this.dnd.destroy()}})}),t("lib/filepaste",["base","mediator","runtime/client"],function(e,t,n){function r(e){e=this.options=i.extend({},e),e.container=i(e.container||document.body),n.call(this,"FilePaste")}var i=e.$;return e.inherits(n,{constructor:r,init:function(){var e=this;e.connectRuntime(e.options,function(){e.exec("init"),e.trigger("ready")})}}),t.installTo(r.prototype),r}),t("widgets/filepaste",["base","uploader","lib/filepaste","widgets/widget"],function(e,t,n){var r=e.$;return t.register({name:"paste",init:function(t){if(t.paste&&"html5"===this.request("predict-runtime-type")){var i,a=this,o=e.Deferred(),s=r.extend({},{container:t.paste,accept:t.accept});return this.paste=i=new n(s),i.once("ready",o.resolve),i.on("paste",function(e){a.owner.request("add-file",[e])}),i.init(),o.promise()}},destroy:function(){this.paste&&this.paste.destroy()}})}),t("lib/blob",["base","runtime/client"],function(e,t){function n(e,n){var r=this;r.source=n,r.ruid=e,this.size=n.size||0,!n.type&&this.ext&&~"jpg,jpeg,png,gif,bmp".indexOf(this.ext)?this.type="image/"+("jpg"===this.ext?"jpeg":this.ext):this.type=n.type||"application/octet-stream",t.call(r,"Blob"),this.uid=n.uid||this.uid,e&&r.connectRuntime(e)}return e.inherits(t,{constructor:n,slice:function(e,t){return this.exec("slice",e,t)},getSource:function(){return this.source}}),n}),t("lib/file",["base","lib/blob"],function(e,t){function n(e,n){var a;this.name=n.name||"untitled"+r++,a=i.exec(n.name)?RegExp.$1.toLowerCase():"",!a&&n.type&&(a=/\/(jpg|jpeg|png|gif|bmp)$/i.exec(n.type)?RegExp.$1.toLowerCase():"",this.name+="."+a),this.ext=a,this.lastModifiedDate=n.lastModifiedDate||(new Date).toLocaleString(),t.apply(this,arguments)}var r=1,i=/\.([^.]+)$/;return e.inherits(t,n)}),t("lib/filepicker",["base","runtime/client","lib/file"],function(t,n,r){function i(e){if(e=this.options=a.extend({},i.options,e),e.container=a(e.id),!e.container.length)throw new Error("按钮指定错误");e.innerHTML=e.innerHTML||e.label||e.container.html()||"",e.button=a(e.button||document.createElement("div")),e.button.html(e.innerHTML),e.container.html(e.button),n.call(this,"FilePicker",!0)}var a=t.$;return i.options={button:null,container:null,label:null,innerHTML:null,multiple:!0,accept:null,name:"file"},t.inherits(n,{constructor:i,init:function(){var n=this,i=n.options,o=i.button;o.addClass("webuploader-pick"),n.on("all",function(e){var t;switch(e){case"mouseenter":o.addClass("webuploader-pick-hover");break;case"mouseleave":o.removeClass("webuploader-pick-hover");break;case"change":t=n.exec("getFiles"),n.trigger("select",a.map(t,function(e){return e=new r(n.getRuid(),e),e._refer=i.container,e}),i.container)}}),n.connectRuntime(i,function(){n.refresh(),n.exec("init",i),n.trigger("ready")}),this._resizeHandler=t.bindFn(this.refresh,this),a(e).on("resize",this._resizeHandler)},refresh:function(){var e=this.getRuntime().getContainer(),t=this.options.button,n=t.outerWidth?t.outerWidth():t.width(),r=t.outerHeight?t.outerHeight():t.height(),i=t.offset();n&&r&&e.css({bottom:"auto",right:"auto",width:n+"px",height:r+"px"}).offset(i)},enable:function(){var e=this.options.button;e.removeClass("webuploader-pick-disable"),this.refresh()},disable:function(){var e=this.options.button;this.getRuntime().getContainer().css({top:"-99999px"}),e.addClass("webuploader-pick-disable")},destroy:function(){var t=this.options.button;a(e).off("resize",this._resizeHandler),t.removeClass("webuploader-pick-disable webuploader-pick-hover webuploader-pick")}}),i}),t("widgets/filepicker",["base","uploader","lib/filepicker","widgets/widget"],function(e,t,n){var r=e.$;return r.extend(t.options,{pick:null,accept:null}),t.register({name:"picker",init:function(e){return this.pickers=[],e.pick&&this.addBtn(e.pick)},refresh:function(){r.each(this.pickers,function(){this.refresh()})},addBtn:function(t){var i=this,a=i.options,o=a.accept,s=[];if(t)return r.isPlainObject(t)||(t={id:t}),r(t.id).each(function(){var l,u,c;c=e.Deferred(),l=r.extend({},t,{accept:r.isPlainObject(o)?[o]:o,swf:a.swf,runtimeOrder:a.runtimeOrder,id:this}),u=new n(l),u.once("ready",c.resolve),u.on("select",function(e){i.owner.request("add-file",[e])}),u.init(),i.pickers.push(u),s.push(c.promise())}),e.when.apply(e,s)},disable:function(){r.each(this.pickers,function(){this.disable()})},enable:function(){r.each(this.pickers,function(){this.enable()})},destroy:function(){r.each(this.pickers,function(){this.destroy()}),this.pickers=null}})}),t("lib/image",["base","runtime/client","lib/blob"],function(e,t,n){function r(e){this.options=i.extend({},r.options,e),t.call(this,"Image"),this.on("load",function(){this._info=this.exec("info"),this._meta=this.exec("meta")})}var i=e.$;return r.options={quality:90,crop:!1,preserveHeaders:!1,allowMagnify:!1},e.inherits(t,{constructor:r,info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},loadFromBlob:function(e){var t=this,n=e.getRuid();this.connectRuntime(n,function(){t.exec("init",t.options),t.exec("loadFromBlob",e)})},resize:function(){var t=e.slice(arguments);return this.exec.apply(this,["resize"].concat(t))},crop:function(){var t=e.slice(arguments);return this.exec.apply(this,["crop"].concat(t))},getAsDataUrl:function(e){return this.exec("getAsDataUrl",e)},getAsBlob:function(e){var t=this.exec("getAsBlob",e);return new n(this.getRuid(),t)}}),r}),t("widgets/image",["base","uploader","lib/image","widgets/widget"],function(e,t,n){var r,i=e.$;return r=function(e){var t=0,n=[],r=function(){for(var r;n.length&&t<e;)r=n.shift(),t+=r[0],r[1]()};return function(e,i,a){n.push([i,a]),e.once("destroy",function(){t-=i,setTimeout(r,1)}),setTimeout(r,1)}}(5242880),i.extend(t.options,{thumb:{width:110,height:110,quality:70,allowMagnify:!0,crop:!0,preserveHeaders:!1,type:"image/jpeg"},compress:{width:1600,height:1600,quality:90,allowMagnify:!1,crop:!1,preserveHeaders:!0}}),t.register({name:"image",makeThumb:function(e,t,a,o){var s,l;return e=this.request("get-file",e),e.type.match(/^image/)?(s=i.extend({},this.options.thumb),i.isPlainObject(a)&&(s=i.extend(s,a),a=null),a=a||s.width,o=o||s.height,l=new n(s),l.once("load",function(){e._info=e._info||l.info(),e._meta=e._meta||l.meta(),a<=1&&a>0&&(a=e._info.width*a),o<=1&&o>0&&(o=e._info.height*o),l.resize(a,o)}),l.once("complete",function(){t(!1,l.getAsDataUrl(s.type)),l.destroy()}),l.once("error",function(e){t(e||!0),l.destroy()}),void r(l,e.source.size,function(){e._info&&l.info(e._info),e._meta&&l.meta(e._meta),l.loadFromBlob(e.source)})):void t(!0)},beforeSendFile:function(t){var r,a,o=this.options.compress||this.options.resize,s=o&&o.compressSize||0,l=o&&o.noCompressIfLarger||!1;if(t=this.request("get-file",t),o&&~"image/jpeg,image/jpg".indexOf(t.type)&&!(t.size<s)&&!t._compressed)return o=i.extend({},o),a=e.Deferred(),r=new n(o),a.always(function(){r.destroy(),r=null}),r.once("error",a.reject),r.once("load",function(){var e=o.width,n=o.height;t._info=t._info||r.info(),t._meta=t._meta||r.meta(),e<=1&&e>0&&(e=t._info.width*e),n<=1&&n>0&&(n=t._info.height*n),r.resize(e,n)}),r.once("complete",function(){var e,n;try{e=r.getAsBlob(o.type),n=t.size,(!l||e.size<n)&&(t.source=e,t.size=e.size,t.trigger("resize",e.size,n)),t._compressed=!0,a.resolve()}catch(i){a.resolve()}}),t._info&&r.info(t._info),t._meta&&r.meta(t._meta),r.loadFromBlob(t.source),a.promise()}})}),t("file",["base","mediator"],function(e,t){function n(){return a+o++}function r(e){this.name=e.name||"Untitled",this.size=e.size||0,this.type=e.type||"application/octet-stream",this.lastModifiedDate=e.lastModifiedDate||1*new Date,this.id=n(),this.ext=s.exec(this.name)?RegExp.$1:"",this.statusText="",l[this.id]=r.Status.INITED,this.source=e,this.loaded=0,this.on("error",function(e){this.setStatus(r.Status.ERROR,e)})}var i=e.$,a="WU_FILE_",o=0,s=/\.([^.]+)$/,l={};return i.extend(r.prototype,{setStatus:function(e,t){var n=l[this.id];"undefined"!=typeof t&&(this.statusText=t),e!==n&&(l[this.id]=e,this.trigger("statuschange",e,n))},getStatus:function(){return l[this.id]},getSource:function(){return this.source},destroy:function(){this.off(),delete l[this.id]}}),t.installTo(r.prototype),r.Status={INITED:"inited",QUEUED:"queued",PROGRESS:"progress",ERROR:"error",COMPLETE:"complete",CANCELLED:"cancelled",INTERRUPT:"interrupt",INVALID:"invalid"},r}),t("queue",["base","mediator","file"],function(e,t,n){function r(){this.stats={numOfQueue:0,numOfSuccess:0,numOfCancel:0,numOfProgress:0,numOfUploadFailed:0,numOfInvalid:0,numofDeleted:0,numofInterrupt:0},this._queue=[],this._map={}}var i=e.$,a=n.Status;return i.extend(r.prototype,{append:function(e){return this._queue.push(e),this._fileAdded(e),this},prepend:function(e){return this._queue.unshift(e),this._fileAdded(e),this},getFile:function(e){return"string"!=typeof e?e:this._map[e]},fetch:function(e){var t,n,r=this._queue.length;for(e=e||a.QUEUED,t=0;t<r;t++)if(n=this._queue[t],e===n.getStatus())return n;return null},sort:function(e){"function"==typeof e&&this._queue.sort(e)},getFiles:function(){for(var e,t=[].slice.call(arguments,0),n=[],r=0,a=this._queue.length;r<a;r++)e=this._queue[r],t.length&&!~i.inArray(e.getStatus(),t)||n.push(e);return n},removeFile:function(e){var t=this._map[e.id];t&&(delete this._map[e.id],e.destroy(),this.stats.numofDeleted++)},_fileAdded:function(e){var t=this,n=this._map[e.id];n||(this._map[e.id]=e,e.on("statuschange",function(e,n){t._onFileStatusChange(e,n)}))},_onFileStatusChange:function(e,t){var n=this.stats;switch(t){case a.PROGRESS:n.numOfProgress--;break;case a.QUEUED:n.numOfQueue--;break;case a.ERROR:n.numOfUploadFailed--;break;case a.INVALID:n.numOfInvalid--;break;case a.INTERRUPT:n.numofInterrupt--}switch(e){case a.QUEUED:n.numOfQueue++;break;case a.PROGRESS:n.numOfProgress++;break;case a.ERROR:n.numOfUploadFailed++;break;case a.COMPLETE:n.numOfSuccess++;break;case a.CANCELLED:n.numOfCancel++;break;case a.INVALID:n.numOfInvalid++;break;case a.INTERRUPT:n.numofInterrupt++}}}),t.installTo(r.prototype),r}),t("widgets/queue",["base","uploader","queue","file","lib/file","runtime/client","widgets/widget"],function(e,t,n,r,i,a){var o=e.$,s=/\.\w+$/,l=r.Status;return t.register({name:"queue",init:function(t){var r,i,s,l,u,c,f,d=this;if(o.isPlainObject(t.accept)&&(t.accept=[t.accept]),t.accept){for(u=[],s=0,i=t.accept.length;s<i;s++)l=t.accept[s].extensions,l&&u.push(l);u.length&&(c="\\."+u.join(",").replace(/,/g,"$|\\.").replace(/\*/g,".*")+"$"),d.accept=new RegExp(c,"i")}if(d.queue=new n,d.stats=d.queue.stats,"html5"===this.request("predict-runtime-type"))return r=e.Deferred(),this.placeholder=f=new a("Placeholder"),f.connectRuntime({runtimeOrder:"html5"},function(){d._ruid=f.getRuid(),r.resolve()}),r.promise()},_wrapFile:function(e){if(!(e instanceof r)){if(!(e instanceof i)){if(!this._ruid)throw new Error("Can't add external files.");e=new i(this._ruid,e)}e=new r(e)}return e},acceptFile:function(e){var t=!e||!e.size||this.accept&&s.exec(e.name)&&!this.accept.test(e.name);return!t},_addFile:function(e){var t=this;if(e=t._wrapFile(e),t.owner.trigger("beforeFileQueued",e))return t.acceptFile(e)?(t.queue.append(e),t.owner.trigger("fileQueued",e),e):void t.owner.trigger("error","Q_TYPE_DENIED",e)},getFile:function(e){return this.queue.getFile(e)},addFile:function(e){var t=this;e.length||(e=[e]),e=o.map(e,function(e){return t._addFile(e)}),t.owner.trigger("filesQueued",e),t.options.auto&&setTimeout(function(){t.request("start-upload")},20)},getStats:function(){
return this.stats},removeFile:function(e,t){var n=this;e=e.id?e:n.queue.getFile(e),this.request("cancel-file",e),t&&this.queue.removeFile(e)},getFiles:function(){return this.queue.getFiles.apply(this.queue,arguments)},fetchFile:function(){return this.queue.fetch.apply(this.queue,arguments)},retry:function(e,t){var n,r,i,a=this;if(e)return e=e.id?e:a.queue.getFile(e),e.setStatus(l.QUEUED),void(t||a.request("start-upload"));for(n=a.queue.getFiles(l.ERROR),r=0,i=n.length;r<i;r++)e=n[r],e.setStatus(l.QUEUED);a.request("start-upload")},sortFiles:function(){return this.queue.sort.apply(this.queue,arguments)},reset:function(){this.owner.trigger("reset"),this.queue=new n,this.stats=this.queue.stats},destroy:function(){this.reset(),this.placeholder&&this.placeholder.destroy()}})}),t("widgets/runtime",["uploader","runtime/runtime","widgets/widget"],function(e,t){return e.support=function(){return t.hasRuntime.apply(t,arguments)},e.register({name:"runtime",init:function(){if(!this.predictRuntimeType())throw Error("Runtime Error")},predictRuntimeType:function(){var e,n,r=this.options.runtimeOrder||t.orders,i=this.type;if(!i)for(r=r.split(/\s*,\s*/g),e=0,n=r.length;e<n;e++)if(t.hasRuntime(r[e])){this.type=i=r[e];break}return i}})}),t("lib/transport",["base","runtime/client","mediator"],function(e,t,n){function r(e){var n=this;e=n.options=i.extend(!0,{},r.options,e||{}),t.call(this,"Transport"),this._blob=null,this._formData=e.formData||{},this._headers=e.headers||{},this.on("progress",this._timeout),this.on("load error",function(){n.trigger("progress",1),clearTimeout(n._timer)})}var i=e.$;return r.options={server:"",method:"POST",withCredentials:!1,fileVal:"file",timeout:12e4,formData:{},headers:{},sendAsBinary:!1},i.extend(r.prototype,{appendBlob:function(e,t,n){var r=this,i=r.options;r.getRuid()&&r.disconnectRuntime(),r.connectRuntime(t.ruid,function(){r.exec("init")}),r._blob=t,i.fileVal=e||i.fileVal,i.filename=n||i.filename},append:function(e,t){"object"==typeof e?i.extend(this._formData,e):this._formData[e]=t},setRequestHeader:function(e,t){"object"==typeof e?i.extend(this._headers,e):this._headers[e]=t},send:function(e){this.exec("send",e),this._timeout()},abort:function(){return clearTimeout(this._timer),this.exec("abort")},destroy:function(){this.trigger("destroy"),this.off(),this.exec("destroy"),this.disconnectRuntime()},getResponse:function(){return this.exec("getResponse")},getResponseAsJson:function(){return this.exec("getResponseAsJson")},getStatus:function(){return this.exec("getStatus")},_timeout:function(){var e=this,t=e.options.timeout;t&&(clearTimeout(e._timer),e._timer=setTimeout(function(){e.abort(),e.trigger("error","timeout")},t))}}),n.installTo(r.prototype),r}),t("widgets/upload",["base","uploader","file","lib/transport","widgets/widget"],function(e,t,n,r){function i(e,t){var n,r,i=[],a=e.source,o=a.size,s=t?Math.ceil(o/t):1,l=0,u=0;for(r={file:e,has:function(){return!!i.length},shift:function(){return i.shift()},unshift:function(e){i.unshift(e)}};u<s;)n=Math.min(t,o-l),i.push({file:e,start:l,end:t?l+n:o,total:o,chunks:s,chunk:u++,cuted:r}),l+=n;return e.blocks=i.concat(),e.remaning=i.length,r}var a=e.$,o=e.isPromise,s=n.Status;a.extend(t.options,{prepareNextFile:!1,chunked:!1,chunkSize:5242880,chunkRetry:2,threads:3,formData:{}}),t.register({name:"upload",init:function(){var t=this.owner,n=this;this.runing=!1,this.progress=!1,t.on("startUpload",function(){n.progress=!0}).on("uploadFinished",function(){n.progress=!1}),this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this.__tick=e.bindFn(this._tick,this),t.on("uploadComplete",function(e){e.blocks&&a.each(e.blocks,function(e,t){t.transport&&(t.transport.abort(),t.transport.destroy()),delete t.transport}),delete e.blocks,delete e.remaning})},reset:function(){this.request("stop-upload",!0),this.runing=!1,this.pool=[],this.stack=[],this.pending=[],this.remaning=0,this._trigged=!1,this._promise=null},startUpload:function(t){var n=this;if(a.each(n.request("get-files",s.INVALID),function(){n.request("remove-file",this)}),t)if(t=t.id?t:n.request("get-file",t),t.getStatus()===s.INTERRUPT)a.each(n.pool,function(e,n){n.file===t&&n.transport&&n.transport.send()}),t.setStatus(s.QUEUED);else{if(t.getStatus()===s.PROGRESS)return;t.setStatus(s.QUEUED)}else a.each(n.request("get-files",[s.INITED]),function(){this.setStatus(s.QUEUED)});if(!n.runing){n.runing=!0;var r=[];a.each(n.pool,function(e,t){var i=t.file;i.getStatus()===s.INTERRUPT&&(r.push(i),n._trigged=!1,t.transport&&t.transport.send())});for(var t;t=r.shift();)t.setStatus(s.PROGRESS);t||a.each(n.request("get-files",s.INTERRUPT),function(){this.setStatus(s.PROGRESS)}),n._trigged=!1,e.nextTick(n.__tick),n.owner.trigger("startUpload")}},stopUpload:function(t,n){var r=this;if(t===!0&&(n=t,t=null),r.runing!==!1){if(t){if(t=t.id?t:r.request("get-file",t),t.getStatus()!==s.PROGRESS&&t.getStatus()!==s.QUEUED)return;return t.setStatus(s.INTERRUPT),a.each(r.pool,function(e,n){n.file===t&&(n.transport&&n.transport.abort(),r._putback(n),r._popBlock(n))}),e.nextTick(r.__tick)}r.runing=!1,this._promise&&this._promise.file&&this._promise.file.setStatus(s.INTERRUPT),n&&a.each(r.pool,function(e,t){t.transport&&t.transport.abort(),t.file.setStatus(s.INTERRUPT)}),r.owner.trigger("stopUpload")}},cancelFile:function(e){e=e.id?e:this.request("get-file",e),e.blocks&&a.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),e.setStatus(s.CANCELLED),this.owner.trigger("fileDequeued",e)},isInProgress:function(){return!!this.progress},_getStats:function(){return this.request("get-stats")},skipFile:function(e,t){e=e.id?e:this.request("get-file",e),e.setStatus(t||s.COMPLETE),e.skipped=!0,e.blocks&&a.each(e.blocks,function(e,t){var n=t.transport;n&&(n.abort(),n.destroy(),delete t.transport)}),this.owner.trigger("uploadSkip",e)},_tick:function(){var t,n,r=this,i=r.options;return r._promise?r._promise.always(r.__tick):void(r.pool.length<i.threads&&(n=r._nextBlock())?(r._trigged=!1,t=function(t){r._promise=null,t&&t.file&&r._startSend(t),e.nextTick(r.__tick)},r._promise=o(n)?n.always(t):t(n)):r.remaning||r._getStats().numOfQueue||r._getStats().numofInterrupt||(r.runing=!1,r._trigged||e.nextTick(function(){r.owner.trigger("uploadFinished")}),r._trigged=!0))},_putback:function(e){var t;e.cuted.unshift(e),t=this.stack.indexOf(e.cuted),~t||this.stack.unshift(e.cuted)},_getStack:function(){for(var e,t=0;e=this.stack[t++];){if(e.has()&&e.file.getStatus()===s.PROGRESS)return e;(!e.has()||e.file.getStatus()!==s.PROGRESS&&e.file.getStatus()!==s.INTERRUPT)&&this.stack.splice(--t,1)}return null},_nextBlock:function(){var e,t,n,r,a=this,s=a.options;return(e=this._getStack())?(s.prepareNextFile&&!a.pending.length&&a._prepareNextFile(),e.shift()):a.runing?(!a.pending.length&&a._getStats().numOfQueue&&a._prepareNextFile(),t=a.pending.shift(),n=function(t){return t?(e=i(t,s.chunked?s.chunkSize:0),a.stack.push(e),e.shift()):null},o(t)?(r=t.file,t=t[t.pipe?"pipe":"then"](n),t.file=r,t):n(t)):void 0},_prepareNextFile:function(){var e,t=this,n=t.request("fetch-file"),r=t.pending;n&&(e=t.request("before-send-file",n,function(){return n.getStatus()===s.PROGRESS||n.getStatus()===s.INTERRUPT?n:t._finishFile(n)}),t.owner.trigger("uploadStart",n),n.setStatus(s.PROGRESS),e.file=n,e.done(function(){var t=a.inArray(e,r);~t&&r.splice(t,1,n)}),e.fail(function(e){n.setStatus(s.ERROR,e),t.owner.trigger("uploadError",n,e),t.owner.trigger("uploadComplete",n)}),r.push(e))},_popBlock:function(e){var t=a.inArray(e,this.pool);this.pool.splice(t,1),e.file.remaning--,this.remaning--},_startSend:function(t){var n,r=this,i=t.file;return i.getStatus()!==s.PROGRESS?void(i.getStatus()===s.INTERRUPT&&r._putback(t)):(r.pool.push(t),r.remaning++,t.blob=1===t.chunks?i.source:i.source.slice(t.start,t.end),n=r.request("before-send",t,function(){i.getStatus()===s.PROGRESS?r._doSend(t):(r._popBlock(t),e.nextTick(r.__tick))}),void n.fail(function(){1===i.remaning?r._finishFile(i).always(function(){t.percentage=1,r._popBlock(t),r.owner.trigger("uploadComplete",i),e.nextTick(r.__tick)}):(t.percentage=1,r.updateFileProgress(i),r._popBlock(t),e.nextTick(r.__tick))}))},_doSend:function(t){var n,i,o=this,l=o.owner,u=o.options,c=t.file,f=new r(u),d=a.extend({},u.formData),h=a.extend({},u.headers);t.transport=f,f.on("destroy",function(){delete t.transport,o._popBlock(t),e.nextTick(o.__tick)}),f.on("progress",function(e){t.percentage=e,o.updateFileProgress(c)}),n=function(e){var n;return i=f.getResponseAsJson()||{},i._raw=f.getResponse(),n=function(t){e=t},l.trigger("uploadAccept",t,i,n)||(e=e||"server"),e},f.on("error",function(e,r){t.retried=t.retried||0,t.chunks>1&&~"http,abort".indexOf(e)&&t.retried<u.chunkRetry?(t.retried++,f.send()):(r||"server"!==e||(e=n(e)),c.setStatus(s.ERROR,e),l.trigger("uploadError",c,e),l.trigger("uploadComplete",c))}),f.on("load",function(){var e;return(e=n())?void f.trigger("error",e,!0):void(1===c.remaning?o._finishFile(c,i):f.destroy())}),d=a.extend(d,{id:c.id,name:c.name,type:c.type,lastModifiedDate:c.lastModifiedDate,size:c.size}),t.chunks>1&&a.extend(d,{chunks:t.chunks,chunk:t.chunk}),l.trigger("uploadBeforeSend",t,d,h),f.appendBlob(u.fileVal,t.blob,c.name),f.append(d),f.setRequestHeader(h),f.send()},_finishFile:function(e,t,n){var r=this.owner;return r.request("after-send-file",arguments,function(){e.setStatus(s.COMPLETE),r.trigger("uploadSuccess",e,t,n)}).fail(function(t){e.getStatus()===s.PROGRESS&&e.setStatus(s.ERROR,t),r.trigger("uploadError",e,t)}).always(function(){r.trigger("uploadComplete",e)})},updateFileProgress:function(e){var t=0,n=0;e.blocks&&(a.each(e.blocks,function(e,t){n+=(t.percentage||0)*(t.end-t.start)}),t=n/e.size,this.owner.trigger("uploadProgress",e,t||0))}})}),t("widgets/validator",["base","uploader","file","widgets/widget"],function(e,t,n){var r,i=e.$,a={};return r={addValidator:function(e,t){a[e]=t},removeValidator:function(e){delete a[e]}},t.register({name:"validator",init:function(){var t=this;e.nextTick(function(){i.each(a,function(){this.call(t.owner)})})}}),r.addValidator("fileNumLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileNumLimit,10),i=!0;r&&(e.on("beforeFileQueued",function(e){return n>=r&&i&&(i=!1,this.trigger("error","Q_EXCEED_NUM_LIMIT",r,e),setTimeout(function(){i=!0},1)),!(n>=r)}),e.on("fileQueued",function(){n++}),e.on("fileDequeued",function(){n--}),e.on("reset",function(){n=0}))}),r.addValidator("fileSizeLimit",function(){var e=this,t=e.options,n=0,r=parseInt(t.fileSizeLimit,10),i=!0;r&&(e.on("beforeFileQueued",function(e){var t=n+e.size>r;return t&&i&&(i=!1,this.trigger("error","Q_EXCEED_SIZE_LIMIT",r,e),setTimeout(function(){i=!0},1)),!t}),e.on("fileQueued",function(e){n+=e.size}),e.on("fileDequeued",function(e){n-=e.size}),e.on("reset",function(){n=0}))}),r.addValidator("fileSingleSizeLimit",function(){var e=this,t=e.options,r=t.fileSingleSizeLimit;r&&e.on("beforeFileQueued",function(e){if(e.size>r)return e.setStatus(n.Status.INVALID,"exceed_size"),this.trigger("error","F_EXCEED_SIZE",r,e),!1})}),r.addValidator("duplicate",function(){function e(e){for(var t,n=0,r=0,i=e.length;r<i;r++)t=e.charCodeAt(r),n=t+(n<<6)+(n<<16)-n;return n}var t=this,n=t.options,r={};n.duplicate||(t.on("beforeFileQueued",function(t){var n=t.__hash||(t.__hash=e(t.name+t.size+t.lastModifiedDate));if(r[n])return this.trigger("error","F_DUPLICATE",t),!1}),t.on("fileQueued",function(e){var t=e.__hash;t&&(r[t]=!0)}),t.on("fileDequeued",function(e){var t=e.__hash;t&&delete r[t]}),t.on("reset",function(){r={}}))}),r}),t("lib/md5",["runtime/client","mediator"],function(e,t){function n(){e.call(this,"Md5")}return t.installTo(n.prototype),n.prototype.loadFromBlob=function(e){var t=this;t.getRuid()&&t.disconnectRuntime(),t.connectRuntime(e.ruid,function(){t.exec("init"),t.exec("loadFromBlob",e)})},n.prototype.getResult=function(){return this.exec("getResult")},n}),t("widgets/md5",["base","uploader","lib/md5","lib/blob","widgets/widget"],function(e,t,n,r){return t.register({name:"md5",md5File:function(t,i,a){var o=new n,s=e.Deferred(),l=t instanceof r?t:this.request("get-file",t).source;return o.on("progress load",function(e){e=e||{},s.notify(e.total?e.loaded/e.total:1)}),o.on("complete",function(){s.resolve(o.getResult())}),o.on("error",function(e){s.reject(e)}),arguments.length>1&&(i=i||0,a=a||0,i<0&&(i=l.size+i),a<0&&(a=l.size+a),a=Math.min(a,l.size),l=l.slice(i,a)),o.loadFromBlob(l),s.promise()}})}),t("runtime/compbase",[],function(){function e(e,t){this.owner=e,this.options=e.options,this.getRuntime=function(){return t},this.getRuid=function(){return t.uid},this.trigger=function(){return e.trigger.apply(e,arguments)}}return e}),t("runtime/html5/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function i(){var e={},r=this,i=this.destroy;n.apply(r,arguments),r.type=a,r.exec=function(n,i){var a,s=this,l=s.uid,u=t.slice(arguments,2);if(o[n]&&(a=e[l]=e[l]||new o[n](s,r),a[i]))return a[i].apply(a,u)},r.destroy=function(){return i&&i.apply(this,arguments)}}var a="html5",o={};return t.inherits(n,{constructor:i,init:function(){var e=this;setTimeout(function(){e.trigger("ready")},1)}}),i.register=function(e,n){var i=o[e]=t.inherits(r,n);return i},e.Blob&&e.FileReader&&e.DataView&&n.addRuntime(a,i),i}),t("runtime/html5/blob",["runtime/html5/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.owner.source,i=r.slice||r.webkitSlice||r.mozSlice;return r=i.call(r,e,n),new t(this.getRuid(),r)}})}),t("runtime/html5/dnd",["base","runtime/html5/runtime","lib/file"],function(e,t,n){var r=e.$,i="webuploader-dnd-";return t.register("DragAndDrop",{init:function(){var t=this.elem=this.options.container;this.dragEnterHandler=e.bindFn(this._dragEnterHandler,this),this.dragOverHandler=e.bindFn(this._dragOverHandler,this),this.dragLeaveHandler=e.bindFn(this._dragLeaveHandler,this),this.dropHandler=e.bindFn(this._dropHandler,this),this.dndOver=!1,t.on("dragenter",this.dragEnterHandler),t.on("dragover",this.dragOverHandler),t.on("dragleave",this.dragLeaveHandler),t.on("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).on("dragover",this.dragOverHandler),r(document).on("drop",this.dropHandler))},_dragEnterHandler:function(e){var t,n=this,r=n._denied||!1;return e=e.originalEvent||e,n.dndOver||(n.dndOver=!0,t=e.dataTransfer.items,t&&t.length&&(n._denied=r=!n.trigger("accept",t)),n.elem.addClass(i+"over"),n.elem[r?"addClass":"removeClass"](i+"denied")),e.dataTransfer.dropEffect=r?"none":"copy",!1},_dragOverHandler:function(e){var t=this.elem.parent().get(0);return!(t&&!r.contains(t,e.currentTarget))&&(clearTimeout(this._leaveTimer),this._dragEnterHandler.call(this,e),!1)},_dragLeaveHandler:function(){var e,t=this;return e=function(){t.dndOver=!1,t.elem.removeClass(i+"over "+i+"denied")},clearTimeout(t._leaveTimer),t._leaveTimer=setTimeout(e,100),!1},_dropHandler:function(e){var t,a,o=this,s=o.getRuid(),l=o.elem.parent().get(0);if(l&&!r.contains(l,e.currentTarget))return!1;e=e.originalEvent||e,t=e.dataTransfer;try{a=t.getData("text/html")}catch(u){}return a?void 0:(o._getTansferFiles(t,function(e){o.trigger("drop",r.map(e,function(e){return new n(s,e)}))}),o.dndOver=!1,o.elem.removeClass(i+"over"),!1)},_getTansferFiles:function(t,n){var r,i,a,o,s,l,u,c=[],f=[];for(r=t.items,i=t.files,u=!(!r||!r[0].webkitGetAsEntry),s=0,l=i.length;s<l;s++)a=i[s],o=r&&r[s],u&&o.webkitGetAsEntry().isDirectory?f.push(this._traverseDirectoryTree(o.webkitGetAsEntry(),c)):c.push(a);e.when.apply(e,f).done(function(){c.length&&n(c)})},_traverseDirectoryTree:function(t,n){var r=e.Deferred(),i=this;return t.isFile?t.file(function(e){n.push(e),r.resolve()}):t.isDirectory&&t.createReader().readEntries(function(t){var a,o=t.length,s=[],l=[];for(a=0;a<o;a++)s.push(i._traverseDirectoryTree(t[a],l));e.when.apply(e,s).then(function(){n.push.apply(n,l),r.resolve()},r.reject)}),r.promise()},destroy:function(){var e=this.elem;e&&(e.off("dragenter",this.dragEnterHandler),e.off("dragover",this.dragOverHandler),e.off("dragleave",this.dragLeaveHandler),e.off("drop",this.dropHandler),this.options.disableGlobalDnd&&(r(document).off("dragover",this.dragOverHandler),r(document).off("drop",this.dropHandler)))}})}),t("runtime/html5/filepaste",["base","runtime/html5/runtime","lib/file"],function(e,t,n){return t.register("FilePaste",{init:function(){var t,n,r,i,a=this.options,o=this.elem=a.container,s=".*";if(a.accept){for(t=[],n=0,r=a.accept.length;n<r;n++)i=a.accept[n].mimeTypes,i&&t.push(i);t.length&&(s=t.join(","),s=s.replace(/,/g,"|").replace(/\*/g,".*"))}this.accept=s=new RegExp(s,"i"),this.hander=e.bindFn(this._pasteHander,this),o.on("paste",this.hander)},_pasteHander:function(e){var t,r,i,a,o,s=[],l=this.getRuid();for(e=e.originalEvent||e,t=e.clipboardData.items,a=0,o=t.length;a<o;a++)r=t[a],"file"===r.kind&&(i=r.getAsFile())&&s.push(new n(l,i));s.length&&(e.preventDefault(),e.stopPropagation(),this.trigger("paste",s))},destroy:function(){this.elem.off("paste",this.hander)}})}),t("runtime/html5/filepicker",["base","runtime/html5/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(){var e,t,r,i,a=this.getRuntime().getContainer(),o=this,s=o.owner,l=o.options,u=this.label=n(document.createElement("label")),c=this.input=n(document.createElement("input"));if(c.attr("type","file"),c.css({position:"absolute",clip:"rect(1px,1px,1px,1px)"}),c.attr("name",l.name),c.addClass("webuploader-element-invisible"),u.on("click",function(){c.trigger("click")}),u.css({opacity:0,width:"100%",height:"100%",display:"block",cursor:"pointer",background:"#ffffff"}),l.multiple&&c.attr("multiple","multiple"),l.accept&&l.accept.length>0){for(e=[],t=0,r=l.accept.length;t<r;t++)e.push(l.accept[t].mimeTypes);c.attr("accept",e.join(","))}a.append(c),a.append(u),i=function(e){s.trigger(e.type)},c.on("change",function(e){var t,r=arguments.callee;o.files=e.target.files,t=this.cloneNode(!0),t.value=null,this.parentNode.replaceChild(t,this),c.off(),c=n(t).on("change",r).on("mouseenter mouseleave",i),s.trigger("change")}),u.on("mouseenter mouseleave",i)},getFiles:function(){return this.files},destroy:function(){this.input.off(),this.label.off()}})}),t("runtime/html5/util",["base"],function(t){var n=e.createObjectURL&&e||e.URL&&URL.revokeObjectURL&&URL||e.webkitURL,r=t.noop,i=r;return n&&(r=function(){return n.createObjectURL.apply(n,arguments)},i=function(){return n.revokeObjectURL.apply(n,arguments)}),{createObjectURL:r,revokeObjectURL:i,dataURL2Blob:function(e){var t,n,r,i,a,o;for(o=e.split(","),t=~o[0].indexOf("base64")?atob(o[1]):decodeURIComponent(o[1]),r=new ArrayBuffer(t.length),n=new Uint8Array(r),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return a=o[0].split(":")[1].split(";")[0],this.arrayBufferToBlob(r,a)},dataURL2ArrayBuffer:function(e){var t,n,r,i;for(i=e.split(","),t=~i[0].indexOf("base64")?atob(i[1]):decodeURIComponent(i[1]),n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n.buffer},arrayBufferToBlob:function(t,n){var r,i=e.BlobBuilder||e.WebKitBlobBuilder;return i?(r=new i,r.append(t),r.getBlob(n)):new Blob([t],n?{type:n}:{})},canvasToDataUrl:function(e,t,n){return e.toDataURL(t,n/100)},parseMeta:function(e,t){t(!1,{})},updateImageHead:function(e){return e}}}),t("runtime/html5/imagemeta",["runtime/html5/util"],function(e){var t;return t={parsers:{65505:[]},maxMetaDataSize:262144,parse:function(e,t){var n=this,r=new FileReader;r.onload=function(){t(!1,n._parse(this.result)),r=r.onload=r.onerror=null},r.onerror=function(e){t(e.message),r=r.onload=r.onerror=null},e=e.slice(0,n.maxMetaDataSize),r.readAsArrayBuffer(e.getSource())},_parse:function(e,n){if(!(e.byteLength<6)){var r,i,a,o,s=new DataView(e),l=2,u=s.byteLength-4,c=l,f={};if(65496===s.getUint16(0)){for(;l<u&&(r=s.getUint16(l),r>=65504&&r<=65519||65534===r)&&(i=s.getUint16(l+2)+2,!(l+i>s.byteLength));){if(a=t.parsers[r],!n&&a)for(o=0;o<a.length;o+=1)a[o].call(t,s,l,i,f);l+=i,c=l}c>6&&(e.slice?f.imageHead=e.slice(2,c):f.imageHead=new Uint8Array(e).subarray(2,c))}return f}},updateImageHead:function(e,t){var n,r,i,a=this._parse(e,!0);return i=2,a.imageHead&&(i=2+a.imageHead.byteLength),r=e.slice?e.slice(i):new Uint8Array(e).subarray(i),n=new Uint8Array(t.byteLength+2+r.byteLength),n[0]=255,n[1]=216,n.set(new Uint8Array(t),2),n.set(new Uint8Array(r),t.byteLength+2),n.buffer}},e.parseMeta=function(){return t.parse.apply(t,arguments)},e.updateImageHead=function(){return t.updateImageHead.apply(t,arguments)},t}),t("runtime/html5/imagemeta/exif",["base","runtime/html5/imagemeta"],function(e,t){var n={};return n.ExifMap=function(){return this},n.ExifMap.prototype.map={Orientation:274},n.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},n.exifTagTypes={1:{getValue:function(e,t){return e.getUint8(t)},size:1},2:{getValue:function(e,t){return String.fromCharCode(e.getUint8(t))},size:1,ascii:!0},3:{getValue:function(e,t,n){return e.getUint16(t,n)},size:2},4:{getValue:function(e,t,n){return e.getUint32(t,n)},size:4},5:{getValue:function(e,t,n){return e.getUint32(t,n)/e.getUint32(t+4,n)},size:8},9:{getValue:function(e,t,n){return e.getInt32(t,n)},size:4},10:{getValue:function(e,t,n){return e.getInt32(t,n)/e.getInt32(t+4,n)},size:8}},n.exifTagTypes[7]=n.exifTagTypes[1],n.getExifValue=function(t,r,i,a,o,s){var l,u,c,f,d,h,p=n.exifTagTypes[a];if(!p)return void e.log("Invalid Exif data: Invalid tag type.");if(l=p.size*o,u=l>4?r+t.getUint32(i+8,s):i+8,u+l>t.byteLength)return void e.log("Invalid Exif data: Invalid data offset.");if(1===o)return p.getValue(t,u,s);for(c=[],f=0;f<o;f+=1)c[f]=p.getValue(t,u+f*p.size,s);if(p.ascii){for(d="",f=0;f<c.length&&(h=c[f],"\0"!==h);f+=1)d+=h;return d}return c},n.parseExifTag=function(e,t,r,i,a){var o=e.getUint16(r,i);a.exif[o]=n.getExifValue(e,t,r,e.getUint16(r+2,i),e.getUint32(r+4,i),i)},n.parseExifTags=function(t,n,r,i,a){var o,s,l;if(r+6>t.byteLength)return void e.log("Invalid Exif data: Invalid directory offset.");if(o=t.getUint16(r,i),s=r+2+12*o,s+4>t.byteLength)return void e.log("Invalid Exif data: Invalid directory size.");for(l=0;l<o;l+=1)this.parseExifTag(t,n,r+2+12*l,i,a);return t.getUint32(s,i)},n.parseExifData=function(t,r,i,a){var o,s,l=r+10;if(1165519206===t.getUint32(r+4)){if(l+8>t.byteLength)return void e.log("Invalid Exif data: Invalid segment size.");if(0!==t.getUint16(r+8))return void e.log("Invalid Exif data: Missing byte alignment offset.");switch(t.getUint16(l)){case 18761:o=!0;break;case 19789:o=!1;break;default:return void e.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==t.getUint16(l+2,o))return void e.log("Invalid Exif data: Missing TIFF marker.");s=t.getUint32(l+4,o),a.exif=new n.ExifMap,s=n.parseExifTags(t,l,l+s,o,a)}},t.parsers[65505].push(n.parseExifData),n}),t("runtime/html5/jpegencoder",[],function(e,t,n){function r(e){function t(e){for(var t=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var r=E((t[n]*e+50)/100);r<1?r=1:r>255&&(r=255),S[F[n]]=r}for(var i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;a<64;a++){var o=E((i[a]*e+50)/100);o<1?o=1:o>255&&(o=255),T[F[a]]=o}for(var s=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],l=0,u=0;u<8;u++)for(var c=0;c<8;c++)A[l]=1/(S[F[l]]*s[u]*s[c]*8),R[l]=1/(T[F[l]]*s[u]*s[c]*8),l++}function n(e,t){for(var n=0,r=0,i=new Array,a=1;a<=16;a++){for(var o=1;o<=e[a];o++)i[t[r]]=[],i[t[r]][0]=n,i[t[r]][1]=a,r++,n++;n*=2}return i}function r(){b=n(z,H),_=n(G,W),w=n(q,V),x=n(Z,X)}function i(){for(var e=1,t=2,n=1;n<=15;n++){for(var r=e;r<t;r++)D[32767+r]=n,I[32767+r]=[],I[32767+r][1]=n,I[32767+r][0]=r;for(var i=-(t-1);i<=-e;i++)D[32767+i]=n,I[32767+i]=[],I[32767+i][1]=n,I[32767+i][0]=t-1+i;e<<=1,t<<=1}}function a(){for(var e=0;e<256;e++)j[e]=19595*e,j[e+256>>0]=38470*e,j[e+512>>0]=7471*e+32768,j[e+768>>0]=-11059*e,j[e+1024>>0]=-21709*e,j[e+1280>>0]=32768*e+8421375,j[e+1536>>0]=-27439*e,j[e+1792>>0]=-5329*e}function o(e){for(var t=e[0],n=e[1]-1;n>=0;)t&1<<n&&(P|=1<<B),n--,B--,B<0&&(255==P?(s(255),s(0)):s(P),B=7,P=0)}function s(e){L.push(N[e])}function l(e){s(e>>8&255),s(255&e)}function u(e,t){var n,r,i,a,o,s,l,u,c,f=0,d=8,h=64;for(c=0;c<d;++c){n=e[f],r=e[f+1],i=e[f+2],a=e[f+3],o=e[f+4],s=e[f+5],l=e[f+6],u=e[f+7];var p=n+u,g=n-u,m=r+l,v=r-l,y=i+s,b=i-s,_=a+o,w=a-o,x=p+_,k=p-_,E=m+y,S=m-y;e[f]=x+E,e[f+4]=x-E;var T=.707106781*(S+k);e[f+2]=k+T,e[f+6]=k-T,x=w+b,E=b+v,S=v+g;var A=.382683433*(x-S),R=.5411961*x+A,I=1.306562965*S+A,D=.707106781*E,O=g+D,L=g-D;e[f+5]=L+R,e[f+3]=L-R,e[f+1]=O+I,e[f+7]=O-I,f+=8}for(f=0,c=0;c<d;++c){n=e[f],r=e[f+8],i=e[f+16],a=e[f+24],o=e[f+32],s=e[f+40],l=e[f+48],u=e[f+56];var P=n+u,B=n-u,M=r+l,U=r-l,$=i+s,N=i-s,j=a+o,F=a-o,z=P+j,H=P-j,q=M+$,V=M-$;e[f]=z+q,e[f+32]=z-q;var G=.707106781*(V+H);e[f+16]=H+G,e[f+48]=H-G,z=F+N,q=N+U,V=U+B;var W=.382683433*(z-V),Z=.5411961*z+W,X=1.306562965*V+W,Y=.707106781*q,Q=B+Y,K=B-Y;e[f+40]=K+Z,e[f+24]=K-Z,e[f+8]=Q+X,e[f+56]=Q-X,f++}var J;for(c=0;c<h;++c)J=e[c]*t[c],C[c]=J>0?J+.5|0:J-.5|0;return C}function c(){l(65504),l(16),s(74),s(70),s(73),s(70),s(0),s(1),s(1),s(0),l(1),l(1),s(0),s(0)}function f(e,t){l(65472),l(17),s(8),l(t),l(e),s(3),s(1),s(17),s(0),s(2),s(17),s(1),s(3),s(17),s(1)}function d(){l(65499),l(132),s(0);for(var e=0;e<64;e++)s(S[e]);s(1);for(var t=0;t<64;t++)s(T[t])}function h(){l(65476),l(418),s(0);for(var e=0;e<16;e++)s(z[e+1]);for(var t=0;t<=11;t++)s(H[t]);s(16);for(var n=0;n<16;n++)s(q[n+1]);for(var r=0;r<=161;r++)s(V[r]);s(1);for(var i=0;i<16;i++)s(G[i+1]);for(var a=0;a<=11;a++)s(W[a]);s(17);for(var o=0;o<16;o++)s(Z[o+1]);for(var u=0;u<=161;u++)s(X[u])}function p(){l(65498),l(12),s(3),s(1),s(0),s(2),s(17),s(3),s(17),s(0),s(63),s(0)}function g(e,t,n,r,i){for(var a,s=i[0],l=i[240],c=16,f=63,d=64,h=u(e,t),p=0;p<d;++p)O[F[p]]=h[p];var g=O[0]-n;n=O[0],0==g?o(r[0]):(a=32767+g,o(r[D[a]]),o(I[a]));for(var m=63;m>0&&0==O[m];m--);if(0==m)return o(s),n;for(var v,y=1;y<=m;){for(var b=y;0==O[y]&&y<=m;++y);var _=y-b;if(_>=c){v=_>>4;for(var w=1;w<=v;++w)o(l);_=15&_}a=32767+O[y],o(i[(_<<4)+D[a]]),o(I[a]),y++}return m!=f&&o(s),n}function m(){for(var e=String.fromCharCode,t=0;t<256;t++)N[t]=e(t)}function v(e){if(e<=0&&(e=1),e>100&&(e=100),k!=e){var n=0;n=e<50?Math.floor(5e3/e):Math.floor(200-2*e),t(n),k=e}}function y(){e||(e=50),m(),r(),i(),a(),v(e)}var b,_,w,x,k,E=(Math.round,Math.floor),S=new Array(64),T=new Array(64),A=new Array(64),R=new Array(64),I=new Array(65535),D=new Array(65535),C=new Array(64),O=new Array(64),L=[],P=0,B=7,M=new Array(64),U=new Array(64),$=new Array(64),N=new Array(256),j=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],z=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],V=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],G=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],W=[0,1,2,3,4,5,6,7,8,9,10,11],Z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],X=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(e,t){t&&v(t),L=new Array,P=0,B=7,l(65496),c(),d(),f(e.width,e.height),h(),p();var n=0,r=0,i=0;P=0,B=7,this.encode.displayName="_encode_";for(var a,s,u,m,y,k,E,S,T,I=e.data,D=e.width,C=e.height,O=4*D,N=0;N<C;){for(a=0;a<O;){for(y=O*N+a,k=y,E=-1,S=0,T=0;T<64;T++)S=T>>3,E=4*(7&T),k=y+S*O+E,N+S>=C&&(k-=O*(N+1+S-C)),a+E>=O&&(k-=a+E-O+4),s=I[k++],u=I[k++],m=I[k++],M[T]=(j[s]+j[u+256>>0]+j[m+512>>0]>>16)-128,U[T]=(j[s+768>>0]+j[u+1024>>0]+j[m+1280>>0]>>16)-128,$[T]=(j[s+1280>>0]+j[u+1536>>0]+j[m+1792>>0]>>16)-128;n=g(M,A,n,b,w),r=g(U,R,r,_,x),i=g($,R,i,_,x),a+=32}N+=8}if(B>=0){var F=[];F[1]=B+1,F[0]=(1<<B+1)-1,o(F)}l(65497);var z="data:image/jpeg;base64,"+btoa(L.join(""));return L=[],z},y()}return r.encode=function(e,t){var n=new r(t);return n.encode(e)},r}),t("runtime/html5/androidpatch",["runtime/html5/util","runtime/html5/jpegencoder","base"],function(e,t,n){var r,i=e.canvasToDataUrl;e.canvasToDataUrl=function(e,a,o){var s,l,u,c,f;return n.os.android?("image/jpeg"===a&&"undefined"==typeof r&&(c=i.apply(null,arguments),f=c.split(","),c=~f[0].indexOf("base64")?atob(f[1]):decodeURIComponent(f[1]),c=c.substring(0,2),r=255===c.charCodeAt(0)&&216===c.charCodeAt(1)),"image/jpeg"!==a||r?i.apply(null,arguments):(l=e.width,u=e.height,s=e.getContext("2d"),t.encode(s.getImageData(0,0,l,u),o))):i.apply(null,arguments)}}),t("runtime/html5/image",["base","runtime/html5/runtime","runtime/html5/util"],function(e,t,n){var r="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D";return t.register("Image",{modified:!1,init:function(){var e=this,t=new Image;t.onload=function(){e._info={type:e.type,width:this.width,height:this.height},e._metas||"image/jpeg"!==e.type?e.owner.trigger("load"):n.parseMeta(e._blob,function(t,n){e._metas=n,e.owner.trigger("load")})},t.onerror=function(){e.owner.trigger("error")},e._img=t},loadFromBlob:function(e){var t=this,r=t._img;t._blob=e,t.type=e.type,r.src=n.createObjectURL(e.getSource()),t.owner.once("load",function(){n.revokeObjectURL(r.src)})},resize:function(e,t){var n=this._canvas||(this._canvas=document.createElement("canvas"));this._resize(this._img,n,e,t),this._blob=null,this.modified=!0,this.owner.trigger("complete","resize")},crop:function(e,t,n,r,i){var a=this._canvas||(this._canvas=document.createElement("canvas")),o=this.options,s=this._img,l=s.naturalWidth,u=s.naturalHeight,c=this.getOrientation();i=i||1,a.width=n,a.height=r,o.preserveHeaders||this._rotate2Orientaion(a,c),this._renderImageToCanvas(a,s,-e,-t,l*i,u*i),this._blob=null,this.modified=!0,this.owner.trigger("complete","crop")},getAsBlob:function(e){var t,r=this._blob,i=this.options;if(e=e||this.type,this.modified||this.type!==e){if(t=this._canvas,"image/jpeg"===e){if(r=n.canvasToDataUrl(t,e,i.quality),i.preserveHeaders&&this._metas&&this._metas.imageHead)return r=n.dataURL2ArrayBuffer(r),r=n.updateImageHead(r,this._metas.imageHead),r=n.arrayBufferToBlob(r,e)}else r=n.canvasToDataUrl(t,e);r=n.dataURL2Blob(r)}return r},getAsDataUrl:function(e){var t=this.options;return e=e||this.type,"image/jpeg"===e?n.canvasToDataUrl(this._canvas,e,t.quality):this._canvas.toDataURL(e)},getOrientation:function(){return this._metas&&this._metas.exif&&this._metas.exif.get("Orientation")||1},info:function(e){return e?(this._info=e,this):this._info},meta:function(e){return e?(this._meta=e,this):this._meta},destroy:function(){var e=this._canvas;this._img.onload=null,e&&(e.getContext("2d").clearRect(0,0,e.width,e.height),e.width=e.height=0,this._canvas=null),this._img.src=r,this._img=this._blob=null},_resize:function(e,t,n,r){var i,a,o,s,l,u=this.options,c=e.width,f=e.height,d=this.getOrientation();
~[5,6,7,8].indexOf(d)&&(n^=r,r^=n,n^=r),i=Math[u.crop?"max":"min"](n/c,r/f),u.allowMagnify||(i=Math.min(1,i)),a=c*i,o=f*i,u.crop?(t.width=n,t.height=r):(t.width=a,t.height=o),s=(t.width-a)/2,l=(t.height-o)/2,u.preserveHeaders||this._rotate2Orientaion(t,d),this._renderImageToCanvas(t,e,s,l,a,o)},_rotate2Orientaion:function(e,t){var n=e.width,r=e.height,i=e.getContext("2d");switch(t){case 5:case 6:case 7:case 8:e.width=r,e.height=n}switch(t){case 2:i.translate(n,0),i.scale(-1,1);break;case 3:i.translate(n,r),i.rotate(Math.PI);break;case 4:i.translate(0,r),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-r);break;case 7:i.rotate(.5*Math.PI),i.translate(n,-r),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-n,0)}},_renderImageToCanvas:function(){function t(e,t,n){var r,i,a,o=document.createElement("canvas"),s=o.getContext("2d"),l=0,u=n,c=n;for(o.width=1,o.height=n,s.drawImage(e,0,0),r=s.getImageData(0,0,1,n).data;c>l;)i=r[4*(c-1)+3],0===i?u=c:l=c,c=u+l>>1;return a=c/n,0===a?1:a}function n(e){var t,n,r=e.naturalWidth,i=e.naturalHeight;return r*i>1048576&&(t=document.createElement("canvas"),t.width=t.height=1,n=t.getContext("2d"),n.drawImage(e,-r+1,0),0===n.getImageData(0,0,1,1).data[3])}return e.os.ios?e.os.ios>=7?function(e,n,r,i,a,o){var s=n.naturalWidth,l=n.naturalHeight,u=t(n,s,l);return e.getContext("2d").drawImage(n,0,0,s*u,l*u,r,i,a,o)}:function(e,r,i,a,o,s){var l,u,c,f,d,h,p,g=r.naturalWidth,m=r.naturalHeight,v=e.getContext("2d"),y=n(r),b="image/jpeg"===this.type,_=1024,w=0,x=0;for(y&&(g/=2,m/=2),v.save(),l=document.createElement("canvas"),l.width=l.height=_,u=l.getContext("2d"),c=b?t(r,g,m):1,f=Math.ceil(_*o/g),d=Math.ceil(_*s/m/c);w<m;){for(h=0,p=0;h<g;)u.clearRect(0,0,_,_),u.drawImage(r,-h,-w),v.drawImage(l,0,0,_,_,i+p,a+x,f,d),h+=_,p+=f;w+=_,x+=d}v.restore(),l=u=null}:function(t){var n=e.slice(arguments,1),r=t.getContext("2d");r.drawImage.apply(r,n)}}()})}),t("runtime/html5/transport",["base","runtime/html5/runtime"],function(e,t){var n=e.noop,r=e.$;return t.register("Transport",{init:function(){this._status=0,this._response=null},send:function(){var t,n,i,a=this.owner,o=this.options,s=this._initAjax(),l=a._blob,u=o.server;o.sendAsBinary?(u+=(/\?/.test(u)?"&":"?")+r.param(a._formData),n=l.getSource()):(t=new FormData,r.each(a._formData,function(e,n){t.append(e,n)}),t.append(o.fileVal,l.getSource(),o.filename||a._formData.name||"")),o.withCredentials&&"withCredentials"in s?(s.open(o.method,u,!0),s.withCredentials=!0):s.open(o.method,u),this._setRequestHeader(s,o.headers),n?(s.overrideMimeType&&s.overrideMimeType("application/octet-stream"),e.os.android?(i=new FileReader,i.onload=function(){s.send(this.result),i=i.onload=null},i.readAsArrayBuffer(n)):s.send(n)):s.send(t)},getResponse:function(){return this._response},getResponseAsJson:function(){return this._parseJson(this._response)},getStatus:function(){return this._status},abort:function(){var e=this._xhr;e&&(e.upload.onprogress=n,e.onreadystatechange=n,e.abort(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var e=this,t=new XMLHttpRequest,r=this.options;return!r.withCredentials||"withCredentials"in t||"undefined"==typeof XDomainRequest||(t=new XDomainRequest),t.upload.onprogress=function(t){var n=0;return t.lengthComputable&&(n=t.loaded/t.total),e.trigger("progress",n)},t.onreadystatechange=function(){if(4===t.readyState)return t.upload.onprogress=n,t.onreadystatechange=n,e._xhr=null,e._status=t.status,t.status>=200&&t.status<300?(e._response=t.responseText,e.trigger("load")):t.status>=500&&t.status<600?(e._response=t.responseText,e.trigger("error","server")):e.trigger("error",e._status?"http":"abort")},e._xhr=t,t},_setRequestHeader:function(e,t){r.each(t,function(t,n){e.setRequestHeader(t,n)})},_parseJson:function(e){var t;try{t=JSON.parse(e)}catch(n){t={}}return t}})}),t("runtime/html5/md5",["runtime/html5/runtime"],function(e){var t=function(e,t){return e+t&4294967295},n=function(e,n,r,i,a,o){return n=t(t(n,e),t(i,o)),t(n<<a|n>>>32-a,r)},r=function(e,t,r,i,a,o,s){return n(t&r|~t&i,e,t,a,o,s)},i=function(e,t,r,i,a,o,s){return n(t&i|r&~i,e,t,a,o,s)},a=function(e,t,r,i,a,o,s){return n(t^r^i,e,t,a,o,s)},o=function(e,t,r,i,a,o,s){return n(r^(t|~i),e,t,a,o,s)},s=function(e,n){var s=e[0],l=e[1],u=e[2],c=e[3];s=r(s,l,u,c,n[0],7,-680876936),c=r(c,s,l,u,n[1],12,-389564586),u=r(u,c,s,l,n[2],17,606105819),l=r(l,u,c,s,n[3],22,-1044525330),s=r(s,l,u,c,n[4],7,-176418897),c=r(c,s,l,u,n[5],12,1200080426),u=r(u,c,s,l,n[6],17,-1473231341),l=r(l,u,c,s,n[7],22,-45705983),s=r(s,l,u,c,n[8],7,1770035416),c=r(c,s,l,u,n[9],12,-1958414417),u=r(u,c,s,l,n[10],17,-42063),l=r(l,u,c,s,n[11],22,-1990404162),s=r(s,l,u,c,n[12],7,1804603682),c=r(c,s,l,u,n[13],12,-40341101),u=r(u,c,s,l,n[14],17,-1502002290),l=r(l,u,c,s,n[15],22,1236535329),s=i(s,l,u,c,n[1],5,-165796510),c=i(c,s,l,u,n[6],9,-1069501632),u=i(u,c,s,l,n[11],14,643717713),l=i(l,u,c,s,n[0],20,-373897302),s=i(s,l,u,c,n[5],5,-701558691),c=i(c,s,l,u,n[10],9,38016083),u=i(u,c,s,l,n[15],14,-660478335),l=i(l,u,c,s,n[4],20,-405537848),s=i(s,l,u,c,n[9],5,568446438),c=i(c,s,l,u,n[14],9,-1019803690),u=i(u,c,s,l,n[3],14,-187363961),l=i(l,u,c,s,n[8],20,1163531501),s=i(s,l,u,c,n[13],5,-1444681467),c=i(c,s,l,u,n[2],9,-51403784),u=i(u,c,s,l,n[7],14,1735328473),l=i(l,u,c,s,n[12],20,-1926607734),s=a(s,l,u,c,n[5],4,-378558),c=a(c,s,l,u,n[8],11,-2022574463),u=a(u,c,s,l,n[11],16,1839030562),l=a(l,u,c,s,n[14],23,-35309556),s=a(s,l,u,c,n[1],4,-1530992060),c=a(c,s,l,u,n[4],11,1272893353),u=a(u,c,s,l,n[7],16,-155497632),l=a(l,u,c,s,n[10],23,-1094730640),s=a(s,l,u,c,n[13],4,681279174),c=a(c,s,l,u,n[0],11,-358537222),u=a(u,c,s,l,n[3],16,-722521979),l=a(l,u,c,s,n[6],23,76029189),s=a(s,l,u,c,n[9],4,-640364487),c=a(c,s,l,u,n[12],11,-421815835),u=a(u,c,s,l,n[15],16,530742520),l=a(l,u,c,s,n[2],23,-995338651),s=o(s,l,u,c,n[0],6,-198630844),c=o(c,s,l,u,n[7],10,1126891415),u=o(u,c,s,l,n[14],15,-1416354905),l=o(l,u,c,s,n[5],21,-57434055),s=o(s,l,u,c,n[12],6,1700485571),c=o(c,s,l,u,n[3],10,-1894986606),u=o(u,c,s,l,n[10],15,-1051523),l=o(l,u,c,s,n[1],21,-2054922799),s=o(s,l,u,c,n[8],6,1873313359),c=o(c,s,l,u,n[15],10,-30611744),u=o(u,c,s,l,n[6],15,-1560198380),l=o(l,u,c,s,n[13],21,1309151649),s=o(s,l,u,c,n[4],6,-145523070),c=o(c,s,l,u,n[11],10,-1120210379),u=o(u,c,s,l,n[2],15,718787259),l=o(l,u,c,s,n[9],21,-343485551),e[0]=t(s,e[0]),e[1]=t(l,e[1]),e[2]=t(u,e[2]),e[3]=t(c,e[3])},l=function(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n},u=function(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n},c=function(e){var t,n,r,i,a,o,u=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)s(c,l(e.substring(t-64,t)));for(e=e.substring(t-64),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(s(c,r),t=0;t<16;t+=1)r[t]=0;return i=8*u,i=i.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(i[2],16),o=parseInt(i[1],16)||0,r[14]=a,r[15]=o,s(c,r),c},f=function(e){var t,n,r,i,a,o,l=e.length,c=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=l;t+=64)s(c,u(e.subarray(t-64,t)));for(e=t-64<l?e.subarray(t-64):new Uint8Array(0),n=e.length,r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<n;t+=1)r[t>>2]|=e[t]<<(t%4<<3);if(r[t>>2]|=128<<(t%4<<3),t>55)for(s(c,r),t=0;t<16;t+=1)r[t]=0;return i=8*l,i=i.toString(16).match(/(.*?)(.{0,8})$/),a=parseInt(i[2],16),o=parseInt(i[1],16)||0,r[14]=a,r[15]=o,s(c,r),c},d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],h=function(e){var t,n="";for(t=0;t<4;t+=1)n+=d[e>>8*t+4&15]+d[e>>8*t&15];return n},p=function(e){var t;for(t=0;t<e.length;t+=1)e[t]=h(e[t]);return e.join("")},g=function(e){return p(c(e))},m=function(){this.reset()};return"5d41402abc4b2a76b9719d911017c592"!==g("hello")&&(t=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}),m.prototype.append=function(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),this.appendBinary(e),this},m.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,n=this._buff.length;for(t=64;t<=n;t+=64)s(this._state,l(this._buff.substring(t-64,t)));return this._buff=this._buff.substr(t-64),this},m.prototype.end=function(e){var t,n,r=this._buff,i=r.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(a,i),n=e?this._state:p(this._state),this.reset(),n},m.prototype._finish=function(e,t){var n,r,i,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(s(this._state,e),a=0;a<16;a+=1)e[a]=0;n=8*this._length,n=n.toString(16).match(/(.*?)(.{0,8})$/),r=parseInt(n[2],16),i=parseInt(n[1],16)||0,e[14]=r,e[15]=i,s(this._state,e)},m.prototype.reset=function(){return this._buff="",this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.prototype.destroy=function(){delete this._state,delete this._buff,delete this._length},m.hash=function(e,t){/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e)));var n=c(e);return t?n:p(n)},m.hashBinary=function(e,t){var n=c(e);return t?n:p(n)},m.ArrayBuffer=function(){this.reset()},m.ArrayBuffer.prototype.append=function(e){var t,n=this._concatArrayBuffer(this._buff,e),r=n.length;for(this._length+=e.byteLength,t=64;t<=r;t+=64)s(this._state,u(n.subarray(t-64,t)));return this._buff=t-64<r?n.subarray(t-64):new Uint8Array(0),this},m.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,i=r.length,a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<i;t+=1)a[t>>2]|=r[t]<<(t%4<<3);return this._finish(a,i),n=e?this._state:p(this._state),this.reset(),n},m.ArrayBuffer.prototype._finish=m.prototype._finish,m.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._state=[1732584193,-271733879,-1732584194,271733878],this},m.ArrayBuffer.prototype.destroy=m.prototype.destroy,m.ArrayBuffer.prototype._concatArrayBuffer=function(e,t){var n=e.length,r=new Uint8Array(n+t.byteLength);return r.set(e),r.set(new Uint8Array(t),n),r},m.ArrayBuffer.hash=function(e,t){var n=f(new Uint8Array(e));return t?n:p(n)},e.register("Md5",{init:function(){},loadFromBlob:function(e){var t,n,r=e.getSource(),i=2097152,a=Math.ceil(r.size/i),o=0,s=this.owner,l=new m.ArrayBuffer,u=this,c=r.mozSlice||r.webkitSlice||r.slice;n=new FileReader,(t=function(){var f,d;f=o*i,d=Math.min(f+i,r.size),n.onload=function(t){l.append(t.target.result),s.trigger("progress",{total:e.size,loaded:d})},n.onloadend=function(){n.onloadend=n.onload=null,++o<a?setTimeout(t,1):setTimeout(function(){s.trigger("load"),u.result=l.end(),t=e=r=l=null,s.trigger("complete")},50)},n.readAsArrayBuffer(c.call(r,f,d))})()},getResult:function(){return this.result}})}),t("runtime/flash/runtime",["base","runtime/runtime","runtime/compbase"],function(t,n,r){function i(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}function a(){function r(e,t){var n,r,i=e.type||e;n=i.split("::"),r=n[0],i=n[1],"Ready"===i&&r===u.uid?u.trigger("ready"):a[r]&&a[r].trigger(i.toLowerCase(),e,t)}var i={},a={},o=this.destroy,u=this,c=t.guid("webuploader_");n.apply(u,arguments),u.type=s,u.exec=function(e,n){var r,o=this,s=o.uid,c=t.slice(arguments,2);return a[s]=o,l[e]&&(i[s]||(i[s]=new l[e](o,u)),r=i[s],r[n])?r[n].apply(r,c):u.flashExec.apply(o,arguments)},e[c]=function(){var e=arguments;setTimeout(function(){r.apply(null,e)},1)},this.jsreciver=c,this.destroy=function(){return o&&o.apply(this,arguments)},this.flashExec=function(e,n){var r=u.getFlash(),i=t.slice(arguments,2);return r.exec(this.uid,e,n,i)}}var o=t.$,s="flash",l={};return t.inherits(n,{constructor:a,init:function(){var e,n=this.getContainer(),r=this.options;n.css({position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),e='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+r.swf+'" ',t.browser.ie&&(e+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),e+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+r.swf+'" /><param name="flashvars" value="uid='+this.uid+"&jsreciver="+this.jsreciver+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',n.html(e)},getFlash:function(){return this._flash?this._flash:(this._flash=o("#"+this.uid).get(0),this._flash)}}),a.register=function(e,n){return n=l[e]=t.inherits(r,o.extend({flashExec:function(){var e=this.owner,t=this.getRuntime();return t.flashExec.apply(e,arguments)}},n))},i()>=11.4&&n.addRuntime(s,a),a}),t("runtime/flash/filepicker",["base","runtime/flash/runtime"],function(e,t){var n=e.$;return t.register("FilePicker",{init:function(e){var t,r,i=n.extend({},e);for(t=i.accept&&i.accept.length,r=0;r<t;r++)i.accept[r].title||(i.accept[r].title="Files");delete i.button,delete i.id,delete i.container,this.flashExec("FilePicker","init",i)},destroy:function(){this.flashExec("FilePicker","destroy")}})}),t("runtime/flash/image",["runtime/flash/runtime"],function(e){return e.register("Image",{loadFromBlob:function(e){var t=this.owner;t.info()&&this.flashExec("Image","info",t.info()),t.meta()&&this.flashExec("Image","meta",t.meta()),this.flashExec("Image","loadFromBlob",e.uid)}})}),t("runtime/flash/transport",["base","runtime/flash/runtime","runtime/client"],function(t,n,r){var i=t.$;return n.register("Transport",{init:function(){this._status=0,this._response=null,this._responseJson=null},send:function(){var e,t=this.owner,n=this.options,r=this._initAjax(),a=t._blob,o=n.server;r.connectRuntime(a.ruid),n.sendAsBinary?(o+=(/\?/.test(o)?"&":"?")+i.param(t._formData),e=a.uid):(i.each(t._formData,function(e,t){r.exec("append",e,t)}),r.exec("appendBlob",n.fileVal,a.uid,n.filename||t._formData.name||"")),this._setRequestHeader(r,n.headers),r.exec("send",{method:n.method,url:o,forceURLStream:n.forceURLStream,mimeType:"application/octet-stream"},e)},getStatus:function(){return this._status},getResponse:function(){return this._response||""},getResponseAsJson:function(){return this._responseJson},abort:function(){var e=this._xhr;e&&(e.exec("abort"),e.destroy(),this._xhr=e=null)},destroy:function(){this.abort()},_initAjax:function(){var t=this,n=new r("XMLHttpRequest");return n.on("uploadprogress progress",function(e){var n=e.loaded/e.total;return n=Math.min(1,Math.max(0,n)),t.trigger("progress",n)}),n.on("load",function(){var r,i=n.exec("getStatus"),a=!1,o="";return n.off(),t._xhr=null,i>=200&&i<300?a=!0:i>=500&&i<600?(a=!0,o="server"):o="http",a&&(t._response=n.exec("getResponse"),t._response=decodeURIComponent(t._response),r=e.JSON&&e.JSON.parse||function(e){try{return new Function("return "+e).call()}catch(t){return{}}},t._responseJson=t._response?r(t._response):{}),n.destroy(),n=null,o?t.trigger("error",o):t.trigger("load")}),n.on("error",function(){n.off(),t._xhr=null,t.trigger("error","http")}),t._xhr=n,n},_setRequestHeader:function(e,t){i.each(t,function(t,n){e.exec("setRequestHeader",t,n)})}})}),t("runtime/flash/blob",["runtime/flash/runtime","lib/blob"],function(e,t){return e.register("Blob",{slice:function(e,n){var r=this.flashExec("Blob","slice",e,n);return new t(r.uid,r)}})}),t("runtime/flash/md5",["runtime/flash/runtime"],function(e){return e.register("Md5",{init:function(){},loadFromBlob:function(e){return this.flashExec("Md5","loadFromBlob",e.uid)}})}),t("preset/all",["base","widgets/filednd","widgets/filepaste","widgets/filepicker","widgets/image","widgets/queue","widgets/runtime","widgets/upload","widgets/validator","widgets/md5","runtime/html5/blob","runtime/html5/dnd","runtime/html5/filepaste","runtime/html5/filepicker","runtime/html5/imagemeta/exif","runtime/html5/androidpatch","runtime/html5/image","runtime/html5/transport","runtime/html5/md5","runtime/flash/filepicker","runtime/flash/image","runtime/flash/transport","runtime/flash/blob","runtime/flash/md5"],function(e){return e}),t("widgets/log",["base","uploader","widgets/widget"],function(e,t){function n(e){var t=i.extend({},r,e),n=a.replace(/^(.*)\?/,"$1"+i.param(t)),o=new Image;o.src=n}var r,i=e.$,a=" http://static.tieba.baidu.com/tb/pms/img/st.gif??",o=(location.hostname||location.host||"protected").toLowerCase(),s=o&&/baidu/i.exec(o);if(s)return r={dv:3,master:"webuploader",online:/test/.exec(o)?0:1,module:"",product:o,type:0},t.register({name:"log",init:function(){var e=this.owner,t=0,r=0;e.on("error",function(e){n({type:2,c_error_code:e})}).on("uploadError",function(e,t){n({type:2,c_error_code:"UPLOAD_ERROR",c_reason:""+t})}).on("uploadComplete",function(e){t++,r+=e.size}).on("uploadFinished",function(){n({c_count:t,c_size:r}),t=r=0}),n({c_usage:1})}})}),t("webuploader",["preset/all","widgets/log"],function(e){return e}),n("webuploader")})},function(e,t,n){"use strict";function r(){var e;try{e=navigator.plugins["Shockwave Flash"],e=e.description}catch(t){try{e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(n){e="0.0"}}return e=e.match(/\d+/g),parseFloat(e[0]+"."+e[1],10)}function i(e){var t=$(e.pick.id||"#filePicker"),n=r();return!a.Uploader.support("flash")&&a.browser.ie?void(n?!function(t){window.expressinstallcallback=function(e){switch(e){case"Download.Cancelled":alert("您取消了更新！");break;case"Download.Failed":alert("安装失败");break;default:alert("安装已成功，请刷新！")}delete window.expressinstallcallback};var n=e.swf||"http://s1.pdim.gs/static/55803010f95d258a.swf",r='<object type="application/x-shockwave-flash" data="'+n+'" ';a.browser.ie&&(r+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),r+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+n+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',t.html(r)}(t):t.html('<a href="http://www.adobe.com/go/getflashplayer" target="_blank" border="0"><img alt="get flash player" src="https://www.adobe.com/macromedia/style_guide/images/160x41_Get_Flash_Player.jpg" /></a>')):a.Uploader.support()?void 0:void alert("Web Uploader 不支持您的浏览器！")}var a=n(142);e.exports={check:i}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<form class="room-report-form" action="/">\n    <div class="report-form-item">\n      <label class="report-form-item-title">房间号：</label>\n      <input type="text" name="roomId" placeholder="举报房间号">\n    </div>\n    <div class="report-form-item">\n      <label class="report-form-item-title">举报原因：</label>\n      <label class="report-radio-wrap"><input type="radio" name="reason" value="1" checked="true">政治暴力反动</label>\n      <label class="report-radio-wrap"><input type="radio" name="reason" value="2">色情低俗擦边</label>\n      <label class="report-radio-wrap"><input type="radio" name="reason" value="4">弹幕氛围低俗</label>\n      <label class="report-radio-wrap"><input type="radio" name="reason" value="3">其他</label>\n    </div>\n    <div class="report-form-item">\n      <label class="report-form-item-title">详细说明：</label>\n      <textarea name="reportDetail" maxlength="100" placeholder="详细描述被举报主播的违规行为"></textarea>\n    </div>\n    <div class="report-form-item clearfix">\n      <label class="report-form-item-title">截图上传：</label>\n      <div id="filePicker" class="report-form-screenshot-upload">上传图片</div>\n      <input type="hidden" name="screenshotUrl">\n      <span class="report-form-screenshot-notice">未上传文件</span>\n    </div>\n    <div class="report-form-item">\n      <label class="report-form-item-title">举报人QQ：</label>\n      <input type="text" name="reporterQQ">\n    </div>\n    <input type="hidden" name="rid">\n    <div class="report-form-btns">\n      <a class="report-submit-btn" href="javascript:;">确定</a>\n    </div>\n</form>'},useData:!0})},function(e,t){"use strict";function n(e,t,n){return t=t||{},n=n||{},$.ajax(e,$.extend({},n,{method:"POST",data:t,dataType:"json"}))}function r(e,t){var r=$.Deferred();return n(i+"/report/add",$.extend({},e,t)).done(function(e){e&&0==e.errno?r.resolve(e):r.reject(e.errmsg)}).fail(function(){r.reject("举报失败，请稍后重试")}),r.promise()}var i="//api.report.panda.tv";e.exports={reportRoom:r}},function(e,t){"use strict";function n(e){return""==e}function r(e,t){return e.length>t}function i(e){var t=$.Deferred(),n=/^[1-9][0-9]*$/;return n.test(e)?t.resolve(null):t.reject(l.roomNo),t.promise()}function a(e){var t=$.Deferred();return n(e)?t.reject(l.detailNull):r(e,100)?t.reject(l.detailLen):t.resolve(null),t.promise()}function o(e){var t=$.Deferred();return n(e)?t.reject(l.picNull):t.resolve(null),t.promise()}function s(e){var t=$.Deferred(),r=/^[1-9][0-9]{4,9}$/;return n(e)?t.reject(l.qqNull):r.test(e)?t.resolve(null):t.reject(l.qqInvalid),t.promise()}var l={roomNo:"举报的房间号不合法",detailNull:"详细说明不能为空",detailLen:"详细说明超过了100字",picNull:"请先上传截图",qqNull:"举报人QQ号码不能为空",qqInvalid:"举报人QQ号码不合法"};e.exports={checkEmpty:n,checkLen:r,checkRoomId:i,checkDetail:a,checkScreenshot:o,checkQQ:s}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,49,,,,,,,,,,,,,,,,,,,,,,[837,49],,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"user strict";n(94);var r=window.LS,i=function(e){e=e||{},this.key=e.key||"panda.tv/common";try{this.config=r.get(this.key),this.config=this.config?JSON.parse(this.config):{}}catch(t){this.config={}}};i.prototype.set=function(e,t){this.config[e]=t,r.set(this.key,JSON.stringify(this.config))},i.prototype.get=function(e){return e?this.config[e]:$.extend({},this.config)},e.exports=i},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e,t){H=t||{},H.showPlay="android"===PDR.device||"ipad"===PDR.device,P=$(e),P.css("overflow","hidden"),B=$($.parseHTML(X(H))),P.append(B),M=P.find("video"),U=M[0],N=B.find(".video-control-bar"),j=B.find(".video-control-enterroom"),F=B.find(".video-control-play"),z=P.find(".video-control-bar-danmu-control"),parseInt($.cookie(Y),10)>=0?U.volume=$.cookie(Y):U.volume=.7,p(),i(),a()}function i(){var e={opacityType:$.cookie(Q)||"nothing",positionType:$.cookie(K)||"full"};$.each(e,function(e,t){P.find("[data-type="+t+"]").addClass("active")})}function a(){B.on("mouseenter",o),B.on("mouseleave",s),"android"!==PDR.device&&"ipad"!==PDR.device||B.on("click",l),j.on("click",c),F.on("click",u),N.on("click",".video-control-bar-btn",f),B.on("mousedown touchstart",g).on("mousemove touchmove",m).on("mouseup touchend touchcancel",v),B.on("mousedown touchstart",b).on("mousemove touchmove",_).on("mouseup touchend touchcancel",w),M.on("play",d).on("pause",h).on("volumechange",p),z.on("click",".danmu-control-btn",x),$(document).on("keydown",D)}function o(){B.addClass("video-control-in")}function s(){W||(B.removeClass("video-control-in"),z.addClass("hidden"))}function l(e){N[0]===e.target||$.contains(N[0],e.target)||j[0]&&(j[0]===e.target||$.contains(j[0],e.target))||F[0]&&(F[0]===e.target||$.contains(F[0],e.target))||B.toggleClass("video-control-in")}function u(e){e.preventDefault(),B.hasClass("video-control-in")&&k()}function c(e){B.hasClass("video-control-in")||e.preventDefault()}function f(e){if(e.preventDefault(),U){var t=$(e.currentTarget);t.hasClass("video-control-bar-play")?U.paused?k():E():t.hasClass("video-control-bar-volume")?(U.muted?U.muted=!1:U.muted=!0,p()):t.hasClass("video-control-bar-danmu")?(B.toggleClass("video-control-status-danmu-off"),B.hasClass("video-control-status-danmu-off")?H.danmuOffHandler&&H.danmuOffHandler():H.danmuOnHandler&&H.danmuOnHandler()):t.hasClass("video-control-bar-fullscreen")?A():t.hasClass("video-control-bar-reload")?(U.load(),U.play()):t.hasClass("video-control-bar-danmu-setting")&&z.toggleClass("hidden")}}function d(){B.addClass("video-control-status-playing")}function h(){B.removeClass("video-control-status-playing")}function p(){U.muted?B.addClass("video-control-status-muted"):B.removeClass("video-control-status-muted");var e=100*U.volume;N.find(".video-control-bar-volume-slidebar-inner").css("width",e+"%"),N.find(".video-control-bar-volume-slider").css("left",9*e/10-10+"px")}function g(e){if(U&&!U.muted){var t=$(e.target),n=t.hasClass("video-control-bar-volume-slider");(n||t.hasClass("video-control-bar-volume-slidebar")||t.hasClass("video-control-bar-volume-slidebar-inner"))&&(e.preventDefault(),W={drag:n,x1:e.pageX,y1:e.pageY,x2:e.pageX,y2:e.pageY})}}function m(e){if(W&&U){var t=e.pageX-W.x2,n=100*U.volume;y(n+t),W.x2=e.pageX,W.y2=e.pageY}}function v(e){if(W&&!W.drag){var t,n;t=W.x2-W.x1,n=W.y2-W.y1,t<30&&n<30&&y(W.x2-$(e.target).offset().left)}W=null}function y(e){e<0&&(e=0),e>100&&(e=100),$.cookie(Y,e/100,{expires:15}),U.volume=e/100}function b(e){if(1==e.which&&e.target!=N[0]&&!$.contains(N[0],e.target)){var t=$.now();"last"in J&&t-J.last<=250&&(clearTimeout(Z),J.doubleClick=!0),J.x1=e.pageX,J.y1=e.pageY,J.x2=e.pageX,J.y2=e.pageY,J.last=t}}function _(e){J.x2=e.pageX,J.y2=e.pageY}function w(e){var t,n;t=J.x2-J.x1,n=J.y2-J.y1,"last"in J&&t<30&&n<30?J.doubleClick?(J={},A()):Z=setTimeout(function(){J={}},250):J={}}function x(e,t){var n=$(this);switch(t=t||n.data("type"),n.parent().find(".danmu-control-btn").removeClass("active"),n.toggleClass("active"),t){case"full":case"down":case"up":$.cookie(K,t,{expires:20});break;case"nothing":case"low":case"middle":case"high":$.cookie(Q,t,{expires:20})}switch(t){case"full":H.danmuFullHandler&&H.danmuFullHandler();break;case"down":H.danmuDownHandler&&H.danmuDownHandler();break;case"up":H.danmuUpHandler&&H.danmuUpHandler();break;case"nothing":H.danmuOpacityHandler&&H.danmuOpacityHandler(1);break;case"low":H.danmuOpacityHandler&&H.danmuOpacityHandler(.8);break;case"middle":H.danmuOpacityHandler&&H.danmuOpacityHandler(.5);break;case"high":H.danmuOpacityHandler&&H.danmuOpacityHandler(.2)}}function k(){U&&U.play()}function E(){U&&U.pause()}function S(e){U&&(U.volume=e)}function T(e,t){return $.isPlainObject(e)?void $.each(e,T):(H[e]=t,void("roomUrl"===e&&j.attr("href",t)))}function A(){B.hasClass("video-control-status-fullscreen")?I():R()}function R(){var e=U.paused;q=$(document.body).scrollTop(),V=P.parent(),G=P.prev(),B.addClass("video-control-status-fullscreen"),$("html").addClass("video-control-fullscreen-root"),P.addClass("video-control-fullscreen"),$("body").prepend(P),!e&&k(),H.enterFullscreenHandler&&H.enterFullscreenHandler()}function I(){var e=U.paused;$(document.body).scrollTop(q),G&&0!==G.length?P.insertBefore(G):V.append(P),B.removeClass("video-control-status-fullscreen"),$("html").removeClass("video-control-fullscreen-root"),P.removeClass("video-control-fullscreen"),!e&&k(),H.exitFullscreenHandler&&H.exitFullscreenHandler()}function D(e){27===e.which&&I()}function C(){return U?U.muted?-1:U.volume:-1}function O(){U&&(U.muted=!0,p())}function L(){U&&(U.muted=!1,p())}n(91);var P,B,M,U,N,j,F,z,H,q,V,G,W,Z,X=n(291),Y="voidecontroller_volume",Q="voidecontroller_danmu_opacity",K="voidecontroller_danmu_position",J={};e.exports={init:r,setOption:T,play:k,pause:E,setVolume:S,getVolume:C,muteVolume:O,unMuteVolume:L}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({1:function(e,t,n,r,i){var a;return'    <a class="video-control-enterroom" href="'+e.escapeExpression((a=null!=(a=n.roomUrl||(null!=t?t.roomUrl:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"roomUrl",hash:{},data:i}):a))+'">进入直播间</a>\n'},3:function(e,t,n,r,i){var a;return null!=(a=n["if"].call(null!=t?t:{},null!=t?t.showPlay:t,{name:"if",hash:{},fn:e.program(4,i,0),inverse:e.noop,data:i}))?a:""},4:function(e,t,n,r,i){return'      <a class="video-control-play" href="#"></a>\n'},6:function(e,t,n,r,i){return'      <span class="video-control-bar-btn video-control-bar-danmu-setting"></span>\n      <span class="video-control-bar-btn video-control-bar-danmu"></span>\n      <div class="video-control-bar-danmu-control hidden">\n        <span>透明度</span>\n        <div class="video-control-bar-danmu-opacity-menu clearfix">\n          <span class="danmu-control-btn danmu-opacity-nothing" data-type="nothing">无</span>\n          <span class="danmu-control-btn danmu-opacity-low" data-type="low">低</span>\n          <span class="danmu-control-btn danmu-opacity-middle" data-type="middle">中</span>\n          <span class="danmu-control-btn danmu-opacity-high" data-type="high">高</span>\n\n        </div>\n        <span>弹幕位置</span>\n        <div class="video-control-bar-danmu-position-menu clerfix">\n          <span class="danmu-control-btn" data-type="full"><i class="danmu-position-btn-pic danmu-position-full"></i>全屏</span>\n          <span class="danmu-control-btn" data-type="down"><i class="danmu-position-btn-pic danmu-position-down"></i>下方</span>\n          <span class="danmu-control-btn" data-type="up"><i class="danmu-position-btn-pic danmu-position-up"></i>上方</span>\n        </div>\n      </div>\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a,o=null!=t?t:{};return'<div class="video-control">\n'+(null!=(a=n["if"].call(o,null!=t?t.indexMode:t,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))?a:"")+'  <div class="video-control-bar flute">\n    <span class="video-control-bar-btn video-control-bar-play"></span>\n    <span class="video-control-bar-btn video-control-bar-reload"></span>\n    <span class="video-control-bar-btn video-control-bar-volume"></span>\n    <div class="video-control-bar-btn video-control-bar-volume-slide">\n      <div class="video-control-bar-volume-slidebar">\n        <div class="video-control-bar-volume-slidebar-inner"></div>\n      </div>\n      <span class="video-control-bar-volume-slider"></span>\n    </div>\n    <span class="video-control-bar-btn video-control-bar-fullscreen"></span>\n\n'+(null!=(a=n.unless.call(o,null!=t?t.indexMode:t,{name:"unless",hash:{},fn:e.program(6,i,0),inverse:e.noop,data:i}))?a:"")+"  </div>\n</div>\n"},useData:!0})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){(function(r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n,r){"function"==typeof n.define&&n.define.amd?n.define(["PandaMccreeLive"],r):"object"===i(t)?e.exports=r(n.PandaMccreeLive):n.PandaMccreeLive=r(n.PandaMccreeLive),n.PandaMccreeLive=r(n.PandaMccreeLive)}("undefined"==typeof window?r:window,function(e){return e=n(342)["default"]})}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.PandaMccreeLive=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(343),u=r(l),c=n(350),f=r(c),d=n(351),h=r(d),p=n(353),g=(r(p),n(355)),m=r(g),v=n(356),y=r(v),b=n(363),_=r(b),w=t.PandaMccreeLive=function(e){function t(e,n){i(this,t);var r=m["default"].uaMatch(navigator.userAgent),o=null,s=!1;n.useTencentP2P&&window.QVBP2PLoader&&window.QVBP2PLoader.isSupported()?(o=new window.QVBP2PLoader({videoId:n.videoId,rollback:function(e){window.qvbp2p&&window.qvbp2p.destroy(),e.observer.trigger("error",e.events.errorTypes.NETWORK_ERROR,{}),
o=r.mozilla?new h["default"]:new f["default"],e._useTencentP2p=!1}}),s=!0):o=r.mozilla?new h["default"]:new f["default"];var l=new y["default"],u=new _["default"];n=n||{},n.autoReload||(n.autoReload=6e3),n.loaderBufferLimit=n.loaderBufferLimit||5e7;var c=null;e.logger&&(c=e.logger);var d=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{logger:c,loader:o,demux:l,remux:u},n));return d._useTencentP2p=s,d.seekables=[],d.logger.debug("FlvMccree","mccree","正在启动播放装置。"),d.initStatistic(),d.version="1.1.35",d.mediaSource=new window.MediaSource,d._initAppanded=!1,d._lastappand="audio",d.mediaElement=null,d.lastSeek=-1,d.on=d.observer.on,d._lastClearTime=0,d.observer.on("MEDIA_SEGMENT_REMUXED",d.onMediaSegment.bind(d)),d.remux.remux(),d}return o(t,e),s(t,[{key:"isSupport",value:function(){return!0}},{key:"checkState",value:function(){if(!this.reloading){if(this.config.autoReload>5e3&&this.mediaElement&&this.mediaElement.readyState<3&&(new Date).getTime()-this.startTime-1e3*this.mediaElement.currentTime>this.config.autoReload){var e=this;this.reload().then(function(){e.startTime=void 0})}this.seekables[this.seekables.length-1]>this.lastSeek&&this.mediaElement&&2===this.mediaElement.readyState&&this.seekables.length>1&&(this.mediaElement.currentTime=this.seekables[this.seekables.length-1]/1e3,this.lastSeek=this.seekables[this.seekables.length-1]),this.seekables[this.seekables.length-1]>this.lastSeek&&this.mediaElement&&1===this.mediaElement.readyState&&this.mediaElement.currentTime>0&&this.seekables.length>1&&(this.mediaElement.currentTime=this.seekables[this.seekables.length-1]/1e3,this.lastSeek=this.seekables[this.seekables.length-1]),this.seekables[this.seekables.length-1]>this.lastSeek&&this.mediaElement&&this.seekables.length>1&&this.mediaElement.readyState<3&&this.mediaElement.currentTime<this.seekables[this.seekables.length-1]/1e3-10&&(this.mediaElement.currentTime=this.seekables[this.seekables.length-1]/1e3,this.lastSeek=this.seekables[this.seekables.length-1],this.logger.debug("FlvMccree","mccree","储能槽能量剩余，正在追帧。追帧至"+this.seekables[this.seekables.length-1]/1e3)),this.onMediaSegment()}}},{key:"clearBuffer",value:function(){if(this.mediaElement&&!(((new Date).getTime()-this.startTime-this._lastClearTime)/1e3<30)){var e=this.mediaElement.currentTime;if(!(e-this._lastClearTime<30)&&this.asourceBuffer&&this.vsourceBuffer&&!this.vsourceBuffer.updating&&!this.asourceBuffer.updating)for(this.vsourceBuffer.remove(this._lastClearTime,e-10),this.asourceBuffer.remove(this._lastClearTime,e-10),this._lastClearTime=e-10,this.logger.debug(this.TAG,"FlvMccree","正在清洗能量槽");this.seekables&&this.seekables.length>0&&this.seekables[0]/1e3<e-10;)this.seekables.shift()}}},{key:"load",value:function(e){this.logger.log(this.TAG,"loadurl "+e),this.originUrl=e,this.loader.load(e)}},{key:"play",value:function(){this.mediaElement.play()}},{key:"destroy",value:function(){var e=this,t=this;this.logger.debug(t.TAG,"destroy","正在销毁播放装置。"),this.off();var n=new Promise(function(n,r){clearInterval(t.statisticTimmer),t.statisticTimmer=null,t.unload().then(function(r){return e.mediaSource&&e.asourceBuffer&&e.vsourceBuffer?(t.mediaElement.pause(),URL.revokeObjectURL(t.mediaElement.src),t.asourceBuffer&&t.asourceBuffer.removeEventListener("error",e.onError.bind(e)),t.vsourceBuffer&&e.vsourceBuffer.removeEventListener("error",e.onError.bind(e)),t.vsourceBuffer&&t.vsourceBuffer.removeEventListener("updateend",e.checkState.bind(e)),t.mediaSource&&t.mediaSource.sourceBuffers>1&&(t.mediaSource.removeSourceBuffer(t.asourceBuffer),t.mediaSource.removeSourceBuffer(t.vsourceBuffer)),t.detachMediaElement(),t.media=null,t.detachMedia(),t.seekables=[],t.cdnip=null,t.asourceBuffer=null,t.vsourceBuffer=null,t.mediaSource=null,t.loader=null,t.remux=null,t.demux=null,t.logger.debug(t.TAG,"unload","正在播放装置完全解除。"),void n("destroyed")):void n("already destroyed")})["catch"](function(e){n("destroyed")})});return n}},{key:"pause",value:function(){this.mediaElement.pause()}},{key:"reload",value:function(){var e=this,t=this.originUrl,n=this;return new Promise(function(r,i){n.reloading=!0,n.loader.unload().then(function(i){e._lastClearTime=0,n.seekables=[],n.observer.trigger("error",e.events.errorTypes.NETWORK_ERROR,{}),n.observer.off("FRAME_DROPPED"),n.mediaElement.pause(),n.media.tracks={},n.remuxBuffer={audio:[],video:[]},n.loaderBuffer.clear(),n.demux.reset(),n.remux.destroy(),n.mediaSource&&n.mediaSource.sourceBuffers&&n.mediaSource.sourceBuffers.length>1&&(n.mediaSource.removeSourceBuffer(n.asourceBuffer),n.mediaSource.removeSourceBuffer(n.vsourceBuffer)),URL.revokeObjectURL(n.mediaElement.src),n.mediaSource=new MediaSource,n.mediaSourceObjectURL=window.URL.createObjectURL(n.mediaSource),n.mediaElement.src=n.mediaSourceObjectURL,n._initAppanded=!1,n.loader.load(t),n.reloading=!1,r()})["catch"](function(e){n.reloading=!1,r()})})}},{key:"getMediaElement",value:function(){return this.mediaElement}},{key:"initStatistic",value:function(){this.loadbytes=0,this.droppedFrames=0,this.decodedFrames=0;var e=this;this.observer.on(this.events.events.FRAG_LOADED,function(t){e.loadbytes+=t}),this.observer.on("MEDIA_SEGMENT_REMUXED",function(t){t&&(e.decodedFrames+=t)}),this.observer.on("FRAME_DROPPED",function(t){t&&(e.droppedFrames+=t)}),this.statisticTimmer=setInterval(this._onStatistic.bind(this),1e3)}},{key:"_onStatistic",value:function(){try{this.statisticTimmer&&(this.observer.trigger("statistics_info",{droppedFrames:this.droppedFrames,decodedFrames:this.decodedFrames+this.droppedFrames,speed:Math.floor(this.loadbytes/1e3)}),this.loadbytes=0)}catch(e){}}},{key:"attachMediaElement",value:function(e){e&&(this.mediaElement=e,this.mediaElement.loop=!0,this.mediaSourceObjectURL=window.URL.createObjectURL(this.mediaSource),this.mediaElement.src=this.mediaSourceObjectURL,this.mediaElement.onerror=this.onError.bind(this),this.mediaElement.oncanplay=this.recordStartTime.bind(this),this.mediaElement.onstalled=this.checkState.bind(this))}},{key:"recordStartTime",value:function(){this.startTime||(this.startTime=(new Date).getTime())}},{key:"detachMediaElement",value:function(){this.mediaElement&&(this.mediaElement.onerror=null,this.mediaElement.oncanplay=null,this.mediaElement.onstalled=null)}},{key:"onError",value:function(e){this.mediaElement&&this.mediaElement.error&&!this.reloading?this.observer.trigger("error",this.events.errorTypes.MEDIA_ERROR,"MediaMSEError",{code:11}):this.observer.trigger("error",this.events.errorTypes.OtherError,this.events.errorDetails.UNKNOWN)}},{key:"onInitSegment",value:function(){this.seekables=[],"open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",this._appendInitSegment.bind(this)):this._appendInitSegment()}},{key:"_appendInitSegment",value:function(){var e=this.initSegment;if(!this._initAppanded&&e){this._initAppanded=!0,this.asourceBuffer=this.mediaSource.addSourceBuffer("audio/mp4;codecs="+this.media.tracks.audioTrack.meta.codec),this.asourceBuffer.appendBuffer(e.audio),this.vsourceBuffer=this.mediaSource.addSourceBuffer("video/mp4;codecs="+this.media.tracks.videoTrack.meta.codec),this.vsourceBuffer.appendBuffer(e.video);var t=this;t.onMediaSegment(),this.asourceBuffer.addEventListener("error",this.onError.bind(this)),this.vsourceBuffer.addEventListener("error",this.onError.bind(this)),this.mediaSource.addEventListener("error",this.onError.bind(this)),this.vsourceBuffer.addEventListener("updateend",this.checkState.bind(this));try{if(this.media&&this.media.mediaInfo&&this.media.mediaInfo.cdn_ip)this.cdnip=this.media.mediaInfo.cdn_ip;else if(this.url){var n=this.url.match(/(\d+)\.(\d+)\.(\d+)\.(\d+)/);this.cdnip=n&&n[0]}else this.cdnip="0.0.0.0";var r="",i="";r=this.media?this.media.tracks.audioTrack?this.media.tracks.audioTrack.meta?this.media.tracks.audioTrack.meta.codec:"AMNF":"ATNF":"Mccree uninitailized",i=this.media?this.media.tracks.videoTrack?this.media.tracks.videoTrack.meta?this.media.tracks.videoTrack.meta.codec:"VMNF":"VTNF":"";var a={mimeType:'flv;codecs="'+r+","+i+'"',metadata:{encoder:this.media?this.media.mediaInfo.encoder:"UNKNOWN"},audioChannelCount:this.media?this.media.mediaInfo.audiochannels:0,audioDataRate:this.media?this.media.mediaInfo.audiodatarate:0,audioSampleRate:this.media?this.media.mediaInfo.audiosamplerate:0,fps:this.media?this.media.tracks.videoTrack.meta.frameRate.fps:0,videoDataRate:this.media?this.media.mediaInfo.videodatarate:0,height:this.media?this.media.mediaInfo.height:0,width:this.media?this.media.mediaInfo.width:0,cdnip:this.media?this.media.mediaInfo.cdn_ip:this.cdnip};this.observer.trigger("media_info",a)}catch(o){}}}},{key:"onMediaSegment",value:function(){if(!this._initAppanded&&this.remuxBuffer.lastDts>500&&this.onInitSegment.call(this),this.clearBuffer.call(this),!(this.remuxBuffer.video.length<1||this.remuxBuffer.audio.length<1)&&this.asourceBuffer&&this.vsourceBuffer&&!this.vsourceBuffer.updating&&!this.asourceBuffer.updating)try{if(!this.mediaElement.error&&this.remuxBuffer.lastDts>500){var e=this.remuxBuffer.video.shift(),t=this.remuxBuffer.audio.shift();this.vsourceBuffer.appendBuffer(e.data),this.asourceBuffer.appendBuffer(t.data),this.seekables||(this.seekables=[]),e.seekable&&e.timestamp>0&&this.seekables.push(e.timestamp),this.checkState.bind(this)}else this.mediaElement.error&&this.observer.trigger("error",this.events.errorTypes.MEDIA_ERROR,"MediaMSEError",{code:11})}catch(n){n.code&&this.observer.trigger("error",this.events.errorTypes.MEDIA_ERROR,"MediaMSEError",{code:11}),this.logger.debug("PandaMccreeLive","mccree","储能槽错误。"+n.code)}}}]),t}(u["default"]);t["default"]=w},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(344),s=r(o),l=n(345),u=r(l),c=n(346),f=r(c),d=n(347),h=r(d),p=n(348),g=r(p),m=n(349),v=(r(m),function(){function e(t,n,r){i(this,e),t||(t={}),this.TAG="Mccree",this.config=n?n:{},this.debug=n&&n.debug||!1,this.plugins=r||[],this.url=null,this.time=0,this.events=h["default"],this.logMsgs=h["default"].logMsgs,Object.assign(this.logMsgs,n.logMessages||{}),this._initLogger(t.logger),this.initObserver(),this.loaderBuffer=new g["default"],this.remuxBuffer={},this.initSegment={},this._createModules(t),this._initModules();var a=new f["default"];this.attachMedia(a)}return a(e,[{key:"destroy",value:function(){var e=this;clearInterval(this.timmer),this.timmer=null,this.unload().then(function(t){e.observer=null,e.detachMedia(),e.media=null,e.logger.debug(e.TAG,"unload",e.logMsgs.DESTROY)})}},{key:"isSupport",value:function(){return!0}},{key:"attachMedia",value:function(e){this.detachMedia(),this.media=e}},{key:"detachMedia",value:function(){this.media=null}},{key:"load",value:function(e){this.logger.log(this.TAG,"loadurl "+e),this.originUrl=e,this.loader.load(e)}},{key:"unload",value:function(){var e=this;return new Promise(function(t,n){e.loader?(e.logger.debug(e.TAG,"unload",e.logMsgs.UNLOADING),e.loader.unload().then(function(e){t()})["catch"](function(e){n(e)})):t()})}},{key:"_initLogger",value:function(e){e&&s["default"].isValid(e)?(this.logger=new s["default"](e,(!1),this.debug),this.logger.debug(this.TAG,"debug",this.logMsgs.INIT_LOGGER_CUSTOM)):(this.logger=new s["default"](null,(!1),this.debug),this.logger.debug(this.TAG,"debug",this.logMsgs.INIT_LOGGER_INTERNAL))}},{key:"initObserver",value:function(){var e=this;this.observer=new u["default"],this.observer.trigger=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if("error"!==t){var a;(a=e.observer).emit.apply(a,[t].concat(r))}else{var o;(o=e.observer).emit.apply(o,["internalError"].concat(r))}},this.observer.on=function(t,n){"error"!==t?e.observer.addListener(t,n):e.observer.addListener("internalError",n)},this.observer.off=function(t,n){n||(n=function(){}),t?"error"!==t?e.observer.removeListener(t,n):e.observer.removeListener("internalError",n):(e.observer.removeAllListeners(),n())},this.logger.debug(this.TAG,"debug",this.logMsgs.INIT_OBSERVER),this.on=this.observer.on.bind(this.observer),this.off=this.observer.off.bind(this.observer),this.trigger=this.observer.trigger.bind(this.observer)}},{key:"_createModules",value:function(e){e.loader?(this.loader=e.loader,this.logger.debug(this.TAG,"debug",this.logMsgs.INIT_LOADER)):this.logger.debug(this.TAG,"debug",this.logMsgs.INIT_LOADER_FAIL),e.demux?(this.demux=e.demux,this.logger.debug(this.TAG,"debug",this.logMsgs.INIT_DEMUXER)):this.logger.debug(this.TAG,"debug",this.logMsgs.INIT_DEMUXER_FAILED),e.remux?(this.remux=e.remux,this.logger.debug(this.TAG,"debug",this.logMsgs.INIT_REMUXER)):this.logger.debug(this.TAG,"debug",this.logMsgs.INIT_REMUXER_FAILED)}},{key:"_initModules",value:function(){this.loader&&this.loader.init(this),this.demux&&this.demux.init(this),this.remux&&this.remux.init(this)}}]),e}());t["default"]=v},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r,i){n(this,e),this.disabled=r,this.debuging=i,this._logger=t}return r(e,[{key:"log",value:function(e,t,n){if(!this.disabled)if(this.logger)this._logger.log(e,t,n);else{var r=(new Date).toLocaleString();window&&window.console&&window.console.log("["+r+"]["+e+"] "+t+": ",n)}}},{key:"info",value:function(e,t,n){if(!this.disabled)if(this._logger)this._logger.info(e,t,n);else{var r=(new Date).toLocaleString();window&&window.console&&window.console.info("["+r+"]["+e+"] "+t+": "+n)}}},{key:"warn",value:function(e,t,n){if(!this.disabled)if(this._logger)this._logger.warn(e,t,n);else{var r=(new Date).toLocaleString();window&&window.console&&window.console.warn("["+r+"]["+e+"] "+t+": "+n)}}},{key:"debug",value:function(e,t,n){if(!this.disabled&&this.debuging)if(this._logger)this._logger.debug(e,t,n);else{var r=(new Date).toLocaleString();window&&window.console&&window.console.debug("["+r+"]["+e+"] "+t+": ",n)}}},{key:"error",value:function(e,t,n){if(!this.disabled)if(this._logger)this._logger.info(e,t,n);else{var r=(new Date).toLocaleString();window&&window.console&&window.console.debug("["+r+"]["+e+"]: "+t+", "+n)}}}],[{key:"isValid",value:function(e){return e&&e.info&&e.log&&e.debug&&e.error}}]),e}();t["default"]=i},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function a(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,l,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),n.apply(this,s)}else if(a(n))for(s=Array.prototype.slice.call(arguments,1),u=n.slice(),i=u.length,l=0;l<i;l++)u[l].apply(this,s);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?a(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,a(this._events[e])&&!this._events[e].warned&&(i=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,o,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(a(n)){for(s=o;s-- >0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){n(this,e),this.TAG="MccreeMedia",this.config=t,this.level=null,this.tracks=r||{},this.mediaInfo={},this.videoDuration=0,this.audioDuration=0}return r(e,[{key:"initTracks",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[Object.keys(this.tracks)[e]].reset()}},{key:"resetTracks",value:function(){for(var e=0;e<this.otherTracks.length;e++)this.tracks[Object.keys(this.tracks)[e]].reset()}},{key:"getTrack",value:function(e){return this.tracks[e]}},{key:"distoryTracks",value:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[Object.keys(this.tracks)[e]].destroy()}}]),e}();t["default"]=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={UNLOAD:"unload",DESTROY:"destroy",MEDIA_ATTACHING:"mediaAttaching",MEDIA_ATTACHED:"mediaAttached",MEDIA_DETACHING:"mediaDetaching",MEDIA_DETACHED:"mediaDetached",NOT_FOUND:"notFound",FORBIDDEN:"forbidden",CONNECTED:"connected",FRAG_LOADED:"fragLoaded",FRAG_PARSED:"fragParsed",FPS_DROP:"fpsDrop",BUFFER_APPENDING:"bufferAppending",BUFFER_APPENDED:"bufferAppended",BUFFER_EOS:"bufferEos",BUFFER_FLUSHING:"bufferFlushing",BUFFER_FLUSHED:"bufferFlushed",DEMUXER_MISSMATCH:"demuxerMissmatch",NO_MEDIA_ATTACHED:"noMeidaAttached",ERROR:"mcError"},r={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",MUX_ERROR:"MuxError",OTHER_ERROR:"OtherError"},i={NOT_INITED:"notInited",NOT_FOUND:"notFound",FORBIDDEN:"forbidden",UNKNOWN:"unknown",DATA_LENGTH_MISSMATCH:"dataLengthMissMatch"},a={NOT_INITED:"This module is not init yet",CONNECTED:"Connected to the source",NOT_FOUND:"The source is not founded",FORBIDDEN:"forbidden",UNKNOWN:"unknown",DESTROY:"Destroy mccree",UNLOADING:"Unloading",INIT_LOGGER_CUSTOM:"Logger initialized, use the customer logger",INIT_LOGGER_INTERNAL:"Logger initialized, use the internal logger",INIT_LOADER:"Loader initialized",INIT_LOADER_FAIL:"Loader can not be initialized",INIT_DEMUXER:"Demuxer initialized",INIT_DEMUXER_FAILED:"Demuxer can not be initialized",INIT_REMUXER:"Remuxer initialized",INIT_REMUXER_FAILED:"Remuxer can not be initialized"},o={events:n,errorTypes:r,errorDetails:i,logMsgs:a};t["default"]=o},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.length=t?t:0,this.array=[],this.offset=0}return r(e,[{key:"push",value:function(e){this.array.push(e),this.length+=e.byteLength}},{key:"shift",value:function(e){if(this.array.length<1)return new Uint8Array(0);if(this.offset+e===this.array[0].length){var t=this.array[0].slice(this.offset,this.offset+e);return this.offset=0,this.array.shift(),this.length-=e,t}if(this.offset+e<this.array[0].length){var n=this.array[0].slice(this.offset,this.offset+e);return this.offset+=e,this.length-=e,n}for(var r=new Uint8Array(e),i=0;this.array.length>0&&e>0;){if(this.offset+e<this.array[0].length){var a=this.array[0].slice(this.offset,this.offset+e);r.set(a,i),this.offset+=e,this.length-=e,e=0;break}var o=this.array[0].length-this.offset;r.set(this.array[0].slice(this.offset,this.array[0].length),i),this.array.shift(),this.offset=0,i+=o,this.length-=o,e-=o}return r}},{key:"clear",value:function(){this.array=[],this.length=0,this.offset=0}},{key:"shiftBuffer",value:function(){this.array.length>0&&(this.length-=this.array[0].length,this.array.shift(),this.offset=0)}},{key:"toInt",value:function(e,t){for(var n=0,r=this.offset+e;r<this.offset+t+e;)r<this.array[0].length?n=256*n+this.array[0][r]:this.array[1]&&(n=256*n+this.array[1][r-this.array[0].length]),r++;return n}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=t.Utils=function(){function e(){n(this,e)}return r(e,null,[{key:"getUint",value:function(e){for(var t=0,n=0;n<e.length;)t=256*t+e[n],n++;return t}},{key:"initMccree",value:function(e){if(!e)throw new Error("mccree is not defined");if(!e.events)throw new Error("mccree events is not defined");this.mccree=e,this.logger=e.logger,this.observer=e.observer,this.events=e.events.events,this.errorTypes=e.events.errorTypes,this.errorDetails=e.events.errorDetails,this.logMsgs=e.events.logMsgs}},{key:"extend",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!(t.length<1))for(var r=1,i=t.length;r<i;r++)for(var a=Object.keys(t[r]),o=0,s=a.length;o<s;o++)t[0][a[o]]=t[r][a[o]]}}]),e}();t["default"]=i},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this.TAG="FetchLoader",this.type="loader",this.configs=t||{},this.responseUrl=null,this.loading=!1,this.status=0,this.error=null,this._reader=null}return i(e,null,[{key:"isSupported",value:function(){return!!(self.fetch&&self.ReadableStream&&Uint8Array)}}]),i(e,[{key:"init",value:function(e){this.mccree=e,this.logger=e.logger,this.observer=e.observer,this.events=e.events.events,this.errorTypes=e.events.errorTypes,this.errorDetails=e.events.errorDetails,this.logMsgs=e.events.logMsgs}},{key:"load",value:function(e,t,n){this.loading&&this.unload(),this._cleanLoaderBuffer(),this.loadPartail(e,{start:-1,end:-1},t)}},{key:"loadPartail",value:function(e,t,n){if(!this.mccree)return void this.logger.debug(this.TAG,"Uninitailized","this module is not init yet");this.source=e;var r=this._getParams(t,n),i=self.fetch(e,r),a=this;i.then(function(e){return a._status=e.status,a.loading=!0,a._onFetchResponse.call(a,e)})["catch"](this._onFetchException.bind(this))}},{key:"unload",value:function(){var e=this,t=this;return new Promise(function(n,r){t.loading||n(),t.loading=!1,t._cleanLoaderBuffer(),t._reader?t._reader.cancel().then(function(){t.loading=!1,n()}):(t.loading=!1,n()),e.destroyResolve=n})}},{key:"_getParams",value:function(e,t){var n=t||{},i=new self.Headers,a={method:"GET",headers:i,mode:"cors",cache:"default"};if("object"===r(this.configs.headers)){var o=this.configs.headers;for(var s in o)o.hasOwnProperty(s)&&i.append(s,o[s])}return n.cors===!1&&(a.mode="same-origin"),n.withCredentials&&(a.credentials="include"),a}},{key:"_onFetchResponse",value:function(e){return this.mccree.url=e.url||this.mccree.url,e.ok?(this.logger.debug(this.TAG,this.type,this.logMsgs.CONNECTED),this.observer.trigger(this.events.CONNECTED,e),this._onReader.call(this,e.body.getReader())):void(404==e.status?(this.logger.debug(this.TAG,this.type,this.logMsgs.NOT_FOUND),this.observer.trigger("error",this.errorTypes.NETWORK_ERROR,this.errorDetails.NOTFOUND,e)):403==e.status?(this.logger.debug(this.TAG,this.type,this.logMsgs.FORBIDDEN),this.observer.trigger("error",this.errorTypes.NETWORK_ERROR,this.errorDetails.NOT_FOUND,e)):(this.logger.debug(this.TAG,this.type,this.logMsgs.UNKNOWN),this.observer.trigger("error",this.errorTypes.NETWORK_ERROR,this.errorDetails.UNKNOWN,e)))}},{key:"_onFetchException",value:function(e){this.logger.debug(this.TAG,this.type,this.logMsgs.UNKNOWN),this.observer.trigger("error",this.errorTypes.NETWORK_ERROR,e)}},{key:"_onReader",value:function(e){if(this._reader=e,this.loading!==!1){var t=this;this._reader&&this._reader.read().then(function(n){return t&&n.done?(t.loading=!1,t.logger.debug(t.TAG,t.type,"Loading Finished"),void(t.destroyResolve?(t.destroyResolve(),t.destroyResolve=null):t.observer.trigger("error",t.errorTypes.NETWORK_ERROR,t.errorDetails.NOT_FOUND))):(t.mccree.loaderBuffer.push(n.value),t.observer.trigger(t.events.FRAG_LOADED,n.value.byteLength),t._onReader(e))})["catch"](function(e){t.observer.trigger("error",t.errorTypes.NETWORK_ERROR,e.message)})}}},{key:"_cleanLoaderBuffer",value:function(){this.mccree.loaderBuffer.clear()}}]),e}();t["default"]=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(352),s=r(o),l=function(){function e(t){i(this,e),this.TAG="MozXhrLoader",this.type="loader",this.config=t||{}}return a(e,null,[{key:"isSupported",value:function(){}}]),a(e,[{key:"init",value:function(e){this.controller=new s["default"](this),this.controller.init.call(this,e)}},{key:"load",value:function(e,t){this._cleanLoaderBuffer(),this.loadPartail(e,{start:-1,end:-1},t)}},{key:"loadPartail",value:function(e,t,n){var r=this;if(!this.mccree)return void this.logger.debug(this.TAG,"Uninitailized","this module is not init yet");this.source=e,this._loading=!1,this.xhr=new XMLHttpRequest;var i=this;this.xhr.open("get",e,!0),this.xhr.responseType="moz-chunked-arraybuffer",this.xhr.onreadystatechange=function(e){200===r.status?i.controller.onConnected.call(i,e):404===r.status&&i.controller.onNotfound.call(i,e)},this.xhr.onprogress=function(e){i.mccree.url=r.xhr.response.url||i.mccree.url;var t=e.target.response;i.mccree.loaderBuffer.push(new Uint8Array(t)),i.observer.trigger(i.events.FRAG_LOADED,t.byteLength)},this.xhr.send()}},{key:"unload",value:function(){var e=this,t=this;return new Promise(function(n,r){t._loading=!1,t._cleanLoaderBuffer(),e.xhr.onprogress=null,e.xhr.abort(),n()})}},{key:"_cleanLoaderBuffer",value:function(){this.mccree.loaderBuffer.clear()}}]),e}();window.MozXhrLoader=l,t["default"]=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.loader=t,this.loader.loading=!1,this.loader.connected=!1,this.loader.source=null,this.loader.responseUrl=null,this.loader.cdnip=null}return r(e,[{key:"init",value:function(e){this.mccree=e,this.logger=e.logger,this.observer=e.observer,this.events=e.events.events,this.errorTypes=e.events.errorTypes,this.errorDetails=e.events.errorDetails,this.logMsgs=e.events.logMsgs}},{key:"onConnected",value:function(){this.connected||this.logger.debug(this.TAG,this.type,this.logMsgs.CONNECTED),this.connected=!0}},{key:"onLoadData",value:function(e){this.connected=!0,this.loading=!0,this.observer.trigger(this.events.FRAG_LOADED,e)}},{key:"onNotfound",value:function(e){this.connected=!1,this.loading=!1,this.logger.debug(this.TAG,this.type,this.logMsgs.NOT_FOUND),this.observer.trigger("error",this.errorTypes.NETWORK_ERROR,this.errorDetails.NOTFOUND,e)}},{key:"onForbidden",value:function(e){this.connected=!1,this.loading=!1,this.logger.debug(this.TAG,this.type,this.logMsgs.FORBIDDEN),this.observer.trigger("error",this.errorTypes.NETWORK_ERROR,this.errorDetails.NOTFOUND,e)}},{key:"onUnknownError",value:function(e){this.connected=!1,this.loading=!1,this.logger.debug(this.loader.TAG,this.loader.type,this.logMsgs.NOT_FOUND),this.observer.trigger("error",this.errorTypes.NETWORK_ERROR,this.errorDetails.NOTFOUND,e)}},{key:"debug",value:function(e){this.logger.debug(this.loader.TAG,this.loader.type,e)}},{key:"log",value:function(e){this.logger.log(this.loader.TAG,this.loader.type,e)}},{key:"info",value:function(e){this.logger.info(this.loader.TAG,this.loader.type,e)}},{key:"error",value:function(e){this.logger.error(this.loader.TAG,this.loader.type,e)}},{key:"trigger",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.observer).trigger.apply(t,[e].concat(r))}},{key:"on",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.observer).on.apply(t,[e].concat(r))}},{key:"off",value:function(e){for(var t,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];
(t=this.observer).off.apply(t,[e].concat(r))}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(354),s=r(o),l=function(){function e(t){i(this,e),this.TAG="QVBP2PLoader",this.type="loader",this.config=t||{},this.initQVBP2P()}return a(e,null,[{key:"isSupported",value:function(){var e=window.qvbp2p;return e?e.supportLoader:!!window.QVBP2P&&window.QVBP2P.isSupported()}}]),a(e,[{key:"initQVBP2P",value:function(){window.qvbp2p||(window.qvbp2p=new window.QVBP2P,window.qvbp2p.rollback=this.config.rollback,window.qvbp2p.customLoadAndStart=this.config.customLoadAndStart,this.player&&(window.qvbp2p.player=this.player))}},{key:"init",value:function(e){this.player=e,window.qvbp2p.player=e,this.controller=new s["default"](this),this.controller.init.call(this,e)}},{key:"load",value:function(e,t){window.qvbp2p||this.initQVBP2P(),this._onConnected||(this.controller.onConnected.call(this,{msg:""}),this._onConnected=!0),window.qvbp2p.loadSource({videoId:this.config.videoId,src:e}),this._cleanLoaderBuffer(),this.loadPartail(e,{start:-1,end:-1},t)}},{key:"loadPartail",value:function(e,t,n){return this.mccree?void this._bindInterface():void this.logger.debug(this.TAG,"Uninitailized","this module is not init yet")}},{key:"_bindInterface",value:function(){var e=window.qvbp2p,t=window.QVBP2P;e&&t?e.listen(t.ComEvents.STATE_CHANGE,this.onStateChange.bind(this)):this.observer.trigger("error",this.errorTypes.OtherError,"No qvbp2p module found")}},{key:"onStateChange",value:function(e,t){var n=window.QVBP2P.ComCodes,r=t.code;switch(r){case n.RECEIVE_BUFFER:this._receiveBuffer(t);break;case n.HTTP_STATUS_CODE_INVALID:break;case n.BUFFER_EOF:}}},{key:"_receiveBuffer",value:function(e){if(e.payload instanceof ArrayBuffer)this.mccree.loaderBuffer.push(new Uint8Array(e.payload)),this.observer.trigger(this.events.FRAG_LOADED,e.payload.byteLength);else{var t={code:-1,msg:this.TAG+" receive buffer is not instanceof ArrayBuffer"};this.observer.trigger("error",this.errorTypes.NETWORK_ERROR,t.msg)}}},{key:"unload",value:function(){var e=this,t=this;return new Promise(function(n,r){if(t._cleanLoaderBuffer(),window.qvbp2p){window.qvbp2p.destroy(),window.qvbp2p=null;var i={code:-1,msg:e.TAG+" is destroyed."};t.observer.trigger("error",t.errorTypes.NETWORK_ERROR,i.msg)}n()})}},{key:"_cleanLoaderBuffer",value:function(){this.mccree.loaderBuffer.clear()}}]),e}();window.QVBP2PLoader=l,t["default"]=l},352,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){n(this,e)}return r(e,null,[{key:"uaMatch",value:function(e){void 0===e&&(e=window.navigator.userAgent),e=e.toLowerCase();var t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[],n=/(ipad)/.exec(e)||/(ipod)/.exec(e)||/(windows phone)/.exec(e)||/(iphone)/.exec(e)||/(kindle)/.exec(e)||/(silk)/.exec(e)||/(android)/.exec(e)||/(win)/.exec(e)||/(mac)/.exec(e)||/(linux)/.exec(e)||/(cros)/.exec(e)||/(playbook)/.exec(e)||/(bb)/.exec(e)||/(blackberry)/.exec(e)||[],r={},i={browser:t[5]||t[3]||t[1]||"",version:t[2]||t[4]||"0",versionNumber:t[4]||t[2]||"0",platform:n[0]||""};if(i.browser&&(r[i.browser]=!0,r.version=i.version,r.versionNumber=parseInt(i.versionNumber,10)),i.platform&&(r[i.platform]=!0),(r.android||r.bb||r.blackberry||r.ipad||r.iphone||r.ipod||r.kindle||r.playbook||r.silk||r["windows phone"])&&(r.mobile=!0),(r.cros||r.mac||r.linux||r.win)&&(r.desktop=!0),(r.chrome||r.opr||r.safari)&&(r.webkit=!0),r.rv||r.iemobile){var a="msie";i.browser=a,r[a]=!0}if(r.edge){delete r.edge;var o="msedge";i.browser=o,r[o]=!0}if(r.safari&&r.blackberry){var s="blackberry";i.browser=s,r[s]=!0}if(r.safari&&r.playbook){var l="playbook";i.browser=l,r[l]=!0}if(r.bb){var u="blackberry";i.browser=u,r[u]=!0}if(r.opr){var c="opera";i.browser=c,r[c]=!0}if(r.safari&&r.android){var f="android";i.browser=f,r[f]=!0}if(r.safari&&r.kindle){var d="kindle";i.browser=d,r[d]=!0}if(r.safari&&r.silk){var h="silk";i.browser=h,r[h]=!0}return r.name=i.browser,r.platform=i.platform,r}}]),e}();t["default"]=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(357),s=r(o),l=n(358),u=n(359),c=r(u),f=n(361),d=r(f),h=n(362),p=r(h),g=function(){function e(t){i(this,e),this.TAG="FLVDemuxer",this.type="demuxer",this._isFlv=!1,this._config=t||{},this._firstFragLoaded=!1,this._hasScript=!1,this._hasAudioSequence=!1,this._hasVideoSequence=!1,this._tracknum=0}return a(e,[{key:"reset",value:function(){this._isReseting=!0,this._isFlv=!1,this._firstFragLoaded=!1,this._hasScript=!1,this._hasAudioSequence=!1,this._hasVideoSequence=!1,this._tracknum=0}},{key:"init",value:function(e){this.mccree=e,this.logger=e.logger,this.observer=e.observer,this.events=e.events.events,this.errorTypes=e.events.errorTypes,this.errorDetails=e.events.errorDetails,this.logMsgs=e.events.logMsgs,this.observer.on(this.events.FRAG_LOADED,this._fragLoaded.bind(this))}},{key:"_fragLoaded",value:function(){if(this._firstFragLoaded){if(this.mccree.loaderBuffer.length<11)return;var e=this._parseFlvTag();e&&(e!==-1&&this.logger.error(this.TAG,this.type,{}),this._fragLoaded())}else{if(this.mccree.loaderBuffer.length<13)return;var t=this._config.playType,n=this.mccree.loaderBuffer.shift(13);this._parseFlvHeader(n,t),this._fragLoaded()}}},{key:"_parseFlvHeader",value:function(e,t){var n=0;if(70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3])this.observer.trigger(this.events.demux.DEMUXER_MISSMATCH,e),this._fragLoaded();else{this._firstFragLoaded=!0,n+=4;var r=this._switchPlayType(e[n],t);if(r&!0){this._tracknum++;var i=new l.VideoTrack;this.mccree.media.tracks.videoTrack=i,this._setDefaultVideoConfig()}if(r&!0){this._tracknum++;var a=new l.AudioTrack;this.mccree.media.tracks.audioTrack=a,this._setDefaultAudioConfig()}this._fragLoaded()}}},{key:"_switchPlayType",value:function(e,t){var n=5;switch(t){case"audio":n=4;break;case"video":n=5;break;default:n=e?e:5}return n}},{key:"_setDefaultVideoConfig",value:function(){var e=this.mccree.media.tracks.videoTrack;e.meta=d["default"],e.id=e.meta.id=this._tracknum}},{key:"_setDefaultAudioConfig",value:function(){var e=this.mccree.media.tracks.audioTrack;e.meta=p["default"],e.id=e.meta.id=this._tracknum}},{key:"_parseFlvTag",value:function(){if(this.mccree.loaderBuffer.length<11)return null;var e=this._parseFlvTagHeader();e&&this._processChunk(e)}},{key:"_parseFlvTagHeader",value:function(){var e={},t=this.mccree.loaderBuffer.toInt(0,1);if(e.filtered=(32&t)>>>5,e.tagType=31&t,e.datasize=this.mccree.loaderBuffer.toInt(1,3),8!==e.tagType&&9!==e.tagType&&11!==e.tagType&&18!==e.tagType||0!==this.mccree.loaderBuffer.toInt(8,3))return this.loaderBuffer&&this.loaderBuffer.length>0&&this.loaderBuffer.shift(1),this.logger.warn(this.TAG,this.type," tagType"+e.tagType),null;if(this.mccree.loaderBuffer.length<e.datasize+15)return null;this.mccree.loaderBuffer.shift(4);var n=this.mccree.loaderBuffer.toInt(0,3);this.mccree.loaderBuffer.shift(3);var r=this.mccree.loaderBuffer.shift(1)[0];return r>0&&(n+=16777216*r),e.timestamp=n,this.mccree.loaderBuffer.shift(3),e}},{key:"_processChunk",value:function(e){switch(e.tagType){case 18:this._parseScriptData(e);break;case 8:this._parseAACData(e);break;case 9:this._parseAVCData(e);break;case 11:this.mccree.loaderBuffer.shift(3);break;default:this.mccree.loaderBuffer.shift(1)}this._fragLoaded()}},{key:"_clearBuffer",value:function(){this.logger.debug(this.TAG,this.type,"清除缓存")}},{key:"_parseScriptData",value:function(e){var t=this.mccree.media.tracks.audioTrack,n=this.mccree.media.tracks.videoTrack,r=this.mccree.loaderBuffer.shift(e.datasize),i=this.mccree.media.mediaInfo=new s["default"](r).parseMetadata(),a=this._datasizeValidator(e.datasize);if(a&&(this._hasScript=!0),t&&!t.hasSpecificConfig){var o=t.meta;switch(i.audiosamplerate&&(o.audioSampleRate=i.audiosamplerate),i.audiochannels&&(o.channelCount=i.audiochannels),i.audiosamplerate){case 44100:o.sampleRateIndex=4;break;case 22050:o.sampleRateIndex=7;break;case 11025:o.sampleRateIndex=10}}if(n&&!n.hasSpecificConfig){var l=n.meta;if("number"==typeof i.framerate){var u=Math.floor(1e3*i.framerate);if(u>0){var c=u/1e3;l.frameRate||(l.frameRate={}),l.frameRate.fixed=!0,l.frameRate.fps=c,l.frameRate.fps_num=u,l.frameRate.fps_den=1e3}}}}},{key:"_parseAACData",value:function(e){var t=this.mccree.media.tracks.audioTrack;if(t){var n=t.meta;n||(n=p["default"]);var r=this.mccree.loaderBuffer.shift(1)[0];e.data=this.mccree.loaderBuffer.shift(e.datasize-1);var i=(240&r)>>>4;t.format=i,10!==i&&this.observer.trigger("error",this.mccree.events.MEDIA_ERROR,{}),10!==i||this._hasAudioSequence||(n.audioSampleRate=this._switchAudioSamplingFrequency(r),n.sampleRateIndex=(12&r)>>>2,n.frameLenth=(2&r)>>>1,n.channelCount=1&r,n.refSampleDuration=Math.floor(1024/n.audioSampleRate*n.timescale));var a=n.audioSampleRate,o=n.sampleRateIndex,s=n.refSampleDuration;delete e.tagType;var l=this._datasizeValidator(e.datasize);if(0===e.data[0]){var u=this._aacSequenceHeaderParser(e.data);a=u.audiosamplerate||n.audioSampleRate,o=u.sampleRateIndex||n.sampleRateIndex,s=Math.floor(1024/a*n.timescale),n.channelCount=u.channelCount,n.audioSampleRate=a,n.sampleRateIndex=o,n.refSampleDuration=s,this._hasAudioSequence=!0,!this._hasScript||this.mccree.media.tracks.videoTrack&&!this._hasVideoSequence||this.observer.trigger("METADATA_PARSED")}else e.data=e.data.slice(1,e.data.length),this.observer.trigger("AUDIODATA_PARSED"),t.samples.push(e);l||this.logger.warn(this.TAG,this.type,"TAG 长度确认有误"+e.datasize)}}},{key:"_parseAVCData",value:function(e){var t=this.mccree.loaderBuffer.shift(1)[0];e.frameType=(240&t)>>>4;var n=15&t;if(this.mccree.media.tracks.videoTrack.codecID=n,7===n)if(e.avcPacketType=this.mccree.loaderBuffer.shift(1)[0],e.compositionTime=this.mccree.loaderBuffer.toInt(0,3),this.mccree.loaderBuffer.shift(3),e.data=this.mccree.loaderBuffer.shift(e.datasize-5),0===e.avcPacketType){this._avcSequenceHeaderParser(e.data);var r=this._datasizeValidator(e.datasize);r&&(this._hasVideoSequence=!0,!this._hasScript||this.mccree.media.tracks.audioTrack&&!this._hasAudioSequence||this.observer.trigger("METADATA_PARSED"))}else this._datasizeValidator(e.datasize)||this.logger.warn(this.TAG,this.type,"TAG 长度确认有误"+e.datasize),this.observer.trigger("VIDEODATA_PARSED"),this.mccree.media.tracks.videoTrack.samples.push(e);else e.data=this.mccree.loaderBuffer.shift(e.datasize-1),this._datasizeValidator(e.datasize)||this.logger.warn(this.TAG,this.type,"TAG 长度确认有误"+e.datasize),this.observer.trigger("VIDEODATA_PARSED"),this.mccree.media.tracks.videoTrack.samples.push(e);delete e.tagType}},{key:"_datasizeValidator",value:function(e){var t=this.mccree.loaderBuffer.toInt(0,4);this.mccree.loaderBuffer.shift(4);var n=t===e+11;return n}},{key:"_switchAudioSamplingFrequency",value:function(e){var t=(12&e)>>>2,n=[5500,11025,22050,44100];return n[t]}},{key:"_switchAudioChannel",value:function(e){var t=1&e,n=[1,2];return n[t]}},{key:"_aacSequenceHeaderParser",value:function(e){var t={};return t.hasSpecificConfig=!0,t.objectType=e[1]>>>3,t.sampleRateIndex=(7&e[1])<<1|e[2]>>>7,t.audiosamplerate=this._switchAudioSampleRate(t.sampleRateIndex),t.channelCount=(120&e[2])>>>3,t.frameLength=(4&e[2])>>>2,t.dependsOnCoreCoder=(2&e[2])>>>1,t.extensionFlagIndex=1&e[2],t}},{key:"_switchAudioSampleRate",value:function(e){var t=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return t[e]}},{key:"_avcSequenceHeaderParser",value:function(e){var t=this.mccree.media.tracks.videoTrack;if(t){var n=0;t.meta||(t.meta=d["default"]);var r=t.meta;r.configurationVersion=e[0],r.avcProfileIndication=e[1],r.profileCompatibility=e[2],r.avcLevelIndication=e[3]/10,r.nalUnitLength=(3&e[4])+1;var i=31&e[5];n=6;for(var a={},o=0;o<i;o++){var s=255*e[n]+e[n+1];n+=2;for(var l=new Uint8Array(s),u=0;u<s;u++)l[u]=e[n+u];for(var f="avc1.",h=1;h<4;h++){var p=l[h].toString(16);p.length<2&&(p="0"+p),f+=p}r.codec=f,n+=s,a=c["default"].parseSPS(l)}var g=e[n];n++;for(var m=0;m<g;m++){var v=255*e[n]+e[n+1];n+=2;for(var y=new Uint8Array(v),b=0;b<v;b++)y[b]=e[n+b];n+=v,this.mccree.media.tracks.videoTrack.pps=y}a&&a.codec_size&&(r.codecWidth=a.codec_size.width,r.codecHeight=a.codec_size.height,r.presentWidth=a.present_size.width,r.presentHeight=a.present_size.height),r.profile=a.profile_string||r.profile,r.level=a.level_string||r.level,r.bitDepth=a.bit_depth||r.bitDepth,r.chromaFormat=a.chroma_format||r.chromaFormat,r.sarRatio&&(r.sarRatio.width=a.sar_ratio.width,r.sarRatio.height=a.sar_ratio.height),r.frameRate&&a.frame_rate.fixed&&a.frame_rate.fps_num>0&&a.frame_rate.fps_den>0&&(r.frameRate=a.frame_rate);var _=r.frameRate.fps_den,w=r.frameRate.fps_num;r.refSampleDuration=Math.floor(r.timescale*(_/w)),r.avcc=new Uint8Array(e.length),r.avcc.set(e),t.meta=r}}}]),e}();t["default"]=g},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this.offset=0,this.data=t}return i(e,[{key:"parseMetadata",value:function(){var e={};try{for(var t=this.parseAMF(),n=0;n<t.length-1;n++)"string"==typeof t[n]&&"onMetaData"===t[n]&&"object"===r(t[n+1])&&(e=t[n+1])}catch(i){}return e}},{key:"parseAMF",value:function(){for(var e=[];this.offset<this.data.length;){var t=this.data[this.offset];this.offset++;var n=this._switchAmfType(t);e.push(n)}return e}},{key:"_switchAmfType",value:function(e){var t=null;switch(e){case 0:t=this._parseNum();break;case 1:t=this._parseBoolean();break;case 2:t=this._parseString();break;case 3:t=this._parseObject();break;case 4:t="MovieClip",this.offset++;break;case 5:t=null,this.offset++;break;case 6:t=void 0,this.offset++;break;case 8:t=this._parseECMAArrary()}return t}},{key:"_parseNum",value:function(){var e=this.data.slice(this.offset,this.offset+8);return this.offset+=8,new DataView(e.buffer).getFloat64(0)}},{key:"_parseString",value:function(){var e=this.data.slice(this.offset,this.offset+2),t=256*e[0]+e[1];this.offset+=2;var n=this.data.slice(this.offset,this.offset+t);this.offset+=t;var r=new TextDecoder("utf-8").decode(n);return r}},{key:"_parseObject",value:function(){for(var e={};this.offset<this.data.length-2&&9!==this.data[this.offset+2];){var t=this._parseString(),n=this.data[this.offset];this.offset++;var r=this._switchAmfType(n);e[t]=r}return this.offset+=3,e}},{key:"_parseECMAArrary",value:function(){return this.offset+=4,this._parseObject()}},{key:"_parseBoolean",value:function(){return this.offset++,!(0===this.data[0])}}]),e}();t["default"]=a},function(e,t){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){i(this,e),this.TAG="Track",this.id=-1,this.sequenceNumber=0,this.samples=[],this.length=0}return a(e,[{key:"reset",value:function(){this.sequenceNumber=0,this.samples=[],this.length=0}},{key:"distroy",value:function(){this.reset(),this.id=-1}}]),e}();t["default"]=o;t.AudioTrack=function(e){function t(){i(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.TAG="AudioTrack",e.type="audio",e}return r(t,e),t}(o),t.VideoTrack=function(e){function t(){i(this,t);var e=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.TAG="VideoTrack",e.type="video",e.dropped=0,e}return r(t,e),a(t,[{key:"reset",value:function(){this.sequenceNumber=0,this.samples=[],this.length=0,this.dropped=0}}]),t}(o)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(360),s=r(o),l=function(){function e(){i(this,e)}return a(e,null,[{key:"_ebsp2rbsp",value:function(e){for(var t=e,n=t.byteLength,r=new Uint8Array(n),i=0,a=0;a<n;a++)a>=2&&3===t[a]&&0===t[a-1]&&0===t[a-2]||(r[i]=t[a],i++);return new Uint8Array(r.buffer,0,i)}},{key:"parseSPS",value:function(t){var n=e._ebsp2rbsp(t),r=new s["default"](n);r.readByte();var i=r.readByte();r.readByte();var a=r.readByte();r.readUEG();var o=e.getProfileString(i),l=e.getLevelString(a),u=1,c=420,f=[0,420,422,444],d=8;if((100===i||110===i||122===i||244===i||44===i||83===i||86===i||118===i||128===i||138===i||144===i)&&(u=r.readUEG(),3===u&&r.readBits(1),u<=3&&(c=f[u]),d=r.readUEG()+8,r.readUEG(),r.readBits(1),r.readBool()))for(var h=3!==u?8:12,p=0;p<h;p++)r.readBool()&&(p<6?e._skipScalingList(r,16):e._skipScalingList(r,64));r.readUEG();var g=r.readUEG();if(0===g)r.readUEG();else if(1===g){r.readBits(1),r.readSEG(),r.readSEG();for(var m=r.readUEG(),v=0;v<m;v++)r.readSEG()}r.readUEG(),r.readBits(1);var y=r.readUEG(),b=r.readUEG(),_=r.readBits(1);0===_&&r.readBits(1),r.readBits(1);var w=0,x=0,k=0,E=0,S=r.readBool();S&&(w=r.readUEG(),x=r.readUEG(),k=r.readUEG(),E=r.readUEG());var T=1,A=1,R=0,I=!0,D=0,C=0,O=r.readBool();if(O){if(r.readBool()){var L=r.readByte(),P=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],B=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];L>0&&L<16?(T=P[L-1],A=B[L-1]):255===L&&(T=r.readByte()<<8|r.readByte(),A=r.readByte()<<8|r.readByte())}if(r.readBool()&&r.readBool(),r.readBool()&&(r.readBits(4),r.readBool()&&r.readBits(24)),r.readBool()&&(r.readUEG(),r.readUEG()),r.readBool()){var M=r.readBits(32),U=r.readBits(32);I=r.readBool(),D=U,C=2*M,R=D/C}}var $=1;1===T&&1===A||($=T/A);var N=0,j=0;if(0===u)N=1,j=2-_;else{var F=3===u?1:2,z=1===u?2:1;N=F,j=z*(2-_)}var H=16*(y+1),q=(2-_)*(16*(b+1));H-=(w+x)*N,q-=(k+E)*j;var V=Math.ceil(H*$);return r.destroy(),r=null,{profile_string:o,level_string:l,bit_depth:d,chroma_format:c,chroma_format_string:e.getChromaFormatString(c),frame_rate:{fixed:I,fps:R,fps_den:C,fps_num:D},sar_ratio:{width:T,height:A},codec_size:{width:H,height:q},present_size:{width:V,height:q}}}},{key:"_skipScalingList",value:function(e,t){for(var n=8,r=8,i=0,a=0;a<t;a++)0!==r&&(i=e.readSEG(),r=(n+i+256)%256),n=0===r?n:r}},{key:"getProfileString",value:function(e){switch(e){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(e){return(e/10).toFixed(1)}},{key:"getChromaFormatString",value:function(e){switch(e){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}]),e}();t["default"]=l},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t){n(this,e),this.TAG="ExpGolomb",this._buffer=t,this._buffer_index=0,this._total_bytes=t.byteLength,this._total_bits=8*t.byteLength,this._current_word=0,this._current_word_bits_left=0}return r(e,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var e=this._total_bytes-this._buffer_index,t=Math.min(4,e),n=new Uint8Array(4);n.set(this._buffer.subarray(this._buffer_index,this._buffer_index+t)),this._current_word=new DataView(n.buffer).getUint32(0,!1),this._buffer_index+=t,this._current_word_bits_left=8*t}},{key:"readBits",value:function(e){if(e<=this._current_word_bits_left){var t=this._current_word>>>32-e;return this._current_word<<=e,this._current_word_bits_left-=e,t}var n=this._current_word_bits_left?this._current_word:0;n>>>32-this._current_word_bits_left;var r=e-this._current_word_bits_left;this._fillCurrentWord();var i=Math.min(r,this._current_word_bits_left),a=this._current_word>>>32-i;return this._current_word<<=i,this._current_word_bits_left-=i,n=n<<i|a}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var e=void 0;for(e=0;e<this._current_word_bits_left;e++)if(0!==(this._current_word&2147483648>>>e))return this._current_word<<=e,this._current_word_bits_left-=e,e;return this._fillCurrentWord(),e+this._skipLeadingZero()}},{key:"readUEG",value:function(){var e=this._skipLeadingZero();return this.readBits(e+1)-1}},{key:"readSEG",value:function(){var e=this.readUEG();return 1&e?e+1>>>1:-1*(e>>>1)}}]),e}();t["default"]=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={avcc:null,chromaFormat:420,codec:"avc1.640020",codecHeight:720,codecWidth:1280,duration:0,frameRate:{fixed:!0,fps:25,fps_num:25e3,fps_den:1e3},id:1,level:"3.2",presentHeight:720,presentWidth:1280,profile:"High",refSampleDuration:40,sarRatio:{height:1,width:1},timescale:1e3,type:"video"};t["default"]=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={audioSampleRate:48e3,channelCount:2,codec:"mp4a.40.2",config:[41,401,136,0],duration:0,id:2,refSampleDuration:21,sampleRateIndex:3,timescale:1e3,type:"audio"};t["default"]=n},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(364),s=r(o),l=n(365),u=r(l),c=function(){function e(t){i(this,e),this.TAG="MP4Remuxer",this.type="remuxer",this._config=t||{},this._isLive=this._config.isLive,this._dtsBase=0,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioMeta=null,this._videoMeta=null,this._browser=u["default"].uaMatch()}return a(e,[{key:"init",value:function(e){this.mccree=e,this.logger=e.logger,this.observer=e.observer,this.events=e.events,this.onMediaSegment=e.onMediaSegment,this.mccree.initSegment={},this.mccree.remuxBuffer={audio:[],video:[]}}},{key:"destroy",value:function(){this._dtsBase=0,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioMeta=null,this._videoMeta=null}},{key:"timmerCallback",value:function(){this.mccree.media.tracks.videoTrack&&this.mccree.media.tracks.audioTrack&&this._generateBoxes()}},{key:"remux",value:function(){this.observer.on("METADATA_PARSED",this._generateInitailSegment.bind(this)),this.observer.on("VIDEODATA_PARSED",this.timmerCallback.bind(this))}},{key:"_generateInitailSegment",value:function(){s["default"].init(),this._fixRatio();var e=this.mccree.media.tracks.audioTrack,t=this.mccree.media.tracks.videoTrack;if(e.isAAC=10===e.format,this._generateConfig(),t.meta){var n=s["default"].initSegment([t]);this.mccree.initSegment.video=n;var r=s["default"].initSegment([e]);this.mccree.initSegment.audio=r,this.observer.trigger("INIT_SEGMENT_REMUXED"),this._generateBoxes()}}},{key:"_fixRatio",value:function(){var e=this.mccree.media.mediaInfo||{},t=this.mccree.media.tracks.videoTrack||{},n=t.meta||{},r=n.codecHeight,i=n.codecWidth;e.width===n.codecWidth&&e.height===n.codecHeight||n.height!==9*n.width/16&&(i=e.width?e.width:parseInt(16*n.height/9),r=e.height?e.height:parseInt(9*n.width/16),n.codecHeight=r,n.codecWidth=i,n.presentHeight=r,n.presentWidth=i)}},{key:"_generateConfig",value:function(){var e=this.mccree.media.tracks.audioTrack,t=e.meta,n=[],r=e.objectType,i=t.sampleRateIndex,a=void 0,o=t.channelCount,s=navigator.userAgent.toLowerCase();s.indexOf("firefox")!==-1?i>=6?(r=5,a=i-3):(r=2,n=new Array(2),a=i):s.indexOf("android")!==-1?(r=2,a=i):(r=5,a=i,i>=6?a=i-3:1===o&&(r=2,a=i)),n[0]=r<<3,n[0]|=(15&i)>>>1,n[1]=(15&i)<<7,n[1]|=(15&o)<<3,5===r&&(n[1]|=(15&i)>>>1,n[2]=(1&i)<<7,n[2]|=8,n[3]=0),t.config=n,t.codec="mp4a.40."+r}},{key:"_generateBoxes",value:function(){var e=this.mccree.media.tracks.videoTrack,t=this.mccree.media.tracks.audioTrack,n=-1,r=null,i=-1;if(!this._dtsBaseInited&&e.samples.length>1&&t.samples.length>1&&this._calculateDtsBase(t,e),e.meta&&t.meta&&!(e.samples.length<15)){e.samples[0].timestamp+e.samples[0].compositionTime;if(n=10,!(n<1||e.samples.length<=n+1)){var a=Math.ceil((n+1)*e.meta.refSampleDuration/t.meta.refSampleDuration)+1;t.samples.length<=a||t.samples.length<n||(e.samples.length>n&&(i=e.samples[n].timestamp,r=e.samples.splice(0,n)),r&&((this._browser.chrome&&this._browser.versionNumber<=50||this._browser.mozilla)&&(r[0].frameType=1),this._generateGop(r,r[0].timestamp,i),this._generateBoxes()))}}}},{key:"_generateGop",value:function(e,t,n){for(var r=t,i=t,a=this.mccree.media.tracks.videoTrack,o=a.meta.refSampleDuration,l=0,u=[],c=0;c<e.length;c++)l+=e[c].data.length;var f=8+l,d=new Uint8Array(f);d[0]=f>>>24&255,d[1]=f>>>16&255,d[2]=f>>>8&255,d[3]=255&f,d.set(s["default"].types.mdat,4);for(var h=8,p=0;p<e.length;p++){var g=e[p];e[p+1]?(i=e[p+1].timestamp,o=i-r,r=i):(i=n,o=i-r,r=i),o>a.meta.refSampleDuration+1&&(this.observer.trigger("FRAME_DROPPED",Math.floor(o/a.meta.refSampleDuration)),this.logger.debug(this.TAG,this.type,"检测到视频掉帧 掉帧时间点："+r)),this.mccree.media.videoDuration+=o;var m={dts:g.timestamp-this._dtsBase,pts:g.compositionTime+g.timestamp-this._dtsBase,cts:g.compositionTime,size:g.data.length,isKeyframe:1===g.frameType,duration:o+1,originalDts:r,flags:{isLeading:0,dependsOn:1===g.frameType?2:1,isDependedOn:1===g.frameType?1:0,hasRedundancy:0,isNonSync:1===g.frameType?0:1}};d.set(g.data,h),h+=g.data.length,u.push(m),this.mccree.remuxBuffer.lastDts=m.dts}var v={id:a.id,samples:u};a.sequenceNumber++;var y=s["default"].moof(a.sequenceNumber,t-this._dtsBase,v);this.mccree.remuxBuffer.video.push({type:"video",seekable:u[0].isKeyframe,timestamp:u[0].dts,data:this._mergeBoxes(y,d)}),this.observer.trigger("MEDIA_SEGMENT_REMUXED",e.length),this._remuxAudio(t,n)}},{key:"_remuxAudio",value:function(e,t){for(var n=e,r=e,i=(this.mccree.media.tracks.videoTrack,this.mccree.media.tracks.audioTrack),a=i.meta.refSampleDuration,o=i.samples,l=0,u=[],c=[];o[0]&&o[0].timestamp+a<e;)this.logger.warn(this.TAG,this.type,"检测到音频掉帧/正在进行追帧，追帧时间点："+o[0].timestamp),o.shift();e=o[0].timestamp;var f=o[0];for(o[0].timestamp;o.length>0&&o[0].timestamp<=t;){f=o.shift(),o[0]?(n=f.timestamp,r=o[0].timestamp):(n=f.timestamp,r=f.timestamp+a),f.sampleDuration=r-n,this.mccree.media.audioDuration+=f.sampleDuration;var d={dts:f.timestamp,pts:f.timestamp,cts:0,size:f.data.length,duration:f.sampleDuration,originalDts:n,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};c.push(d),l+=f.data.length,u.push(f.data)}for(;this.mccree.media.videoDuration-this.mccree.media.audioDuration>i.meta.refSampleDuration+1;){this.logger.debug(this.TAG,this.type,"检测到音频掉帧，正在进行补偿 基准时间点："+n+" 补偿时间点："+r),n=r,r=n+f.sampleDuration;var h={dts:n,pts:n,cts:0,size:f.data.length,duration:f.sampleDuration,originalDts:n,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};this.mccree.media.audioDuration+=f.sampleDuration,c.push(h),l+=f.data.length,u.push(f.data)}var p=l+8,g=8,m=new Uint8Array(p);m[0]=p>>>24&255,m[1]=p>>>16&255,m[2]=p>>>8&255,m[3]=255&p,m.set(s["default"].types.mdat,4);for(var v=0;v<u.length;v++)m.set(u[v],g),g+=u[v].length;var y={id:i.id,samples:c};i.sequenceNumber++;var b=s["default"].moof(i.sequenceNumber,e-this._dtsBase,y);this.mccree.remuxBuffer.audio.push({type:"audio",data:this._mergeBoxes(b,m)})}},{key:"_calculateDtsBase",value:function(e,t){this._dtsBaseInited||(e.samples&&e.samples.length&&(this._audioDtsBase=e.samples[0].timestamp),t.samples&&t.samples.length&&(this._videoDtsBase=t.samples[0].timestamp),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}},{key:"_mergeBoxes",value:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(e,0),n.set(t,e.byteLength),n}}]),e}();t["default"]=c},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=Math.pow(2,32)-1,a=function(){function e(){n(this,e)}return r(e,null,[{key:"init",value:function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]};var t=void 0;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);
var n=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),r=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:n,audio:r};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=a,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))}},{key:"box",value:function(e){for(var t=Array.prototype.slice.call(arguments,1),n=8,r=t.length,i=r,a=void 0;r--;)n+=t[r].byteLength;for(a=new Uint8Array(n),a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=255&n,a.set(e,4),r=0,n=8;r<i;r++)a.set(t[r],n),n+=t[r].byteLength;return a}},{key:"hdlr",value:function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])}},{key:"mdat",value:function(t){return e.box(e.types.mdat,t)}},{key:"mdhd",value:function(t,n){n*=t;var r=Math.floor(n/(i+1)),a=Math.floor(n%(i+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))}},{key:"mdia",value:function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))}},{key:"mfhd",value:function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))}},{key:"minf",value:function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))}},{key:"moof",value:function(t,n,r){return e.box(e.types.moof,e.mfhd(t),e.traf(r,n))}},{key:"moov",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trak(t[n].meta);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].meta.timescale,t[0].meta.duration)].concat(r).concat(e.mvex(t)))}},{key:"mvex",value:function(t){for(var n=t.length,r=[];n--;)r[n]=e.trex(t[n]);return e.box.apply(null,[e.types.mvex].concat(r))}},{key:"mvhd",value:function(t,n){n*=t;var r=Math.floor(n/(i+1)),a=Math.floor(n%(i+1)),o=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,r>>24,r>>16&255,r>>8&255,255&r,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,o)}},{key:"sdtp",value:function(t){var n,r=t.samples||[],i=new Uint8Array(4+r.length),a=t.flags;for(n=0;n<r.length;n++)a=r[n].flags,i[n+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return e.box(e.types.sdtp,i)}},{key:"stbl",value:function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))}},{key:"avc1",value:function(t){var n=t.avcc,r=t.codecWidth,i=t.codecHeight,a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r>>>8&255,255&r,i>>>8&255,255&i,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return e.box(e.types.avc1,a,e.box(e.types.avcC,n))}},{key:"esds",value:function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}},{key:"mp4a",value:function(t){var n=t.audiosamplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]),e.box(e.types.esds,e.esds(t)))}},{key:"mp3",value:function(t){var n=t.audiosamplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,n>>8&255,255&n,0,0]))}},{key:"stsd",value:function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))}},{key:"tkhd",value:function(t){var n=t.id,r=t.duration*t.timescale,a=t.presentWidth,o=t.presentHeight,s=Math.floor(r/(i+1)),l=Math.floor(r%(i+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,n>>24&255,n>>16&255,n>>8&255,255&n,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,o>>8&255,255&o,0,0]))}},{key:"traf",value:function(t,n){var r=e.sdtp(t),a=t.id,o=Math.floor(n/(i+1)),s=Math.floor(n%(i+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,r.length+16+20+8+16+8+8),r)}},{key:"trak",value:function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))}},{key:"trex",value:function(t){var n=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,n>>24,n>>16&255,n>>8&255,255&n,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}},{key:"trun",value:function(t,n){var r,i,a,o,s,l,u=t.samples||[],c=u.length,f=12+16*c,d=new Uint8Array(f);for(n+=8+f,d.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,n>>>24&255,n>>>16&255,n>>>8&255,255&n],0),r=0;r<c;r++)i=u[r],a=i.duration,o=i.size,s=i.flags,l=i.cts,d.set([a>>>24&255,a>>>16&255,a>>>8&255,255&a,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*r);return e.box(e.types.trun,d)}},{key:"initSegment",value:function(t){e.types||e.init();var n,r=e.moov(t);return n=new Uint8Array(e.FTYP.byteLength+r.byteLength),n.set(e.FTYP),n.set(r,e.FTYP.byteLength),n}}]),e}();t["default"]=a},355,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return h=e||{},i()}function i(){return PDR.ajax("/ajax_tfate_getcards",{data:{ids:h.ids.join(",")},dataType:"json"}).then(function(e){return e&&0==e.errno&&$.each(e.data,function(e,t){t.ad_id&&(g[t.alias]=t)}),g})}function a(e){return e?g[e]:g}function o(e,t,n){switch(t){case"view":s(e,n);break;case"click":l(e,n);break;default:s(e,n),l(e,n)}}function s(e,t){if($.isArray(e))return void $.each(e,function(e,n){s(n,t)});t=t||{};var n=$("[data-tfate-posid="+e+"]");(t.allowRepeat||n.length&&!m[e])&&$(document).ready(function(r){m[e]?c(r.extend({},n.data(),t)):u(n,t),m[e]=!0})}function l(e,t){return $.isArray(e)?void $.each(e,function(e,t){l(t)}):(t=t||{},void $(document).on("click","[data-tfate-posid="+e+"]",function(e){var n=$(this),r=n.data("tfate-monitor-click");f($.extend({},n.data(),t)),r&&n.attr("href",r)}))}function u(e,t){e&&e.length&&p.run(e,function(e){c($.extend({},e.data(),t))},t)}function c(e){e&&(window.PANDA_MONITOR.nlog({pae:"ad_view",paew:"tfate_view-"+e.tfatePosid+"-"+e.tfateAdid}),e.tfateMonitorView&&d(e.tfateMonitorView))}function f(e){e&&window.PANDA_MONITOR.nlog({pae:"ad_click",paew:"tfate_click-"+e.tfatePosid+"-"+e.tfateAdid})}function d(e){var t="log_"+(new Date).getTime()+"_"+ ++y,n=v[t]=new Image;n.onload=n.onerror=function(){v[t]&&(v[t]=null,delete v[t])},n.src=e}var h,p=n(508),g={},m={},v={},y=0;e.exports={init:r,getPosInfo:a,log:o}},function(e,t){"use strict";function n(e,t){var n;return n=t&&t._$ct?t._$ct.offset().top+t._$ct.height():("innerHeight"in d?d.innerHeight:h.height())+h.scrollTop(),n<=e.offset().top-c}function r(e,t){var n;return n=t&&t._$ct?t._$ct.offset().left+t._$ct.width():h.width()+($.fn.scrollLeft?h.scrollLeft():d.pageXOffset),n<=e.offset().left-c}function i(e,t){var n;return n=t&&t._$ct?t._$ct.offset().top:h.scrollTop(),n>=e.offset().top+c+e.height()}function a(e,t){var n;return n=t&&t._$ct?t._$ct.offset().left:$.fn.scrollLeft?h.scrollLeft():d.pageXOffset,n>=e.offset().left+c+e.width()}function o(e,t){e.each(function(o,s){function l(){u.trigger("_lazyexecute_appear")}var u=e.eq(o);u.width()<=0&&u.height()<=0||"none"===u.css("display")||(f?i(u,t)||n(u,t)||l():i(u,t)||a(u,t)||n(u,t)||r(u,t)||l())})}function s(e,t){function n(){o=0,s=+new Date,a=e.apply(r,i),r=null,i=null}var r,i,a,o,s=0;return function(){r=this,i=arguments;var e=new Date-s;return o||(e>=t?n():o=setTimeout(n,t-e)),a}}function l(e,t,n){n=n||{};var r=s(o,u);e.each(function(n,r){var i=e.eq(n);i.one("_lazyexecute_appear",function(){t(i)})}),n._$ct&&n._$ct.length&&n._$ct.on("scroll",function(){r(e,n)}),h.on("resize load scroll",function(){r(e,n)}),$(function(){r(e,n)})}var u=300,c=5,f=!0,d=window,h=$(d);e.exports={run:l}},,,,,,,,,,,,,,,,,,,,,,,[837,210],,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(){S.init($("#panda_header")).then(u),x(),c(),I.init(),m(),f(),w(),a(),s(),l(),i()}function i(){var e=$(".index-competitive-lists img").eq(0);e.lazyload({placeholder_real_img:"https://i.h2.pdim.gs/4e7655fc4de4113710522b041a7d4016.png"}),$("body").on("mouseenter",".index-competitive-lists li",function(){var e=$(this).find("img");e.attr("src")||e.attr("src",e.attr("data-original")),$(".index-competitive-lists li").removeClass("active"),$(this).addClass("active")})}function a(){$("body").on("click",".index-pandastars .add-stars",o),$("body").on("click",".index-lift .anchor-btn",o),$("body").on("click",".footer-text .room-report",function(e){e.preventDefault(),D.show({})}),$("html").hasClass("ie8")||$(window).on("resize",v),d(),R()}function o(e){return e.preventDefault(),T.selfInfoInterface.getSelfInfo().done(function(e){if(e.rid>0){var t=PDR.parseUrl(window.location.href);t.path="/application",window.location.href=PDR.formatUrl(t)}else A.login()}),!1}function s(){C.log(["A10"])}function l(){C.log(["A031","A032","A033","A034","A035","A036","A141","A142","A143","A144","A145","A146","A151","A152","A153","A154"])}function u(){T.selfInfoInterface.getSelfInfo().done(function(e){e.isHost||($(".index-pandastars .add-stars").show(),$(".index-lift").addClass("join-anchor"))})}function c(){$("html").hasClass("ie8")?y("bg2"):v(),j&&C.log(["A01","A011","A012"])}function f(){var e,t,n=k(),r={slideWidth:140,maxSlides:11,moveSlides:$(".index-pandastars .stars").width()/140,slideMargin:0,speed:1e3,easing:"linear",pager:!1,infiniteLoop:!1,hideControlOnEnd:!0,nextSelector:$(".index-pandastars .arrow-right"),prevSelector:$(".index-pandastars .arrow-left"),nextText:"",prevText:"",onSlideAfter:function(e,t,n){$(".index-pandastars .bx-prev").hasClass("disabled")?$(".index-pandastars .layer-left").hide():$(".index-pandastars .layer-left").show(),$(".index-pandastars .bx-next").hasClass("disabled")?$(".index-pandastars .layer-right").hide():$(".index-pandastars .layer-right").show()},onSliderResize:function(t){_(".index-pandastars .stars-wall")&&(e.resetSlider({moveSlides:Math.floor($(".index-pandastars .stars").width()/140)}),e.goToSlide(0,null,0)),b(".index-pandastars")}},i={slideWidth:n.width,maxSlides:n.maxSlides+3,moveSlides:n.maxSlides,slideMargin:0,speed:500,easing:$("html").hasClass("ie8")?"linear":"ease-in",pager:!1,infiniteLoop:!0,nextSelector:$(".index-shuffer .arrow-right"),prevSelector:$(".index-shuffer .arrow-left"),nextText:"",prevText:"",onSliderResize:function(e){if(_(".index-shuffer .stars-wall")){var n=k();t.resetSlider({slideWidth:n.width,moveSlides:n.maxSlides}),t.redrawSlider(),t.goToSlide(0,null,0)}b(".index-shuffer")}};b(".index-pandastars"),b(".index-shuffer"),e=$(".index-pandastars .stars-lists").bxSlider(r),t=$(".index-shuffer .stars-lists").bxSlider(i)}function d(){$(".index-wrapper .thumb-img-lazy").lazyload({placeholder_real_img:"https://i.h2.pdim.gs/4e7655fc4de4113710522b041a7d4016.png",effect:"fadeIn"})}function h(e){if(!e)return"";var t=JSON.parse(e),n=t.auth&&t.auth.sign,r=t.auth&&t.auth.rid,i=t.auth&&t.auth.time;return r?"?sign="+n+"&ts="+i+"&rid="+r:""}function p(e,t,n){return t=t||{},n=n||{},PDR.ajax(e,$.extend({},n,{data:t,dataType:"json"}))}function g(e){var t=$.Deferred();return e?p("/api_rooms_videoinfo",{roomids:e}).then(function(e){0==e.errno&&e.data?t.resolve(e.data):t.resolve([])}).fail(function(){t.resolve([])}):t.resolve([]),t.promise()}function m(){var e=5;try{if(window.Hls&&Hls.isSupported()){var t=$(".suggestion-list").find(".player-video");if(!t.length)return;t.each(function(t,n){var r=$(this),i=r.data("id"),a="";g(i).then(function(t){if(t&&t[0]){var n=t[0],i=n.videoinfo&&n.videoinfo.plflag,o=n.videoinfo&&n.videoinfo.plflag_list,s=n.level;if(!i)return;i=i.split("_");var l=$('<video muted autoplay width=100% height=100% class="video-hls video-hls-'+r.data("name")+'"></video>');r.after(l),s>e&&(a="_mid");var u=PDR.getProtocol()+"//pl-hls"+i[1]+".live.panda.tv/live_panda/"+r.data("key")+a+".m3u8"+h(o),c=new Hls;c.loadSource(u),c.attachMedia(l[0]),c.on(Hls.Events.MANIFEST_PARSED,function(){l[0].play()})}})})}}catch(n){return}}function v(){var e=M.width();if(!E||E!=e){switch(e){case 1460:y("bg0");break;case 1200:y("bg1");break;case 980:y("bg2")}E=e}}function y(e){var t,n,r,i,a=$(".index-slider-outlink"),o=PDR.getStaticSslUrl(N[e]),s=N.color||"#1c211d",l=N.url;j&&(t=N[e+"_posid"],n=N[e+"_adid"],r=N[e+"_view_m_link"],i=N[e+"_click_m_link"],j&&C.log(t,"view")),o&&B.css({background:'url("'+O(o)+'") '+s+" no-repeat center center"}),l&&(0===$(".index-slider-outlink").length?j?B.append('<a target="_blank" href="'+l+'" class="index-slider-outlink" data-tfate-posid="'+t+'" data-tfate-adid="'+n+'" data-tfate-monitor-view="'+r+'" data-tfate-monitor-click="'+i+'"></a>'):B.append('<a target="_blank" href="'+l+'" class="index-slider-outlink" data-toggle="panda-monitor" data-paew="shouye-bj-1"></a>'):(a.attr("href",l),j&&a.attr({"data-tfate-posid":t,"data-tfate-adid":n,"data-tfate-monitor-view":r,"data-tfate-monitor-click":i})))}function b(e){var t=$(e).find(".stars").width(),n=$(window).width();t+60>n?$(e).find(".arrows").addClass("insetArrow"):$(e).find(".arrows").removeClass("insetArrow")}function _(e){var t=!1;$(e).width();return t=!0}function w(){P.init()}function x(){PDR.ajax("/cmstmall/panda_tmall.json").done(function(e){e.enter&&e.enter.pc_index&&($(".index-tmall-enter").find(".index-tamll-enter-link").css("background","url("+L(e.enter.pc_index.pic)+") no-repeat"),$(".index-tmall-enter").find(".index-tamll-enter-link").attr("href",L(e.enter.pc_index.url)))})}function k(){var e={},t=$(".index-shuffer").find(".stars-wall").width();return t<1200?(e.width=t/4,e.maxSlides=4):t>=1460?(e.width=t/5,e.maxSlides=5):(e.width=t/5,e.maxSlides=5),e}n(550);var E,S=n(25),T=n(3),A=n(58),R=n(551),I=n(552),D=n(117),C=n(507),O=n(210),L=n(531),P=n(566),B=$(".index-slider-video-container"),M=B.find(".index-slider-video-content"),U=$("#index-slider-bg")[0].text||"",N=$.parseJSON(U)[0]||{},j=N.isTfate;r()},function(e,t){!function(e){var t={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,slideZIndex:50,wrapperClass:"bx-wrapper",touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,ariaLive:!0,ariaHidden:!0,keyboardEnabled:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",stopAutoOnClick:!1,autoHover:!1,autoDelay:0,autoSlideForOnePage:!1,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,shrinkItems:!1,onSliderLoad:function(){return!0},onSlideBefore:function(){return!0},onSlideAfter:function(){return!0},onSlideNext:function(){return!0},onSlidePrev:function(){return!0},onSliderResize:function(){return!0}};e.fn.bxSlider=function(n){if(0===this.length)return this;if(this.length>1)return this.each(function(){e(this).bxSlider(n)}),this;var r={},a=this,o=e(window).width(),s=e(window).height();if(!e(a).data("bxSlider")){var l=function(){e(a).data("bxSlider")||(r.settings=e.extend({},t,n),r.settings.slideWidth=parseInt(r.settings.slideWidth),r.children=a.children(r.settings.slideSelector),r.children.length<r.settings.minSlides&&(r.settings.minSlides=r.children.length),r.children.length<r.settings.maxSlides&&(r.settings.maxSlides=r.children.length),r.settings.randomStart&&(r.settings.startSlide=Math.floor(Math.random()*r.children.length)),r.active={index:r.settings.startSlide},r.carousel=r.settings.minSlides>1||r.settings.maxSlides>1,r.carousel&&(r.settings.preloadImages="all"),r.minThreshold=r.settings.minSlides*r.settings.slideWidth+(r.settings.minSlides-1)*r.settings.slideMargin,r.maxThreshold=r.settings.maxSlides*r.settings.slideWidth+(r.settings.maxSlides-1)*r.settings.slideMargin,r.working=!1,r.controls={},r.interval=null,r.animProp="vertical"===r.settings.mode?"top":"left",r.usingCSS=r.settings.useCSS&&"fade"!==r.settings.mode&&function(){for(var e=document.createElement("div"),t=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"],n=0;n<t.length;n++)if(void 0!==e.style[t[n]])return r.cssPrefix=t[n].replace("Perspective","").toLowerCase(),r.animProp="-"+r.cssPrefix+"-transform",!0;return!1}(),"vertical"===r.settings.mode&&(r.settings.maxSlides=r.settings.minSlides),a.data("origStyle",a.attr("style")),a.children(r.settings.slideSelector).each(function(){e(this).data("origStyle",e(this).attr("style"))}),u())},u=function(){var t=r.children.eq(r.settings.startSlide);a.wrap('<div class="'+r.settings.wrapperClass+'"><div class="bx-viewport"></div></div>'),r.viewport=a.parent(),r.settings.ariaLive&&!r.settings.ticker&&r.viewport.attr("aria-live","polite"),r.loader=e('<div class="bx-loading" />'),r.viewport.prepend(r.loader),a.css({width:"horizontal"===r.settings.mode?1e3*r.children.length+215+"%":"auto",position:"relative"}),r.usingCSS&&r.settings.easing?a.css("-"+r.cssPrefix+"-transition-timing-function",r.settings.easing):r.settings.easing||(r.settings.easing="swing"),r.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),r.viewport.parent().css({maxWidth:h()}),r.settings.pager||r.settings.controls||r.viewport.parent().css({margin:"0 auto 0px"}),r.children.css({"float":"horizontal"===r.settings.mode?"left":"none",listStyle:"none",position:"relative"}),r.children.css("width",p()),"horizontal"===r.settings.mode&&r.settings.slideMargin>0&&r.children.css("marginRight",r.settings.slideMargin),"vertical"===r.settings.mode&&r.settings.slideMargin>0&&r.children.css("marginBottom",r.settings.slideMargin),"fade"===r.settings.mode&&(r.children.css({position:"absolute",zIndex:0,display:"none"}),r.children.eq(r.settings.startSlide).css({zIndex:r.settings.slideZIndex,display:"block"})),r.controls.el=e('<div class="bx-controls" />'),r.settings.captions&&E(),r.active.last=r.settings.startSlide===m()-1,r.settings.video&&a.fitVids(),("all"===r.settings.preloadImages||r.settings.ticker)&&(t=r.children),r.settings.ticker?r.settings.pager=!1:(r.settings.controls&&x(),r.settings.auto&&r.settings.autoControls&&k(),r.settings.pager&&w(),(r.settings.controls||r.settings.autoControls||r.settings.pager)&&r.viewport.after(r.controls.el)),c(t,f)},c=function(t,n){var r=t.find('img:not([src=""]), iframe').length,i=0;return 0===r?void n():void t.find('img:not([src=""]), iframe').each(function(){e(this).one("load error",function(){++i===r&&n()}).each(function(){this.complete&&e(this).load()})})},f=function(){if(r.settings.infiniteLoop&&"fade"!==r.settings.mode&&!r.settings.ticker){var t="vertical"===r.settings.mode?r.settings.minSlides:r.settings.maxSlides,n=r.children.slice(0,t).clone(!0).addClass("bx-clone"),i=r.children.slice(-t).clone(!0).addClass("bx-clone");r.settings.ariaHidden&&(n.attr("aria-hidden",!0),i.attr("aria-hidden",!0)),a.append(n).prepend(i)}r.loader.remove(),y(),"vertical"===r.settings.mode&&(r.settings.adaptiveHeight=!0),r.viewport.height(d()),a.redrawSlider(),r.settings.onSliderLoad.call(a,r.active.index),r.initialized=!0,r.settings.responsive&&e(window).bind("resize",q),r.settings.auto&&r.settings.autoStart&&(m()>1||r.settings.autoSlideForOnePage)&&P(),r.settings.ticker&&B(),r.settings.pager&&D(r.settings.startSlide),r.settings.controls&&L(),r.settings.touchEnabled&&!r.settings.ticker&&N(),r.settings.keyboardEnabled&&!r.settings.ticker&&e(document).keydown($)},d=function(){var t=0,n=e();if("vertical"===r.settings.mode||r.settings.adaptiveHeight)if(r.carousel){var a=1===r.settings.moveSlides?r.active.index:r.active.index*v();for(n=r.children.eq(a),i=1;i<=r.settings.maxSlides-1;i++)n=a+i>=r.children.length?n.add(r.children.eq(i-1)):n.add(r.children.eq(a+i))}else n=r.children.eq(r.active.index);else n=r.children;return"vertical"===r.settings.mode?(n.each(function(n){t+=e(this).outerHeight()}),r.settings.slideMargin>0&&(t+=r.settings.slideMargin*(r.settings.minSlides-1))):t=Math.max.apply(Math,n.map(function(){return e(this).outerHeight(!1)}).get()),"border-box"===r.viewport.css("box-sizing")?t+=parseFloat(r.viewport.css("padding-top"))+parseFloat(r.viewport.css("padding-bottom"))+parseFloat(r.viewport.css("border-top-width"))+parseFloat(r.viewport.css("border-bottom-width")):"padding-box"===r.viewport.css("box-sizing")&&(t+=parseFloat(r.viewport.css("padding-top"))+parseFloat(r.viewport.css("padding-bottom"))),t},h=function(){var e="100%";return r.settings.slideWidth>0&&(e="horizontal"===r.settings.mode?r.settings.maxSlides*r.settings.slideWidth+(r.settings.maxSlides-1)*r.settings.slideMargin:r.settings.slideWidth),e},p=function(){var e=r.settings.slideWidth,t=r.viewport.width();if(0===r.settings.slideWidth||r.settings.slideWidth>t&&!r.carousel||"vertical"===r.settings.mode)e=t;else if(r.settings.maxSlides>1&&"horizontal"===r.settings.mode){if(t>r.maxThreshold)return e;t<r.minThreshold?e=(t-r.settings.slideMargin*(r.settings.minSlides-1))/r.settings.minSlides:r.settings.shrinkItems&&(e=Math.floor((t+r.settings.slideMargin)/Math.ceil((t+r.settings.slideMargin)/(e+r.settings.slideMargin))-r.settings.slideMargin))}return e},g=function(){var e=1,t=null;return"horizontal"===r.settings.mode&&r.settings.slideWidth>0?r.viewport.width()<r.minThreshold?e=r.settings.minSlides:r.viewport.width()>r.maxThreshold?e=r.settings.maxSlides:(t=r.children.first().width()+r.settings.slideMargin,e=Math.floor((r.viewport.width()+r.settings.slideMargin)/t)):"vertical"===r.settings.mode&&(e=r.settings.minSlides),e},m=function(){var e=0,t=0,n=0;if(r.settings.moveSlides>0)if(r.settings.infiniteLoop)e=Math.ceil(r.children.length/v());else for(;t<r.children.length;)++e,t=n+g(),n+=r.settings.moveSlides<=g()?r.settings.moveSlides:g();else e=Math.ceil(r.children.length/g());return e},v=function(){return r.settings.moveSlides>0&&r.settings.moveSlides<=g()?r.settings.moveSlides:g()},y=function(){var e,t,n;r.children.length>r.settings.maxSlides&&r.active.last&&!r.settings.infiniteLoop?"horizontal"===r.settings.mode?(t=r.children.last(),e=t.position(),b(-(e.left-(r.viewport.width()-t.outerWidth())),"reset",0)):"vertical"===r.settings.mode&&(n=r.children.length-r.settings.minSlides,e=r.children.eq(n).position(),b(-e.top,"reset",0)):(e=r.children.eq(r.active.index*v()).position(),r.active.index===m()-1&&(r.active.last=!0),void 0!==e&&("horizontal"===r.settings.mode?b(-e.left,"reset",0):"vertical"===r.settings.mode&&b(-e.top,"reset",0)))},b=function(t,n,i,o){var s,l;r.usingCSS?(l="vertical"===r.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)",a.css("-"+r.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"===n?(a.css(r.animProp,l),0!==i?a.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){e(t.target).is(a)&&(a.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),C())}):C()):"reset"===n?a.css(r.animProp,l):"ticker"===n&&(a.css("-"+r.cssPrefix+"-transition-timing-function","linear"),a.css(r.animProp,l),0!==i?a.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(t){e(t.target).is(a)&&(a.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(o.resetValue,"reset",0),M())}):(b(o.resetValue,"reset",0),M()))):(s={},s[r.animProp]=t,"slide"===n?a.animate(s,i,r.settings.easing,function(){C()}):"reset"===n?a.css(r.animProp,t):"ticker"===n&&a.animate(s,i,"linear",function(){b(o.resetValue,"reset",0),M()}))},_=function(){for(var t="",n="",i=m(),a=0;a<i;a++)n="",r.settings.buildPager&&e.isFunction(r.settings.buildPager)||r.settings.pagerCustom?(n=r.settings.buildPager(a),r.pagerEl.addClass("bx-custom-pager")):(n=a+1,r.pagerEl.addClass("bx-default-pager")),t+='<div class="bx-pager-item"><a href="" data-slide-index="'+a+'" class="bx-pager-link">'+n+"</a></div>";r.pagerEl.html(t)},w=function(){r.settings.pagerCustom?r.pagerEl=e(r.settings.pagerCustom):(r.pagerEl=e('<div class="bx-pager" />'),r.settings.pagerSelector?e(r.settings.pagerSelector).html(r.pagerEl):r.controls.el.addClass("bx-has-pager").append(r.pagerEl),_()),r.pagerEl.on("click touchend","a",I)},x=function(){r.controls.next=e('<a class="bx-next" href="">'+r.settings.nextText+"</a>"),r.controls.prev=e('<a class="bx-prev" href="">'+r.settings.prevText+"</a>"),r.controls.next.bind("click touchend",S),r.controls.prev.bind("click touchend",T),r.settings.nextSelector&&e(r.settings.nextSelector).append(r.controls.next),r.settings.prevSelector&&e(r.settings.prevSelector).append(r.controls.prev),r.settings.nextSelector||r.settings.prevSelector||(r.controls.directionEl=e('<div class="bx-controls-direction" />'),r.controls.directionEl.append(r.controls.prev).append(r.controls.next),r.controls.el.addClass("bx-has-controls-direction").append(r.controls.directionEl))},k=function(){r.controls.start=e('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+r.settings.startText+"</a></div>"),r.controls.stop=e('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+r.settings.stopText+"</a></div>"),r.controls.autoEl=e('<div class="bx-controls-auto" />'),r.controls.autoEl.on("click",".bx-start",A),r.controls.autoEl.on("click",".bx-stop",R),r.settings.autoControlsCombine?r.controls.autoEl.append(r.controls.start):r.controls.autoEl.append(r.controls.start).append(r.controls.stop),r.settings.autoControlsSelector?e(r.settings.autoControlsSelector).html(r.controls.autoEl):r.controls.el.addClass("bx-has-controls-auto").append(r.controls.autoEl),O(r.settings.autoStart?"stop":"start")},E=function(){r.children.each(function(t){var n=e(this).find("img:first").attr("title");void 0!==n&&(""+n).length&&e(this).append('<div class="bx-caption"><span>'+n+"</span></div>")})},S=function(e){e.preventDefault(),r.controls.el.hasClass("disabled")||(r.settings.auto&&r.settings.stopAutoOnClick&&a.stopAuto(),a.goToNextSlide())},T=function(e){e.preventDefault(),r.controls.el.hasClass("disabled")||(r.settings.auto&&r.settings.stopAutoOnClick&&a.stopAuto(),a.goToPrevSlide())},A=function(e){a.startAuto(),e.preventDefault()},R=function(e){a.stopAuto(),e.preventDefault()},I=function(t){var n,i;t.preventDefault(),r.controls.el.hasClass("disabled")||(r.settings.auto&&r.settings.stopAutoOnClick&&a.stopAuto(),n=e(t.currentTarget),void 0!==n.attr("data-slide-index")&&(i=parseInt(n.attr("data-slide-index")),i!==r.active.index&&a.goToSlide(i)))},D=function(t){var n=r.children.length;return"short"===r.settings.pagerType?(r.settings.maxSlides>1&&(n=Math.ceil(r.children.length/r.settings.maxSlides)),void r.pagerEl.html(t+1+r.settings.pagerShortSeparator+n)):(r.pagerEl.find("a").removeClass("active"),void r.pagerEl.each(function(n,r){e(r).find("a").eq(t).addClass("active")}))},C=function(){if(r.settings.infiniteLoop){var e="";0===r.active.index?e=r.children.eq(0).position():r.active.index===m()-1&&r.carousel?e=r.children.eq((m()-1)*v()).position():r.active.index===r.children.length-1&&(e=r.children.eq(r.children.length-1).position()),e&&("horizontal"===r.settings.mode?b(-e.left,"reset",0):"vertical"===r.settings.mode&&b(-e.top,"reset",0))}r.working=!1,r.settings.onSlideAfter.call(a,r.children.eq(r.active.index),r.oldIndex,r.active.index)},O=function(e){r.settings.autoControlsCombine?r.controls.autoEl.html(r.controls[e]):(r.controls.autoEl.find("a").removeClass("active"),r.controls.autoEl.find("a:not(.bx-"+e+")").addClass("active"))},L=function(){1===m()?(r.controls.prev.addClass("disabled"),r.controls.next.addClass("disabled")):!r.settings.infiniteLoop&&r.settings.hideControlOnEnd&&(0===r.active.index?(r.controls.prev.addClass("disabled"),r.controls.next.removeClass("disabled")):r.active.index===m()-1?(r.controls.next.addClass("disabled"),r.controls.prev.removeClass("disabled")):(r.controls.prev.removeClass("disabled"),r.controls.next.removeClass("disabled")))},P=function(){if(r.settings.autoDelay>0){setTimeout(a.startAuto,r.settings.autoDelay)}else a.startAuto(),e(window).focus(function(){a.startAuto()}).blur(function(){a.stopAuto()});r.settings.autoHover&&a.hover(function(){r.interval&&(a.stopAuto(!0),r.autoPaused=!0)},function(){r.autoPaused&&(a.startAuto(!0),r.autoPaused=null)})},B=function(){var t,n,i,o,s,l,u,c,f=0;"next"===r.settings.autoDirection?a.append(r.children.clone().addClass("bx-clone")):(a.prepend(r.children.clone().addClass("bx-clone")),t=r.children.first().position(),f="horizontal"===r.settings.mode?-t.left:-t.top),b(f,"reset",0),r.settings.pager=!1,r.settings.controls=!1,r.settings.autoControls=!1,r.settings.tickerHover&&(r.usingCSS?(o="horizontal"===r.settings.mode?4:5,r.viewport.hover(function(){n=a.css("-"+r.cssPrefix+"-transform"),i=parseFloat(n.split(",")[o]),b(i,"reset",0)},function(){c=0,r.children.each(function(t){c+="horizontal"===r.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)}),s=r.settings.speed/c,l="horizontal"===r.settings.mode?"left":"top",u=s*(c-Math.abs(parseInt(i))),M(u)})):r.viewport.hover(function(){a.stop()},function(){c=0,r.children.each(function(t){c+="horizontal"===r.settings.mode?e(this).outerWidth(!0):e(this).outerHeight(!0)}),s=r.settings.speed/c,l="horizontal"===r.settings.mode?"left":"top",u=s*(c-Math.abs(parseInt(a.css(l)))),M(u)})),M()},M=function(e){var t,n,i,o=e?e:r.settings.speed,s={left:0,top:0},l={left:0,top:0};"next"===r.settings.autoDirection?s=a.find(".bx-clone").first().position():l=r.children.first().position(),t="horizontal"===r.settings.mode?-s.left:-s.top,n="horizontal"===r.settings.mode?-l.left:-l.top,i={resetValue:n},b(t,"ticker",o,i)},U=function(t){var n=e(window),r={top:n.scrollTop(),left:n.scrollLeft()},i=t.offset();return r.right=r.left+n.width(),r.bottom=r.top+n.height(),i.right=i.left+t.outerWidth(),i.bottom=i.top+t.outerHeight(),!(r.right<i.left||r.left>i.right||r.bottom<i.top||r.top>i.bottom)},$=function(e){var t=document.activeElement.tagName.toLowerCase(),n="input|textarea",r=new RegExp(t,["i"]),i=r.exec(n);if(null==i&&U(a)){if(39===e.keyCode)return S(e),!1;if(37===e.keyCode)return T(e),!1}},N=function(){r.touch={start:{x:0,y:0},end:{x:0,y:0}},r.viewport.bind("touchstart MSPointerDown pointerdown",j),r.viewport.on("click",".bxslider a",function(e){r.viewport.hasClass("click-disabled")&&(e.preventDefault(),r.viewport.removeClass("click-disabled"))})},j=function(e){if(r.controls.el.addClass("disabled"),r.working)e.preventDefault(),r.controls.el.removeClass("disabled");else{r.touch.originalPos=a.position();var t=e.originalEvent,n="undefined"!=typeof t.changedTouches?t.changedTouches:[t];r.touch.start.x=n[0].pageX,r.touch.start.y=n[0].pageY,r.viewport.get(0).setPointerCapture&&(r.pointerId=t.pointerId,r.viewport.get(0).setPointerCapture(r.pointerId)),r.viewport.bind("touchmove MSPointerMove pointermove",z),
r.viewport.bind("touchend MSPointerUp pointerup",H),r.viewport.bind("MSPointerCancel pointercancel",F)}},F=function(e){b(r.touch.originalPos.left,"reset",0),r.controls.el.removeClass("disabled"),r.viewport.unbind("MSPointerCancel pointercancel",F),r.viewport.unbind("touchmove MSPointerMove pointermove",z),r.viewport.unbind("touchend MSPointerUp pointerup",H),r.viewport.get(0).releasePointerCapture&&r.viewport.get(0).releasePointerCapture(r.pointerId)},z=function(e){var t=e.originalEvent,n="undefined"!=typeof t.changedTouches?t.changedTouches:[t],i=Math.abs(n[0].pageX-r.touch.start.x),a=Math.abs(n[0].pageY-r.touch.start.y),o=0,s=0;3*i>a&&r.settings.preventDefaultSwipeX?e.preventDefault():3*a>i&&r.settings.preventDefaultSwipeY&&e.preventDefault(),"fade"!==r.settings.mode&&r.settings.oneToOneTouch&&("horizontal"===r.settings.mode?(s=n[0].pageX-r.touch.start.x,o=r.touch.originalPos.left+s):(s=n[0].pageY-r.touch.start.y,o=r.touch.originalPos.top+s),b(o,"reset",0))},H=function(e){r.viewport.unbind("touchmove MSPointerMove pointermove",z),r.controls.el.removeClass("disabled");var t=e.originalEvent,n="undefined"!=typeof t.changedTouches?t.changedTouches:[t],i=0,o=0;r.touch.end.x=n[0].pageX,r.touch.end.y=n[0].pageY,"fade"===r.settings.mode?(o=Math.abs(r.touch.start.x-r.touch.end.x),o>=r.settings.swipeThreshold&&(r.touch.start.x>r.touch.end.x?a.goToNextSlide():a.goToPrevSlide(),a.stopAuto())):("horizontal"===r.settings.mode?(o=r.touch.end.x-r.touch.start.x,i=r.touch.originalPos.left):(o=r.touch.end.y-r.touch.start.y,i=r.touch.originalPos.top),!r.settings.infiniteLoop&&(0===r.active.index&&o>0||r.active.last&&o<0)?b(i,"reset",200):Math.abs(o)>=r.settings.swipeThreshold?(o<0?a.goToNextSlide():a.goToPrevSlide(),a.stopAuto()):b(i,"reset",200)),r.viewport.unbind("touchend MSPointerUp pointerup",H),r.viewport.get(0).releasePointerCapture&&r.viewport.get(0).releasePointerCapture(r.pointerId)},q=function(t){if(r.initialized)if(r.working)window.setTimeout(q,10);else{var n=e(window).width(),i=e(window).height();o===n&&s===i||(o=n,s=i,a.redrawSlider(),r.settings.onSliderResize.call(a,r.active.index))}},V=function(e){var t=g();r.settings.ariaHidden&&!r.settings.ticker&&(r.children.attr("aria-hidden","true"),r.children.slice(e,e+t).attr("aria-hidden","false"))},G=function(e){return e<0?r.settings.infiniteLoop?m()-1:r.active.index:e>=m()?r.settings.infiniteLoop?0:r.active.index:e};return a.goToSlide=function(t,n,i){var o,s,l,u,c=!0,f=0,h={left:0,top:0},p=null;if(!r.working){if(r.working=!0,r.oldIndex=r.active.index,r.active.index=G(t),c=r.settings.onSlideBefore.call(a,r.children.eq(r.active.index),r.oldIndex,r.active.index),"undefined"!=typeof c&&!c)return r.active.index=r.oldIndex,void(r.working=!1);"next"===n?r.settings.onSlideNext.call(a,r.children.eq(r.active.index),r.oldIndex,r.active.index)||(c=!1):"prev"===n&&(r.settings.onSlidePrev.call(a,r.children.eq(r.active.index),r.oldIndex,r.active.index)||(c=!1)),r.active.last=r.active.index>=m()-1,(r.settings.pager||r.settings.pagerCustom)&&D(r.active.index),r.settings.controls&&L(),"fade"===r.settings.mode?(r.settings.adaptiveHeight&&r.viewport.height()!==d()&&r.viewport.animate({height:d()},r.settings.adaptiveHeightSpeed),r.children.filter(":visible").fadeOut(r.settings.speed).css({zIndex:0}),r.children.eq(r.active.index).css("zIndex",r.settings.slideZIndex+1).fadeIn(r.settings.speed,function(){e(this).css("zIndex",r.settings.slideZIndex),C()})):(r.settings.adaptiveHeight&&r.viewport.height()!==d()&&r.viewport.animate({height:d()},r.settings.adaptiveHeightSpeed),!r.settings.infiniteLoop&&r.carousel&&r.active.last?"horizontal"===r.settings.mode?(p=r.children.eq(r.children.length-1),h=p.position(),f=r.viewport.width()-p.outerWidth()):(o=r.children.length-r.settings.minSlides,h=r.children.eq(o).position()):r.carousel&&r.active.last&&"prev"===n?(s=1===r.settings.moveSlides?r.settings.maxSlides-v():(m()-1)*v()-(r.children.length-r.settings.maxSlides),p=a.children(".bx-clone").eq(s),h=p.position()):"next"===n&&0===r.active.index?(h=a.find("> .bx-clone").eq(r.settings.maxSlides).position(),r.active.last=!1):t>=0&&(u=t*parseInt(v()),h=r.children.eq(u).position()),"undefined"!=typeof h?(l="horizontal"===r.settings.mode?-(h.left-f):-h.top,b(l,"slide","number"===e.type(i)?i:r.settings.speed)):r.working=!1),r.settings.ariaHidden&&V(r.active.index*v())}},a.goToNextSlide=function(){if(r.settings.infiniteLoop||!r.active.last){var e=parseInt(r.active.index)+1;a.goToSlide(e,"next")}},a.goToPrevSlide=function(){if(r.settings.infiniteLoop||0!==r.active.index){var e=parseInt(r.active.index)-1;a.goToSlide(e,"prev")}},a.startAuto=function(e){r.interval||(r.interval=setInterval(function(){"next"===r.settings.autoDirection?a.goToNextSlide():a.goToPrevSlide()},r.settings.pause),r.settings.autoControls&&e!==!0&&O("stop"))},a.stopAuto=function(e){r.interval&&(clearInterval(r.interval),r.interval=null,r.settings.autoControls&&e!==!0&&O("start"))},a.getCurrentSlide=function(){return r.active.index},a.getCurrentSlideElement=function(){return r.children.eq(r.active.index)},a.getSlideElement=function(e){return r.children.eq(e)},a.getSlideCount=function(){return r.children.length},a.isWorking=function(){return r.working},a.redrawSlider=function(){r.children.add(a.find(".bx-clone")).outerWidth(p()),r.viewport.css("height",d()),r.settings.ticker||y(),r.active.last&&(r.active.index=m()-1),r.active.index>=m()&&(r.active.last=!0),r.settings.pager&&!r.settings.pagerCustom&&(_(),D(r.active.index)),r.settings.ariaHidden&&V(r.active.index*v())},a.destroySlider=function(){r.initialized&&(r.initialized=!1,e(".bx-clone",this).remove(),r.children.each(function(){void 0!==e(this).data("origStyle")?e(this).attr("style",e(this).data("origStyle")):e(this).removeAttr("style")}),void 0!==e(this).data("origStyle")?this.attr("style",e(this).data("origStyle")):e(this).removeAttr("style"),e(this).unwrap().unwrap(),r.controls.el&&r.controls.el.remove(),r.controls.next&&r.controls.next.remove(),r.controls.prev&&r.controls.prev.remove(),r.pagerEl&&r.settings.controls&&!r.settings.pagerCustom&&r.pagerEl.remove(),e(".bx-caption",this).remove(),r.controls.autoEl&&r.controls.autoEl.remove(),clearInterval(r.interval),r.settings.responsive&&e(window).unbind("resize",q),r.settings.keyboardEnabled&&e(document).unbind("keydown",$),e(this).removeData("bxSlider"))},a.reloadSlider=function(t){void 0!==t&&(n=t),a.destroySlider(),l(),e(a).data("bxSlider",this)},a.resetSlider=function(t){r&&r.settings&&(e.extend(r.settings,t),r.active.last=r.settings.startSlide===m()-1)},l(),e(a).data("bxSlider",this),this}}}(jQuery)},function(e,t){"use strict";function n(){return window.localStorage&&localStorage.getItem?localStorage.getItem(o)||-1:null}function r(e){window.localStorage&&localStorage.setItem&&localStorage.setItem(o,e)}function i(){var e=Math.floor($.now()/864e5),t=n(),i=$("#j-go-top-down-app");null!==t&&e>t&&(r(e),i.addClass("hover"),setTimeout(function(){i.removeClass("hover")},5e3))}function a(){s.scrollTop()>700?$(".gotop-btn").fadeIn(250):$(".gotop-btn").fadeOut(250)}var o="pandatv/index/go-top-show-date",s=$(window);e.exports=function(){s.scroll(a),a(),i(),$(document).on("click",".gotop-btn",function(){if(document.body&&document.body.scrollTop)$("body").animate({scrollTop:0},200);else try{$(document.documentElement).animate({scrollTop:0},200)}catch(e){document.documentElement.scrollTop=0}})}},function(e,t,n){"use strict";function r(){$.when(d()).then(u).then(i).then(a)}function i(e){switch(e){case"flashPlayer":o();break;case"h5Player":s();break;case"videoPlayer":l()}}function a(){var e=["A02","A021","A022","A023","A024"];A.log(e)}function o(){$.when(h()).then(m).then(_)}function s(){g(),_()}function l(){p(),k()}function u(){var e=E;if(c())S=PDR.isSupportFlash?"flashPlayer":"h5Player";else{var t=C.isSupport(M,{plflag_list:decodeURIComponent(e.plflag_list),room_key:e.roomKey,cdnlines:T.H5PLAYER_CDN_LINES});S=t?"h5Player":"videoPlayer"}return S}function c(){try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash");return!0}catch(e){return!!navigator.plugins["Shockwave Flash"]}}function f(e){if(!e)return"";var t=JSON.parse(e),n=t.auth&&t.auth.sign,r=t.auth&&t.auth.rid,i=t.auth&&t.auth.time;return r?"?sign="+n+"&ts="+i+"&rid="+r:""}function d(){$(".small-pic-current-item").removeClass("small-pic-current-item");var e=$(".small-pic-item-a"),t=$(e[Math.floor(Math.random()*e.length)]);t.addClass("small-pic-current-item"),b(),E={roomKey:t.data("key"),roomID:t.data("id"),plflag:t.data("flag"),plflag_list:encodeURIComponent(JSON.stringify(t.data("flag-list"))),watermark_switch:t.data("watermark-switch"),watermark_loc:t.data("watermark-loc")}}function h(){var e=E;return I.videoId=e.roomKey,I.roomUrl=PDR.getProtocol()+"//"+window.location.host+"/"+e.roomID,I.plflag=e.plflag,I.plflag_list=e.plflag_list,I.watermark_switch=e.watermark_switch,I.watermark_loc=e.watermark_loc,O("swf_play").render(I,{allowFullScreenInteractive:"true",wMode:"Opaque",bgColor:"#000"})}function p(){var e=E,t=e.plflag.split("_");$("#swf_play").html(R({hls:PDR.getProtocol()+"//pl-hls"+t[1]+".live.panda.tv/live_panda/"+e.roomKey+".m3u8"+f(e.videoinfo.plflag_list)})),D.init(M,{indexMode:!0,roomUrl:PDR.getProtocol()+"//"+window.location.host+"/"+e.roomID})}function g(){var e=E;e||h();var t={};t={plflag_list:decodeURIComponent(e.plflag_list),room_key:e.roomKey},t.cdnlines=T.H5PLAYER_CDN_LINES,C.init(e.roomID,$("#swf_play"),t)}function m(e){P=e,P.registerApi(["flash.changeVideoStream"])}function v(){var e=$(".small-pic-current-item"),t={};return t.index=e.index()-1,t.height=e.height(),t.itemPadding=parseInt(e.css("padding-top"),10),t.containerPadding=parseInt(e.closest(".small-pic-container").css("padding-top"),10),t.itemMargin=parseInt(e.css("margin-bottom"),10),t.itemHeightTotal=(t.height+t.itemMargin+2*t.itemPadding)*t.index+t.containerPadding,t}function y(){var e=v();return L||(L=!0,$(".slider-video-arrow").animate({top:e.itemHeightTotal},250,function(){L=!1})),!0}function b(){var e=$(".slider-video-arrow");e.show();var t=v();e.css("top",t.itemHeightTotal)}function _(){$(".small-pic-container").on("click",".small-pic-item-a",function(){("flashPlayer"!=S||P)&&$(this).data("key")&&!$(this).hasClass("small-pic-current-item")&&(B={key:$(this).data("key"),roomID:$(this).data("id"),roomUrl:$(this).data("url"),channel:$(this).data("channel"),flag:$(this).data("flag"),flag_list:JSON.stringify($(this).data("flag-list")),watermark_switch:$(this).data("watermark-switch"),watermark_loc:$(this).data("watermark-loc")},$(".small-pic-current-item").removeClass("small-pic-current-item"),$(this).addClass("small-pic-current-item"),y(),"h5Player"==S?x():w())})}function w(){P.flashChangeVideoStream({stream:B.key,roomUrl:B.roomUrl||PDR.getProtocol()+"//"+window.location.host+"/"+B.roomID+(B.hannel?"?channel="+B.channel:""),plflag:B.flag||"",plflag_list:B.flag_list||"",watermark_switch:B.watermark_switch,watermark_loc:B.watermark_loc})}function x(){C.changeVideoStream({roomKey:B.key,roomUrl:B.roomUrl||PDR.getProtocol()+"//"+window.location.host+"/"+B.roomID+(B.channel?"?channel="+B.channel:""),roomId:B.roomID,plflag:B.flag||"",plflag_list:B.flag_list||"",watermark_switch:B.watermark_switch,watermark_loc:B.watermark_loc})}function k(){$(".small-pic-container").on("click",".small-pic-item-a",function(){if($(this).data("key")&&!$(this).hasClass("small-pic-current-item")){var e=$(this).data("key"),t=$(this).data("flag"),n=$(this).attr("data-flag-list");t=t.split("_");var r=PDR.getProtocol()+"//pl-hls"+t[1]+".live.panda.tv/live_panda/"+e+".m3u8"+f(n),i=$(M).find("video");i.attr("src",r),i[0].play();var a=$(this).data("id"),o=$(this).data("url"),s=$(this).data("channel");D.setOption("roomUrl",o||PDR.getProtocol()+"//"+window.location.host+"/"+a+(s?"?channel="+s:"")),$(".small-pic-current-item").removeClass("small-pic-current-item"),$(this).addClass("small-pic-current-item"),y()}})}var E,S,T=n(66),A=n(507),R=n(553),I={resource:T.getPandaPlayerUrl(),width:1e3,height:562,sign:!0,protocol:PDR.getProtocol().split(":")[0]},D=n(290),C=n(554),O=n(61),L=!1,P=null,B={},M="#swf_play";$(window).resize(function(){L&&$(".slider-video-arrow").stop(),b()}),e.exports={init:r,initSliderClickEvent:_}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a;return'<video autoplay loop webkit-playsinline src="'+e.escapeExpression((a=null!=(a=n.hls||(null!=t?t.hls:t))?a:n.helperMissing,"function"==typeof a?a.call(null!=t?t:{},{name:"hls",hash:{},data:i}):a))+'" class="player-video"></video>'},useData:!0})},function(e,t,n){"use strict";function r(e,t,r){I=e,A=r||{},A.roomId=I,T=t,S=n(564),T.addClass("h5player-video-loading"),i()}function i(){B=A.room_key,l(),s(),o(A.plflag_list,B);var e=R.lines.main.line;R.lines.current&&(e=R.lines.current.line),C={line:"",stream:"SD",plflag:e},S.init(T),g(),M.on("h5player-create-player",y),a().then(function(){p(),S.play(C,"video"),D=setTimeout(h,H)})}function a(){var e=$.Deferred();return PDR.ajax("/ajax_pull_stream",{dataType:"json",data:{roomkey:B,roomid:I}}).done(function(t){0===t.errno&&t.data&&(O=t.data[I].auth.sign,P=t.data[I].auth.time,L=t.data[I].auth.rid),e.resolve()}).fail(function(){e.resolve()}),e.promise()}function o(e,t){var n=m(e,t);R=!!n&&{lines:n}}function s(){T.html(F(A))}function l(){M.on("h5player-frame-droped",u),M.on("h5player-show-offlinerec",c),M.on("h5player-stalled",f),M.on("h5player-stall-stop",d),M.on("room-message-10",h),M.once("room-player-h5player-notsupport",x)}function u(){S.play()}function c(){D||(D=setTimeout(h,H))}function f(){if(!D&&!T.find(".h5player-player-container").hasClass("h5player-control-status-paused")){var e=S.getMediaElement();4!==e.readyState&&(D=setTimeout(h,H),S&&S.play())}}function d(){D&&(clearTimeout(D),D=null,j.hide()),M.triggerEvent("room-live-stream-open")}function h(){S&&S.isPlaying()||T.find(".h5player-player-container").hasClass("h5player-control-status-paused")||(j.show(),M.triggerEvent("room-live-stream-close"))}function p(){var e="";C.line=PDR.getProtocol()+"//pl"+C.plflag+".live.panda.tv/live_panda/"+B+e+".flv"+(L?"?sign="+O+"&ts="+P+"&rid="+L:"")}function g(){R.lines.backup=[],j.init(T.find(".h5player-offline-rec")),U.init(S);var e={currentStream:C.stream,disablePageFullscreen:!0};N.init(T.find(".h5player-player-container"),S,e)}function m(e,t){e=JSON.parse(e);var n=e.main,r=e.backup;if(O=e.auth&&e.auth.sign,L=e.auth&&e.auth.rid,P=e.auth&&e.auth.time,!v(n))return!1;var i=e.current?v(e.current):"",a={main:v(n),current:i,backup:[]};return $.each(r,function(e,t){var n=v(t);n&&n.line!==a.main.line&&a.backup.push(n)}),a}function v(e){var t=e.match(/(\d+)_(\d+)/),n=!1;return t[2]&&21==t[2]&&(t[2]="4",x()),$.each(A.cdnlines,function(e,r){$.inArray(t[2],r.lines)>=0&&(n={cdnname:r.name,line:t[2],cdnflag:r.flag})}),n}function y(e){U.reset(),N.reset()}function b(e){e=e||{},B=e.roomKey,I=e.roomId,M.off("room-player-h5player-notsupport",x),k(),o(e.plflag_list,B),T.find(".h5player-control-enterroom").attr("href","/"+I);var t=R.lines.main.line;R.lines.current&&(t=R.lines.current.line),C={line:"",stream:"SD",plflag:t},D&&(clearTimeout(D),j.hide()),a().then(function(){p(),S.play(C,"video"),M.once("room-player-h5player-notsupport",x),D=setTimeout(h,H)})}function _(e,t){return t=t||{},T=$(e),"msie"!==E()&&"safari"!==E()&&"edge"!==E()&&(A||(A={cdnlines:t.cdnlines}),o(t.plflag_list,t.roomKey),PDR.isSupportH5player&&!!R)}function w(){M.off("h5player-create-player",y),M.off("h5player-frame-droped",u),M.off("h5player-show-offlinerec",c),M.off("h5player-stalled",f),M.off("h5player-stall-stop",d),U.destroy(),S.destroy().then(function(){T.html("")})}function x(){T.find(".h5player-index-set-flash").length<=0?T.html(z()):T.find(".h5player-index-set-flash").show()}function k(){T.find(".h5player-index-set-flash").hide()}function E(){var e=window.navigator.userAgent.toLowerCase(),t=/(edge)\/([\w.]+)/.exec(e)||/(opr)[\/]([\w.]+)/.exec(e)||/(chrome)[ \/]([\w.]+)/.exec(e)||/(iemobile)[\/]([\w.]+)/.exec(e)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return t[5]||t[3]||t[1]||""}var S,T,A,R,I,D,C,O,L,P,B,M=n(13),U=n(555),N=n(556),j=n(560),F=n(562),z=n(563),H=3e4;e.exports={init:r,changeVideoStream:b,isSupport:_,destroy:w}},function(e,t,n){"use strict";function r(e){u=e}function i(){c=u.getPlayer(),c.on("error",a)}function a(e,t,n){switch(e){case"NetworkError":o();break;case"MediaError":s(t,n);break;default:o()}}function o(){f.triggerEvent("h5player-network-exception"),u.offStream()}function s(e,t){"MediaMSEError"===e&&11===t.code?f.triggerEvent("room-player-h5player-notsupport",{}):u.offStream()}function l(){c.off("error",function(){})}var u,c,f=n(13);e.exports={init:r,destroy:l,reset:i}},function(e,t,n){"use strict";function r(e,t,n){L=n||{},L.streams="SD",T=$(e),A=$(j(L)),T.append(A),C=T.find(".h5player-control-enterroom"),B=t,R=A.find(".h5player-control-bar"),I=A.find(".h5player-control-enterroom"),D=A.find(".h5player-control-play"),s(),N.init(T.find(".h5player-control-bar-volume-container")),i()}function i(){M=-1,U=-1,T.on("mousemove",a)}function a(e){var t=e.pageX,n=e.pageY;M!==t&&U!==n&&(M=t,U=n,P&&(clearTimeout(P),P=null),P=setTimeout(function(){A.hasClass("h5player-control-in")&&$("html").hasClass("room-player-allfullscreen")&&M===t&&U===n&&(C.removeClass("h5player-control-in"),A.removeClass("h5player-control-in"))},2e3)),($("html").hasClass("room-player-allfullscreen")||M!==t||U!==n)&&(A.hasClass("h5player-control-in")||(C.addClass("h5player-control-in"),A.addClass("h5player-control-in")))}function o(){O=B.getMediaElement(),l(),N.reset(O)}function s(){T.on("mouseenter",u),T.on("mouseleave",c),"android"!==PDR.device&&"ipad"!==PDR.device||A.on("click",f),I.on("click",h),D.on("click",d),R.on("click",".h5player-control-bar-btn",m),$(document).on("keydown",k)}function l(){O.addEventListener("play",v,!1),O.addEventListener("pause",y,!1)}function u(){A.addClass("h5player-control-in"),C.addClass("h5player-control-in")}function c(){A.removeClass("h5player-control-in"),C.removeClass("h5player-control-in")}function f(e){R[0]===e.target||$.contains(R[0],e.target)||I[0]&&(I[0]===e.target||$.contains(I[0],e.target))||D[0]&&(D[0]===e.target||$.contains(D[0],e.target))||(A.toggleClass("h5player-control-in"),C.toggleClass("h5player-control-in"))}function d(e){e.preventDefault(),A.hasClass("h5player-control-in")&&p()}function h(e){A.hasClass("h5player-control-in")||e.preventDefault()}function p(){B.play()}function g(){B.pause()}function m(e){e.preventDefault();var t=$(e.currentTarget);if(t.hasClass("h5player-control-bar-play")){if(!O)return;O.paused?p():g()}else if(t.hasClass("h5player-control-bar-allfullscreen")){if($(".room-player-login-notice").is(":visible")&&!$("html").hasClass("room-player-allfullscreen"))return;_()}else t.hasClass("h5player-control-bar-reload")&&(g(),p())}function v(){A.addClass("h5player-control-status-playing"),T.removeClass("h5player-control-status-paused")}function y(){A.removeClass("h5player-control-status-playing"),T.addClass("h5player-control-status-paused")}function b(e,t){return $.isPlainObject(e)?void $.each(e,b):(L[e]=t,void("roomUrl"===e&&I.attr("href",t)))}function _(){$("html").hasClass("room-player-allfullscreen")?x():w()}function w(){var e=T[0],t=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;if($("html").toggleClass("room-player-allfullscreen"),A.toggleClass("h5player-control-status-allfullscreen"),$.isFunction(t))return void t.call(e)}function x(){var e=$(document)[0],t=e.cancelFullScreen||e.webkitCancelFullScreen||e.mozCancelFullScreen||e.exitFullScreen;if($("html").toggleClass("room-player-allfullscreen"),A.toggleClass("h5player-control-status-allfullscreen"),$.isFunction(t))return void t.call(e)}function k(e){27===e.which&&$("html").hasClass("room-player-allfullscreen")&&($("html").removeClass("room-player-allfullscreen"),A.removeClass("h5player-control-status-allfullscreen"),T.removeClass("h5player-control-status-fs"))}function E(e){N.setVolume(e)}function S(){T.hasClass("h5player-control-status-fs")&&x()}n(94);var T,A,R,I,D,C,O,L,P,B,M,U,N=n(557),j=n(559);e.exports={init:r,reset:o,setOption:b,play:p,pause:g,setVolume:E,exitFullScreen:S}},function(e,t,n){"use strict";function r(e){g=$(e),g.html(y()),a()}function i(e){p=e,parseInt(b.get(_),10)>=0?p.volume=b.get(_):p.volume=.7,"true"===b.get(w)?p.muted=!0:p.muted=!1,u(),o()}function a(){g.on("mousedown touchstart",c).on("mousemove touchmove",f).on("mouseup mouseleave touchend touchcancel",d),g.on("click",".h5player-control-bar-btn",s)}function o(){p.addEventListener("volumechange",u,!1)}function s(e){var t=$(e.currentTarget);if(t.hasClass("h5player-control-bar-volume")){if(!p)return;p.muted?(p.muted=!1,b.set(w,"false")):(p.muted=!0,b.set(w,"true")),u()}}function l(e){p&&(p.volume=e)}function u(){p.muted?g.addClass("h5player-control-status-muted"):g.removeClass("h5player-control-status-muted");var e=100*p.volume;g.find(".h5player-control-bar-volume-slidebar-inner").css("width",e+"%"),g.find(".h5player-control-bar-volume-slider").css("left",9*e/10-2+"px")}function c(e){if(p&&!p.muted){var t=$(e.target),n=t.hasClass("h5player-control-bar-volume-slider");(n||t.hasClass("h5player-control-bar-volume-slidebar")||t.hasClass("h5player-control-bar-volume-slidebar-inner"))&&(e.preventDefault(),m={drag:n,x1:e.pageX,y1:e.pageY,x2:e.pageX,y2:e.pageY})}}function f(e){if(m&&p){var t=e.pageX-m.x2,n=100*p.volume;h(n+t),m.x2=e.pageX,m.y2=e.pageY}}function d(e){if(m&&!m.drag){var t,n;t=m.x2-m.x1,n=m.y2-m.y1,t<30&&n<30&&h(m.x2-$(e.target).offset().left)}m=null}function h(e){e<0&&(e=0),e>100&&(e=100),b.set(_,e/100),p.volume=e/100}n(94);var p,g,m,v=n(268),y=n(558),b=new v({key:"panda.tv/user/H5player-voice-controller"}),_="volume",w="mute";e.exports={init:r,reset:i,setVolume:l}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<span class="h5player-control-bar-btn h5player-control-bar-volume"></span>\n<div class="h5player-control-bar-btn h5player-control-bar-volume-slide">\n  <div class="h5player-control-bar-volume-slidebar">\n    <div class="h5player-control-bar-volume-slidebar-inner"></div>\n  </div>\n  <span class="h5player-control-bar-volume-slider"></span>\n</div>\n'},useData:!0})},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div class="h5-control h5player-video-loading">\n  <div class="h5player-control-bar flute">\n    <span class="h5player-control-bar-btn h5player-control-bar-play"></span>\n    <span class="h5player-control-bar-btn h5player-control-bar-reload"></span>\n    <div class="h5player-control-bar-volume-container"></div>\n\n    <span class="h5player-control-bar-btn h5player-control-bar-allfullscreen"></span>\n    <span class="h5player-control-bar-btn h5player-control-bar-kbps">超清</span>\n  </div>\n</div>\n'},useData:!0})},function(e,t,n){"use strict";function r(e,t){o=$(e),s=t}function i(){o.is(":visible")||PDR.ajax({url:"/live_online_rmd?cate="+s,type:"GET",dataType:"json"}).done(function(e){0===e.errno&&2===e.data.total&&(o.html(l(e.data)),o.show())})}function a(){o.hide()}var o,s,l=n(561);e.exports={init:r,show:i,hide:a}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({1:function(e,t,n,r,i){var a,o,s=null!=t?t:{},l=n.helperMissing,u="function",c=e.escapeExpression,f=e.lambda;return'  <li class="video-list-item" data-id="'+c((o=null!=(o=n.id||(null!=t?t.id:t))?o:l,typeof o===u?o.call(s,{name:"id",hash:{},data:i}):o))+'">\n    <a href="/'+c((o=null!=(o=n.id||(null!=t?t.id:t))?o:l,typeof o===u?o.call(s,{name:"id",hash:{},data:i}):o))+'" class="video-list-item-wrap" data-id="'+c((o=null!=(o=n.id||(null!=t?t.id:t))?o:l,typeof o===u?o.call(s,{name:"id",hash:{},data:i}):o))+'">\n      <div class="video-cover">\n        <img class="video-img" src="'+c(f(null!=(a=null!=t?t.pictures:t)?a.img:a,t))+'" alt="'+c((o=null!=(o=n.name||(null!=t?t.name:t))?o:l,typeof o===u?o.call(s,{name:"name",hash:{},data:i}):o))+'">\n        <div class="video-enter">进入直播间</div>\n      </div>\n      <div class="video-title" title="'+c((o=null!=(o=n.name||(null!=t?t.name:t))?o:l,typeof o===u?o.call(s,{name:"name",hash:{},data:i}):o))+'">'+c((o=null!=(o=n.name||(null!=t?t.name:t))?o:l,typeof o===u?o.call(s,{name:"name",hash:{},data:i}):o))+'</div>\n      <div class="video-info">\n        <span class="video-nickname">'+c(f(null!=(a=null!=t?t.userinfo:t)?a.nickName:a,t))+'</span>\n        <span class="video-number">'+c((o=null!=(o=n.person_num||(null!=t?t.person_num:t))?o:l,typeof o===u?o.call(s,{name:"person_num",hash:{},data:i}):o))+'</span>\n        <span class="video-cate">'+c(f(null!=(a=null!=t?t.classification:t)?a.cname:a,t))+"</span>\n      </div>\n    </a>\n  </li>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a;return'<div class="h5player-offline-rec-container">\n<div class="h5player-offline-rec-notice">(⊙o⊙)  主播暂时不在家，看看其他精彩直播吧</div>\n\n<ul>\n'+(null!=(a=n.each.call(null!=t?t:{},null!=t?t.items:t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i}))?a:"")+'</ul>\n<a class="h5player-offline-rec-more" href="/all">更多直播&nbsp;&gt;</a>\n</div>\n'},useData:!0})},function(e,t,n){function r(e){return e&&(e.__esModule?e["default"]:e)}var i=n(29);e.exports=(i["default"]||i).template({1:function(e,t,n,r,i){return'style="display:block;"'},compiler:[7,">= 4.0.0"],main:function(e,t,i,a,o){var s;return'<div class="h5player-player-container">\n   <div class="h5player-player-core-container">\n     <div class="h5player-video-container"></div>\n     <div class="h5player-audio-container"></div>\n     <div class="h5player-watermark">\n       <img src="https://i.h2.pdim.gs/e21d05bd465b274650b226022a0ad655.png" />\n     </div>\n\n     <a class="h5player-control-enterroom" href="/'+e.escapeExpression(e.lambda(null!=t?t.roomId:t,t))+'">进入直播间</a>\n\n     <div class="h5player-loading"></div>\n\n     <div id="room-player-video-danmu" class="h5player-danmu"></div>\n     <div class="h5player-offline-rec"></div>\n   </div>\n\n   <div class="h5player-index-set-flash">\n     您的电脑flash版本过低或是异常,请点击<a style="color:red" target="_blank" href="https://get.adobe.com/cn/flashplayer/update/osx/">安装</a>\n   </div>\n\n   <div class="room-player-video-rectification" '+(null!=(s=r(n(51)).call(null!=t?t:{},null!=(s=null!=(s=null!=t?t.room:t)?s.roominfo:s)?s.cover_status:s,"==",1,{name:"ifcond",hash:{},fn:e.program(1,o,0),inverse:e.noop,data:o}))?s:"")+">\n   </div>\n </div>\n"},useData:!0})},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<div class="h5player-index-set-flash">\n 您的电脑flash版本过低或是异常,请点击<a style="color:red" target="_blank" href="https://get.adobe.com/cn/flashplayer/update/osx/">安装</a>\n</div>\n\n\n'},useData:!0})},function(e,t,n){"use strict";function r(e,t,n){b=$(e)}function i(e,t){S=!1,I>10&&(D=6e4),b.find(".h5player-video-container").html(T),_=document.getElementById("room-h5player-video"),w?(x&&(clearTimeout(x),x=null),w.destroy().then(function(){a(e)})["catch"](function(t){a(e)})):a(e)}function a(e){e&&(E=e),I++,o(E.line,k)}function o(e,t){b.addClass("h5player-video-loading"),w=new A({},{debug:!1}),w.attachMediaElement(_),R.triggerEvent("h5player-create-player",{line:E,type:t}),w.load(e+("audio"==t?"&only-audio=1":"")),_.addEventListener("canplay",function(){S||_.play(),S=!0,b.hasClass("h5player-video-loading")&&b.removeClass("h5player-video-loading"),b.find(".h5player-index-set-flash").hide(),R.triggerEvent("h5player-stall-stop",{})}),w.on("error",function(e,t){"NetworkError"==e&&setTimeout(i,D)}),w.on("mse_ended",function(){S=!1,s()}),_.addEventListener("stalled",function(){S=!1,s()})}function s(){R.triggerEvent("h5player-stalled",{cdn:w.responseUrl})}function l(){w.unload(),w.pause()}function u(e){y=e}function c(){return y}function f(){b.find(".h5player-video").addClass("h5player-video-43")}function d(){b.find(".h5player-video").removeClass("h5player-video-43")}function h(){return w}function p(){return _}function g(){return k}function m(){return _&&!_.error&&_.readyState>0&&(S=!0),S}function v(){w.unload(),w.pause(),w.destroy()}var y,b,_,w,x,k,E,S,T=n(565),A=n(341),R=n(13),I=0,D=3e3;e.exports={init:r,pause:l,play:i,getMediaElement:p,getPlayer:h,getRatio:c,setRatio:u,changeTo43:f,changeTo169:d,offStream:s,getType:g,isPlaying:m,destroy:v}},function(e,t,n){var r=n(29);e.exports=(r["default"]||r).template({compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){return'<video autoplay -webkit-playsinline src="" id =\'room-h5player-video\' class="h5player-video"></video>\n'},useData:!0})},function(e,t,n){"use strict";function r(){i.init(a).done(function(e){e.A04&&e.A04.content&&$(".index-plouto-1").html(o(e.A04)).show(),e.A11&&e.A11.content&&$(".index-plouto-2").html(o(e.A11)).show(),e.A13&&e.A13.content&&$(".index-plouto-3").html(o(e.A13)).show(),e.A16&&e.A16.content&&$(".index-plouto-4").html(o(e.A16)).show(),i.log(a.ids)})}var i=n(507),a={ids:["A04","A11","A13","A16"]},o=n(567);e.exports={init:r}},function(e,t,n){function r(e){return e&&(e.__esModule?e["default"]:e)}var i=n(29);e.exports=(i["default"]||i).template({1:function(e,t,i,a,o){var s,l=e.lambda,u=e.escapeExpression;return'  <a target="_blank" href="'+u(l(null!=(s=null!=t?t.content:t)?s.link:s,t))+'" data-tfate-posid="'+u(l(null!=t?t.alias:t,t))+'" data-tfate-adid="'+u(l(null!=t?t.ad_id:t,t))+'" data-tfate-monitor-view="'+u(l(null!=t?t.view_m_link:t,t))+'" data-tfate-monitor-click="'+u(l(null!=t?t.click_m_link:t,t))+'">\n    <img class="thumb-img thumb-img-lazy" src="'+u(r(n(232)).call(null!=t?t:{},null!=(s=null!=t?t.content:t)?s.img:s,{name:"convertPic2Https",hash:{},data:o}))+'">\n  </a>\n'},3:function(e,t,i,a,o){var s;return'  <img class="thumb-img thumb-img-lazy" src="'+e.escapeExpression(r(n(232)).call(null!=t?t:{},null!=(s=null!=t?t.content:t)?s.img:s,{name:"convertPic2Https",hash:{},data:o}))+'">\n'},compiler:[7,">= 4.0.0"],main:function(e,t,n,r,i){var a;return null!=(a=n["if"].call(null!=t?t:{},null!=(a=null!=t?t.content:t)?a.link:a,{name:"if",hash:{},fn:e.program(1,i,0),inverse:e.program(3,i,0),data:i}))?a:""},useData:!0})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n,r){"use strict";var i=n(r);e.exports=function(e){var t=PDR.ssl&&e?PDR.getStaticSslUrl(e):e;return i(t)}}]));